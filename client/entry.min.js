function GDSDKGamedreamerLoginListenerOnLogin(e,t){var r=window.platform;r.pfParam.openId=e.userId,r.openSelectServer()}function GDSDKGamedreamerServerListOnServerList(e){console.log("GDSDKGamedreamerServerListOnServerList-----------------"+e)}function GDSDKGamedreamerPayListenerOnPayResult(e,t){e&&window.IGameMain.payCallback(e,t),console.log("GDSDKGamedreamerPayListenerOnPayResult----------------------------"+e+"=="+t)}function GDSDKGamedreamerMemberListenerOnLogout(e){window.platform.reload()}function GDSDKH5GameLog(e){console.log("GDSDKH5GameLog----------"+e)}function GDSDKGamedreamerCheckServerListenerOnCheckServer(e){console.log("GDSDKGamedreamerCheckServerListenerOnCheckServer----------"+e)}function GDSDKSessionExpire(){window.platform.reload()}function EzwanSDKLoginEzwanCallBackListenerOnCallback(e){var t=window.platform,r=JSON.parse(e);t.pfParam.playName=r.playName,t.pfParam.userid=r.userid,t.pfParam.email=r.email,t.pfParam.applicationId=r.applicationId,t.pfParam.token=r.token,t.reportAdjust("app_login"),t.openSelectServer()}function EzwanSDKLogOutEzwanCallBackListenerOnCallback(e){var t=window.platform;t.relogin()}function EzwanSDKPayEzwanSDKPayCallbackOnSuccess(e){var t=window.platform;t.reportAdjustRecharge("Purchase",""+PlatFormHWAzGoogle.payAmount)}function EzwanSDKPayEzwanSDKPayCallbackOnError(e,t){}function EzwanSDKPayEzwanSDKPayCallbackOnCancel(){}function EzwanSDKSendIabOrderError(e){var t=window.platform;t.alert("OrderError："+e)}function EzwanSDKH5GameLog(e){}function EzwanSDKSessionExpire(){}function EzwanSDKOnBackPressed(){var e=window.platform;e.backPressed()}function ZGamesSDKApiH5GameLog(e){console.log(e)}function ZGamesSDKApiShowLoginLoginSuccess(){console.log("ZGamesSDKApiShowLoginLoginSuccess")}function ZGamesSDKApiShowLoginLoginFail(){var e=window.platform;e.openTipsWin("登錄失敗,請重新登錄",function(){e.reload()})}function ZGamesSDKApiAutoLoginLoginSuccess(e){var t=window.platform;t.pfParam.token=e,t.openSelectServer()}function ZGamesSDKApiAutoLoginLoginFail(){alert("ZGamesSDKApiAutoLoginLoginFail-----------------")}function ZGamesSDKApiSwitchAccountOnSwitchAccount(e){document.location.href="zgamessdkapi://showLogin";var t=window.platform;t.openTipsWin("切換賬號,請重新登錄",function(){t.reload()})}function ZGamesSDKApiSubmitGameUserInfoBindSuccess(){}function ZGamesSDKApiSubmitGameUserInfoBindFail(){}function ZGamesSDKApiStartPayPaySuccess(e){console.log("ZGamesSDKApiStartPayPaySuccess----------------------------"),document.location.href="zgamessdkapi://trackEvent?eventType=af_purchase"}function ZGamesSDKApiStartPayPayFail(e){console.log("ZGamesSDKApiStartPayPayFail----------------------------")}function GambleSDKLoginILoginListenerOnSuccess(e){var t=JSON.parse(e),r=window.platform;r.pfParam.setData(t),r.openSelectServer()}function GambleSDKLoginILoginListenerOnFail(){window.platform.alert("GambleSDKLoginILoginListenerOnFail-----------------")}function GambleSDKSubmitRoleInfoISubmitRoleInfoListenerOnSuccess(){}function GambleSDKSubmitRoleInfoISubmitRoleInfoListenerOnFail(){console.log("GambleSDKSubmitRoleInfoISubmitRoleInfoListenerOnFail")}function GambleSDKPayIPayListenerOnSuccess(e){console.log("GambleSDKPayIPayListenerOnSuccess----------------------------")}function GambleSDKPayIPayListenerOnFail(e){console.log("GambleSDKPayIPayListenerOnFail----------------------------"+e)}function GambleSDKH5GameLog(e){console.log(e)}function GambleSDKSessionExpire(){}function GambleSDKILogoutListenerOnLogout(e){e&&(document.location.href="gamblesdk://transparentWebViewAlphaCallback")}function GambleSDKTransparentWebViewAlphaComplete(){window.platform.reload()}function GambleSDKIExitListenerOnExit(){}function loginSuccessByGamble(e){var t=JSON.parse(e),r=window.platform;r.pfParam.setData(t),r.openSelectServer()}function loginFailByGamble(){}function paySuccessByGamble(){}function payFailByGamble(){}function submitRoleInfoSuccessByGamble(){}function submitRoleInfoFailByGamble(){}function logoutByGamble(){var e=window.IGameMain.getExtend();window.platform.logout(e)}function UnlockGameSDKInterfaceCallbackOnSuccess(e,t){window.platform;if(e==InterfaceName.login){var r=window.platform;r.pfParam.token=t,r.openSelectServer()}}function UnlockGameSDKInterfaceCallbackOnFail(e,t){window.platform;if(e==InterfaceName.login){var r=window.platform;r.alert(t)}}function UnlockGameSDKInterfaceCallbackOnCancel(e,t){window.platform;if(e==InterfaceName.login){window.platform}}function UnlockGameSDKInterfaceExitGameCallbackOnExitGame(e){var t=window.platform;t.relogin()}function UnlockGameSDKOnBackPressed(){var e=window.platform;e.backPressed()}function UnlockGameSDKInterfaceExitGameCallbackOnReturnGame(e,t){}function UnlockGameSDKInterfaceExitGameCallbackOnCancel(e){}function UnlockGameSDKInterfaceGetProductsCallbackOnSuccess(e){var t=window.platform;t.infoProducts(e)}function UnlockGameSDKInterfaceGetProductsCallbackOnError(e,t){window.platform;console.log("inapp 货币本地化Error errorSate:"+e+" errorMsg:"+t)}function UnlockGameSDKInterfaceGetProductsCallbackOnCancel(){window.platform;console.log("inapp 货币本地化Cancel")}function UnlockGameSDKH5GameLog(e){console.log("来自UnlockGameSDK日志输出回调:"+e)}function UnlockGameSDKInterfaceGetAdsListenerOnAdsStart(){}function UnlockGameSDKInterfaceGetAdsListenerOnAdsReady(e){var t=window.platform;t.adsInfo&&t.adsInfo(e?1:0)}function UnlockGameSDKInterfaceGetAdsListenerOnAdsFinish(e){var t=window.platform;t.adsPlay&&e&&t.adsPlay()}function UnlockGameSDKInterfaceGetAdsListenerOnAdsError(){}function YouYiSDKInitCallBackOnInitSuccess(){var e=window.platform;e.sdkLogin()}function YouYiSDKInitCallBackOnInitFail(){console.log("初始化失败")}function YouYiSDKLoginCallBackLogin(e){if(e){var t=window.platform;t.pfParam.oauth_token=e,t.openGame()}}function YouYiSDKLoginCallBackSwitchAccount(){var e=window.platform;e.reload()}function YouYiSDKPayStatusCallBackPaySuccessful(){}function YouYiSDKPayStatusCallBackPayFailed(){}function YouYiSDKPayStatusCallBackClosePay(){}function YouYiSDKExitCallBackExit(){}function YouYiSDKH5GameLog(){}function ManFangSDKH5GameLog(e){}function ManFangSDKSessionExpire(){}function ManFangSDKInitSDKCallbackInitFinishedSuccess(){document.location.href="ManFangSDK://login"}function ManFangSDKInitSDKCallbackInitFinishedFail(){}function ManFangSDKLoginSDKCallbackLoginSuccess(e){var t=window.platform,r=JSON.parse(e);t.pfParam.uid=r.uid,t.pfParam.token=r.token,t.openSelectServer()}function ManFangSDKLoginSDKCallbackLoginFailed(){var e=window.platform;e.openTipsWin("登錄失敗,請重新登錄",function(){e.reload()})}function ManFangSDKLoginSDKCallbackLoginCancel(){}function ManFangSDKPayPayCallbackOnPaySuccess(e,t,r,n){}function ManFangSDKPayPayCallbackOnPayFailed(e,t,r){}function ManFangSDKPayPayCallbackOnPayCancel(e,t){}var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n["throw"](e))}catch(t){a(t)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=a[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,a=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(n){r=[6,n],a=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},PlatFormBase=function(){function e(){this.pfId="",this.pfPHP="",this.domain="",this.isOpenIndulge=0,this.youkeLixianTime=0,this.isShare=!1,this.isFocus=!1}return e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.updateCurServer=function(e){},e.prototype.start=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.main=e,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(EntranceParam.urlParam.entryHosts+"icon/entry.res.json","/"),[2]})})},e.prototype.onConfigComplete=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),[4,this.init()];case 1:return e.sent(),this.openBgWin(),[2]}})})},e.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.openGonggaoWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.openServerListWin=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.openComTipsWin=function(e,t,r,n){return void 0===n&&(n=488),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.openSltsWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.closeSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.checkStartGame=function(){return!0},e.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,Http.get(e,1,t)]})})},e.prototype.getTabListUrl=function(){return""},e.prototype.getGonggaoUrl=function(){return""},e.prototype.getServerListUrl=function(e){return""},e.prototype.getRechargeStateUrl=function(){return""},e.prototype.getVerDataUrl=function(){var e=+EntranceParam.urlParam.default_v||"";return EntranceParam.urlParam.hosts+"ver"+e+("/"+EntranceParam.urlParam.v+"/"+EntranceParam.urlParam.v+".zip")},e.prototype.showLoadProgress=function(e,t){console.log("showLoadProgress")},e.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return console.log("showRecharge"),[2]})})},e.prototype.checkShowRecharge=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o;return __generator(this,function(a){switch(a.label){case 0:return t=this.getRechargeStateUrl(),t?[4,this.getHttp(t)]:[3,2];case 1:return r=a.sent(),n=JSON.parse(r),o=1==n[-1],o?(this.alert(LangEntry.str12.replace("$name$","")),[2,!1]):1===n[e.yb]?(this.alert(LangEntry.str12.replace("$name$",e.itemName)),[2,!1]):[2,!0];case 2:return[2,!0];case 3:return[2]}})})},e.prototype.showGame=function(){console.log("showGame")},e.prototype.createRole=function(e){console.log("createRole")},e.prototype.selectRole=function(e){console.log("selectRole")},e.prototype.enterGame=function(e){console.log("enterGame")},e.prototype.firstEnterGame=function(e){console.log("firstEnterGame")},e.prototype.roleUp=function(e){console.log("roleUp")},e.prototype.roleReName=function(e){console.log("roleChangeName")},e.prototype.powerUp=function(e){console.log("powerUp")},e.prototype.joinGuild=function(e){console.log("joinGuild")},e.prototype.taskChange=function(e,t){},e.prototype.sendService=function(e){console.log("sendService")},e.prototype.getVerifyStatusUrl=function(){return""},e.prototype.getIdCardVerifyUrl=function(e,t){return""},e.prototype.verifySuccess=function(){console.log("verifySuccess")},e.prototype.showVerify=function(e){console.log("showVerify")},e.prototype.getVerifyInfo=function(e,t){console.log("getVerifyInfo")},e.prototype.isCustomerBtn=function(e){console.log("isCustomerBtn")},e.prototype.showShare=function(){console.log("showShare:")},e.prototype.requestInviteInfo=function(){console.log("requestInviteInfo")},e.prototype.getSceneType=function(){console.log("getSceneType")},e.prototype.isOpenShare=function(e){console.log("isOpenShare:")},e.prototype.setShareCallback=function(e){console.log("setShareCallback:")},e.prototype.isOpenFocus=function(e){console.log("isOpenFocus:")},e.prototype.showQrCode=function(){console.log("showQrCode:")},e.prototype.checkChat=function(e){e.onSuccessCallback(e.chat_content)},e.prototype.checkLogout=function(){console.log("checkLogout:")},e.prototype.logout=function(e){console.log("logout:")},e.prototype.reload=function(){console.log("reload"),location&&location.reload()},e.prototype.isLiuhai=function(){return!1},e.prototype.isYuandi=function(){return!1},e.prototype.isShowHeibian=function(){return!1},e.prototype.getLiuhaiHeight=function(){return 50},e.prototype.getQuality=function(){return 1},e.prototype.getDestroyTime=function(){return 0},e.prototype.isShowLogo=function(){return void 0!=window.isShowLogo?!!window.isShowLogo:!0},e.prototype.isShowAge=function(){return void 0!=window.isShowAge?!!window.isShowAge:!1},e.prototype.isShowISBN=function(){return!0},e.prototype.getBgName=function(){return window.bgName||"bg.jpg"},e.prototype.getLogoName=function(){return window.logoName||"logo.png"},e.prototype.getAgeName=function(){return window.ageName||"age.png"},e.prototype.call=function(e,t,r){return window.funcName?window.funcName(e,r):void 0},e.prototype.getVirtualUrl=function(e){if(e.indexOf("/entrance/")>=0)return e;if(EntranceParam.hasVer()){var t=+EntranceParam.urlParam.default_v||"";if(EntranceParam.has(e)){var r=(EntranceParam.getDir(e),EntranceParam.getVer(e));e=EntranceParam.urlParam.hosts+"ver"+t+"/"+r+"/"+e}else e=EntranceParam.urlParam.hosts+"ver"+t+"/0/"+e}else e=""+EntranceParam.urlParam.hosts+e;return e},e.prototype.loadGroup=function(e){ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},e.prototype.loadTheme=function(e,t){var r=this;if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB||egret.Capabilities.runtimeType==egret.RuntimeType.RUNTIME2)window.loadSingleScript(this.getVirtualUrl(e),function(){var n=new eui.Theme(e,r.main.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},r)});else{var n=new eui.Theme(e,this.main.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},this)}},e.prototype.loadResConfig=function(e,t,r){ResUtil.ins().loadConfig(e,t,r,null)},e.prototype.isShowRecharge=function(){return!0},e.prototype.isShowTXSP=function(){return!1},e.prototype.isShowShoucang=function(){return!1},e.prototype.getISBN=function(){return window.ISBN||""},e.prototype.getYinsi=function(){return""},e.prototype.isShowYszcCheck=function(){return!1},e.prototype.getYszcCheckDec=function(){return""},e.prototype.getYinsiDec=function(){return""},e.prototype.getYhfwxyDec=function(){return""},e.prototype.relogin=function(){this.reload()},e.prototype.alert=function(e,t){console.log(e)},e.prototype.getPfPay=function(){return""},e.prototype.openLink=function(e){console.log("openLink:"+e)},e.prototype.isShowYqhl=function(){return!1},e.prototype.roleUpReportLevel=function(){return 10},e.prototype.getIsShenhe=function(){return!1},e.prototype.isShowZBJH=function(){return!1},e.prototype.isShowLCFL=function(){return!1},e.prototype.copyResult=function(e,t,r,n){if(document){var o=document.createElement("input");o.value=e,document.body.appendChild(o),o.select(),o.setSelectionRange(0,o.value.length),document.execCommand("Copy"),document.body.removeChild(o),t&&t(),n&&n()}else r&&r()},e.prototype.isShowFBCzfl=function(){return!1},e.prototype.isShowFBFsfl=function(){return!1},e.prototype.backPressed=function(){console.log("backPressed")},e.prototype.reportAdjust=function(e,t){console.log("reportAdjust")},e.prototype.reportAppFlyer=function(e,t){console.log("reportAppFlyer")},e.prototype.guanQiaUp=function(e){console.log("guanqiaUp")},e.prototype.sVipExpChang=function(e){console.log("sVipExpChang")},e.prototype.dingHao=function(e){console.log("dingHao")},e.prototype.isShowMrzgSvipWin=function(){return!0},e.prototype.isActColorLabel=function(){return!1},e.prototype.serverDaDain=function(e,t){console.log("serverDaDain:"+e)},e.prototype.open5Star=function(){console.log("open5Star")},e.prototype.isShow5Star=function(){return console.log("isShow5Star"),!1},e.prototype.setProducts=function(e){console.log("setProducts")},e.prototype.infoProducts=function(e){console.log("infoProducts")},e.prototype.getProduct=function(e){return console.log("getProducts"),""},e.prototype.isShowFaceBook=function(){return console.log("isShowFaceBook"),!1},e.prototype.openFaceBookLink=function(){console.log("open facebook link")},e.prototype.isShowCdkey=function(){return console.log("isShowCdkey"),!0},e.prototype.isShowPayItem=function(e){return console.log("isShowPayItem"),!0},e.prototype.yingwenAdsInfo=function(e){console.log("yingwenAdsInfo")},e.prototype.yingwenAdsPlay=function(e){console.log("yingwenAdsPlay")},e.prototype.isShowGzh=function(){return!1},e.prototype.openTaiwanGzh=function(e){console.log("openTaiwanGzh")},e.prototype.isShowCjhy=function(){return!1},e.prototype.getCjhyKfLine=function(){return""},e.prototype.getCjhyKfWechat=function(){return""},e.prototype.getCjhyDayNum=function(){return Number.MAX_VALUE},e.prototype.getCjhyAllNum=function(){return Number.MAX_VALUE},e.prototype.canCreateShortcut=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!1]})})},e.prototype.createShortcut=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!1]})})},e.prototype.closeShenHeSys=function(){return!1},e.prototype.getXyxSkin=function(){return 0},e.prototype.isShowXyx=function(){return!1},e.prototype.isEnterXyx=function(){return!0},e.prototype.isShowXyxCloseBtn=function(){return!0},e.prototype.isPassVIP=function(){return!1},e.prototype.openPassVIP=function(){console.log("openPassVIP")},e.prototype.isShowPass=function(){return!1},e.prototype.isShowServerList=function(){return!0},e.prototype.isPass2VIP=function(){return!1},e.prototype.openPass2VIP=function(){console.log("openPassVIP")},e.prototype.isShowPass2=function(){return!1},e}();__reflect(PlatFormBase.prototype,"PlatFormBase",["Platform"]),window.PlatFormBase=PlatFormBase;var PlatFormParam=function(){function e(){this.openId="",this.mineKey={},this.isUseEmptyValue=!1,this.init()}return e.prototype.init=function(){this.keys=["openId"]},e.prototype.addMineKey=function(e,t){this.mineKey[e]=t},e.prototype.getKey=function(e){return this.mineKey[e]||e},e.prototype.setValueByUrl=function(e){var t=e.split("?");this.url=t[0];var r=t[1];if(r)for(var n=r.split("&"),o=0;o<n.length;o++){var a=n[o].indexOf("="),i=n[o].slice(0,a),s=n[o].slice(a+1,n[o].length);this[i]=s}else console.log("url:"+e+"没有带参数")},e.prototype.toParamString=function(){for(var e="",t=0,r=this.keys;t<r.length;t++){var n=r[t],o=this.getKey(n),a=this[n];this.isUseEmptyValue?e+="&"+o+"="+a:a&&(e+="&"+o+"="+a)}return e.length&&"&"==e[0]&&(e=e.slice(1,e.length)),e},e.prototype.toJson=function(){for(var e={},t=0,r=this.keys;t<r.length;t++){var n=r[t];e[n]=this[n]}return e},e}();__reflect(PlatFormParam.prototype,"PlatFormParam"),window.PlatFormParam=PlatFormParam;var PlatFormWW=function(e){function t(){var t=e.call(this)||this;return t.domain=window.domain,t.isShenhe=!1,t.privacy_status=0,t.sltsJson={sltsDec:""},t.yszcJson={yszcTitle:"",yszcCheck:"",yszcDec:"",yhfwxyDec:""},t.funs=[t.openYinsiWin.bind(t),t.openVerifyWin.bind(t),t.openSelectServer.bind(t)],t.indexFun=0,t.pfParam=new PlatFormParam,t.serverListData=new ServerListData,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.initWin(),this.initYszcData(),[2]})})},t.prototype.initWin=function(){this.serverBgWin=new ServerBgWin,this.serverWin=new ServerWin,this.loadingWin=new ServerLoadingWin,this.serverVerifyWin=new ServerVerifyWin,this.serverYinsiWin=new ServerYinsiWin,this.serverComTipsWin=new ServerComTipsWin,this.serverGgonggaoWin=new ServerGonggaoWin,this.serverListWin=new ServerListWin,this.serverTipsWin=new ServerTipsWin},t.prototype.initYszcData=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return window.yszcFile?[4,this.getHttp(ResEntrance.getResSource(""+window.yszcFile))]:[3,2];case 1:e=r.sent(),this.yszcJson=JSON.parse(e),r.label=2;case 2:return window.sltsFile?[4,this.getHttp(ResEntrance.getResSource(""+window.sltsFile))]:[3,4];case 3:t=r.sent(),this.sltsJson=JSON.parse(t),r.label=4;case 4:return[2]}})})},t.prototype.openServerWin=function(){this.main.layerWin.addChildAt(this.serverWin,0),this.serverWin.open(this.serverListData,this.callback,this)},t.prototype.openGonggaoWin=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return window.platform.closeShenHeSys()?[3,3]:(this.main.layerWin.addChild(this.serverGgonggaoWin),this.serverGgonggaoWin.open(""),e=window.platform.getGonggaoUrl(),t=LangEntry.str10,e&&""!=e?[4,window.platform.getHttp(e)]:[3,2]);case 1:for(r=i.sent(),n=JSON.parse(r),o=n.notice,o&&""!=o&&(t=decodeURIComponent(o)),a=0;t.indexOf("\\n")>-1&&100>a;)t=t.replace("\\n","\n"),a++;i.label=2;case 2:this.serverGgonggaoWin.open(t),i.label=3;case 3:return[2]}})})},t.prototype.openSltsWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return""!=this.sltsJson.sltsDec&&(this.main.layerWin.addChild(this.serverGgonggaoWin),this.serverGgonggaoWin.open(this.sltsJson.sltsDec)),[2]})})},t.prototype.openServerListWin=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.main.layerWin.addChild(this.serverListWin),this.serverListWin.open(e),[2]})})},t.prototype.openTipsWin=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return this.main.layerWinTop.addChild(this.serverTipsWin),this.serverTipsWin.open(e,t,r),[2]})})},t.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.main.layerWinBg.addChildAt(this.serverBgWin,0),this.serverBgWin.open(),[2]})})},t.prototype.openComTipsWin=function(e,t,r,n){return void 0===n&&(n=488),__awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return this.main.layerWin.addChild(this.serverComTipsWin),this.serverComTipsWin.open(e,t,r,n),[2]})})},t.prototype.openLoadingWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.main.layerWin.addChild(this.loadingWin),this.loadingWin.open(),[2]})})},t.prototype.openGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.indexFun<this.funs.length&&(console.log("openGame函数执行:"+this.indexFun),this.funs[this.indexFun++](this.openGame.bind(this))),[2]})})},t.prototype.openYinsiWin=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i,s=this;return __generator(this,function(c){switch(c.label){case 0:return window.yszcFile?(t=this.getYinsiUrl(),o=(n=JSON).parse,[4,this.getHttp(t)]):(console.log("跳过 openYinsiWin"),e(),[2]);case 1:return r=o.apply(n,[c.sent()]),this.privacy_status=r.privacy_status,1!=this.privacy_status||0==window.isShowYszcPopup?[3,3]:[4,this.getTabListUrlData()];case 2:return a=c.sent(),i=egret.localStorage.getItem("yinsi_"+a.openId),"1"==i?e():(this.main.layerWin.addChild(this.serverYinsiWin),this.serverYinsiWin.open(window.platform.getYinsi(),function(){egret.localStorage.setItem("yinsi_"+a.openId,"1"),1!=+window.isYszc2Check&&egret.localStorage.setItem("yinsi2_"+a.openId,"1"),e()},function(){s.reload()})),[3,4];case 3:e(),c.label=4;case 4:return[2]}})})},t.prototype.openLink=function(e){return __awaiter(this,void 0,void 0,function(){var t,t;return __generator(this,function(r){return console.log("openLink:"+e),"yszcDec"==e&&(t=this.getYinsiDec(),this.openComTipsWin(t,"yszc.png",0,736)),"yhfwxyDec"==e&&(t=this.getYhfwxyDec(),this.openComTipsWin(t,"yhfwxy.png",0,736)),[2]})})},t.prototype.openVerifyWin=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i,s,c,l;return __generator(this,function(u){switch(u.label){case 0:return window.isShiming?(t=this.getVerifyStatusUrl(),o=(n=JSON).parse,[4,this.getHttp(t)]):(console.log("跳过 openVerifyWin"),e(),[2]);case 1:if(r=o.apply(n,[u.sent()]),a=r.status,i=r.isTourists||!1,this.isOpenIndulge=i?2:0,s=r.ts||0,c=r.msg,1==a){if(i)if(l=+egret.localStorage.getItem("youkeTime_"+this.pfId),0==l)egret.localStorage.setItem("youkeTime_"+this.pfId,""+s);else if(this.youkeLixianTime=Math.max(3600-Math.max(s-l,0),0),0==this.youkeLixianTime)return this.main.addChild(this.serverVerifyWin),this.serverVerifyWin.open(e,this),[2];e()}else this.main.addChild(this.serverVerifyWin),this.serverVerifyWin.open(e,this);return[2]}})})},t.prototype.getTabListUrlData=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return this.tabListUrlData?[3,2]:(e=this.getTabListUrl(),console.log("getTabListUrlData",e),[4,this.getHttp(e)]);case 1:t=r.sent(),console.log("getTabListUrlData-json",t),this.tabListUrlData=JSON.parse(t),r.label=2;case 2:return[2,this.tabListUrlData]}})})},t.prototype.openSelectServer=function(e){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.getTabListUrlData()];case 1:return e=t.sent(),console.log(e),200==e.code?(EntranceParam.setKeyValue("openId",e.openId),this.pfParam.openId=e.openId,this.getOpenIdSuc(),this.serverListData.setDataByObject(e),"1"==this.serverListData.isnew&&this.serverListData.defaultserver.canEnter&&!window.isNewServer?this.callback(this.serverListData.defaultserver):(this.openServerWin(),(void 0==window.gonggao||1==window.gonggao)&&this.openGonggaoWin())):this.openTipsWin(e.msg+":"+this.getTabListUrl()),[2]}})})},t.prototype.getOpenIdSuc=function(){},t.prototype.callback=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i,s,c,l=this;return __generator(this,function(u){switch(u.label){case 0:return t=this.getLoginfoUrl(e.server_id),[4,this.getHttp(t)];case 1:return r=u.sent(),r=r.trim(),r=r.replace(/[\\]/g,""),n=JSON.parse(r),o=n.code,"-1"==o?(a=n.msg,this.alert(a||LangEntry.str13),this.serverWin.parent||this.openServerWin(),this.serverWin.setClickEnable(!0),[2]):(i=EntranceParam.urlParam.v,[4,this.setLoginParam(n)]);case 2:return u.sent(),this.closeSelectServer(),this.openLoadingWin(),egret.getDefinitionByName("GameMain")?(this.loginGame(),[2]):window.IGameMain?(EntranceParam.urlParam.v===i?window.IGameMain.relogin():window.platform.alert(LangEntry.str11),[2]):(s="main.min.js",c=this.getVirtualUrl(s),window.loadSingleScript(c,function(){l.loginGame()}),[2])}})})},t.prototype.setLoginParam=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:for(this.setV(e.v),EntranceParam.setKeyValue("isnew",e.isnew),EntranceParam.setKeyValue("openKey",e.openKey),EntranceParam.setKeyValue("nickName",e.nickName),EntranceParam.setKeyValue("serverName",e.serverName),EntranceParam.setKeyValue("default_v",e.default_v),t=e.flashUrl,r=t.split("?")[1],n=r.split("&"),o={},a=0;a<n.length;a++)i=n[a].split("="),s=i[0],c=i[1],o[s]=c;return EntranceParam.setKeyValue("isBan",o.isBan),EntranceParam.setKeyValue("srvid",o.srvid),EntranceParam.setKeyValue("serverid",o.serverid),EntranceParam.setKeyValue("srvaddr",o.srvaddr),EntranceParam.setKeyValue("srvport",o.srvport),EntranceParam.setKeyValue("roleCount",o.roleCount),EntranceParam.setKeyValue("login_ip",o.login_ip),EntranceParam.setKeyValue("loadurl",o.loadurl),EntranceParam.setKeyValue("user",o.user),EntranceParam.setKeyValue("spverify",o.spverify),EntranceParam.setKeyValue("pf",o.pf),EntranceParam.setKeyValue("pfid",o.pfid),EntranceParam.setKeyValue("appid",o.appid),EntranceParam.setKeyValue("nickname",o.nickname),[4,this.setVerData()];case 1:return l.sent(),[2]}})})},t.prototype.setV=function(e){this.isShenhe?EntranceParam.setKeyValue("v",Math.max(+window.v||0,+e).toString()):EntranceParam.setKeyValue("v",e)},t.prototype.setDefault_v=function(e){this.isShenhe?EntranceParam.setKeyValue("default_v",Math.max(+window.default_v||0,+e).toString()):EntranceParam.setKeyValue("default_v",e)},t.prototype.setVerData=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerDataUrl(),[4,this.getHttp(e,egret.HttpResponseType.ARRAY_BUFFER)];case 1:return t=o.sent(),r=new JSZip(t),n=r.file(EntranceParam.urlParam.v+".json"),EntranceParam.verData=JSON.parse(n.asText()),[2]}})})},t.prototype.loginGame=function(){var e=egret.getDefinitionByName("GameMain");e?(window.IGameMain=new e,window.IGameMain.login()):this.alert("GameMain不存在")},t.prototype.closeSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.serverWin.close(),[2]})})},t.prototype.updateCurServer=function(e){this.serverWin.updateCurServer(e)},t.prototype.getYinsiUrl=function(){return""+this.domain+this.pfPHP+"/api/privacyStatus?"+this.pfParam.toParamString()},t.prototype.getVerifyStatusUrl=function(){return""+this.domain+this.pfPHP+"/api/idVerifyStatus?"+this.pfParam.toParamString()},t.prototype.getIdCardVerifyUrl=function(e,t){return""+this.domain+this.pfPHP+"/api/getIdCardVerify?"+this.pfParam.toParamString()+"&name="+e+"&idcard="+t},t.prototype.getVerUrl=function(){var e=this.pfParam.toParamString();return""+this.domain+this.pfPHP+"/api/clientVersion"+(e?"?"+e:"")},t.prototype.getTabListUrl=function(){var e;return e=this.isShenhe?""+this.domain+this.pfPHP+"/login/wxserverlabel?"+this.pfParam.toParamString():""+this.domain+this.pfPHP+"/login/serverlabel?"+this.pfParam.toParamString()},t.prototype.getServerListUrl=function(e){var t;return t=this.isShenhe?""+this.domain+this.pfPHP+"/login/wxgetserverlist?"+this.pfParam.toParamString()+"&"+e.toParamString():""+this.domain+this.pfPHP+"/login/getserverlist?"+this.pfParam.toParamString()+"&"+e.toParamString()},t.prototype.getLoginfoUrl=function(e){return""+this.domain+this.pfPHP+"/login/getlogininfo?"+this.pfParam.toParamString()+"&serverId="+e},t.prototype.getGonggaoUrl=function(){return""+this.domain+this.pfPHP+"/api/notice?"+this.pfParam.toParamString()},t.prototype.getRechargeStateUrl=function(){return""+this.domain+this.pfPHP+"/api/ybStatus?"+this.pfParam.toParamString()+"&serverId="+EntranceParam.urlParam.srvid},t.prototype.getCreatOrderUrl=function(e){return""+this.domain+this.pfPHP+"/payment/createorder?"+e.toParamString()},t.prototype.getOrderSignUrl=function(e){return""+this.domain+this.pfPHP+"/payment/gamesign?"+e.toParamString()},t.prototype.showLoadProgress=function(e,t){e>>=0,console.log(""+t+e+"%"),this.loadingWin&&this.loadingWin.showLoadProgress(e,t)
},t.prototype.getYinsi=function(){return this.yszcJson.yszcTitle||""},t.prototype.isShowYszcCheck=function(){return 1==this.privacy_status&&""!=this.getYszcCheckDec()},t.prototype.getYszcCheckDec=function(){return this.yszcJson.yszcCheck||""},t.prototype.getYinsiDec=function(){return this.yszcJson.yszcDec||""},t.prototype.getYhfwxyDec=function(){return this.yszcJson.yhfwxyDec||""},t.prototype.getIsShenhe=function(){return this.isShenhe},t.prototype.showGame=function(){console.log("showGame"),this.serverBgWin&&(this.serverBgWin.close(),this.serverBgWin=null),this.serverWin&&(this.serverWin.close(),this.serverWin=null),this.serverVerifyWin&&(this.serverVerifyWin.close(),this.serverVerifyWin=null),this.serverYinsiWin&&(this.serverYinsiWin.close(),this.serverYinsiWin=null),this.serverComTipsWin&&(this.serverComTipsWin.close(),this.serverComTipsWin=null),this.serverGgonggaoWin&&(this.serverGgonggaoWin.close(),this.serverGgonggaoWin=null),this.serverListWin&&(this.serverListWin.close(),this.serverListWin=null),this.loadingWin&&(this.loadingWin.close(),this.loadingWin=null),this.serverTipsWin&&(this.serverTipsWin.close(),this.serverTipsWin=null)},t.prototype.alert=function(e,t){this.serverTipsWin?this.openTipsWin(e):window.IGameMain?window.IGameMain.alert(e,t):console.log(e)},t.prototype.getSettingValue=function(e,t){return window[e]},t.prototype.hasXyx=function(){return this.getXyxSkin()>0},t.prototype.getXyxSkin=function(){return+this.getSettingValue("xyxSkin",window.xyxSkin)},t.prototype.isShowXyx=function(){return this.hasXyx()?this.isShenhe?1==this.getSettingValue("isShenheXyx",window.isShenheXyx):1==this.getSettingValue("isZhenShiShowXyx",window.isZhenShiShowXyx):!1},t.prototype.isEnterXyx=function(){if(!this.hasXyx())return!1;var e="1"==EntranceParam.urlParam.isnew;return this.isShenhe?e?1==this.getSettingValue("isShenHeNewEnterXyx",window.isShenHeNewEnterXyx):1==this.getSettingValue("isShenHeOldEnterXyx",window.isShenHeOldEnterXyx):e?1==this.getSettingValue("isZhenShiNewEnterXyx",window.isZhenShiNewEnterXyx):1==this.getSettingValue("isZhenShiOldEnterXyx",window.isZhenShiOldEnterXyx)},t.prototype.isShowXyxCloseBtn=function(){return egret.getTimer()>=this.getXyxTime()},t.prototype.getXyxTime=function(){return this.isShenhe?+this.getSettingValue("xyxShenHeTime",window.xyxShenHeTime):+this.getSettingValue("xyxZhenShiTime",window.xyxZhenShiTime)},t.prototype.isShowPass=function(){return 1==window.isShowPassVIP},t.prototype.isShowServerList=function(){return!0},t.prototype.isShowPass2=function(){return 1==window.isShowPass2VIP},t}(PlatFormBase);__reflect(PlatFormWW.prototype,"PlatFormWW"),window.PlatFormWW=PlatFormWW;var PlatFormTWBase=function(e){function t(){var t=e.call(this)||this;return t.gamecode="GUGZ",t.domain="https://gugz-login.gamedreamer.com/",t.pfParam=new TWLoginParam,t}return __extends(t,e),t.prototype.getLoginfoUrl=function(e){var t=""+this.domain+this.pfPHP+"/login/getlogininfo?"+this.pfParam.toParamString()+"&serverId="+e;return t},t.prototype.getTabListUrl=function(){return""+this.domain+this.pfPHP+"/login/getserverlist?"+this.pfParam.toParamString()},t.prototype.getGonggaoUrl=function(){return""+this.domain+this.pfPHP+"/api/notice"},t}(PlatFormWW);__reflect(PlatFormTWBase.prototype,"PlatFormTWBase");var TWLoginParam=function(e){function t(){var t=e.call(this)||this;return t.appid="0",t}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","appid"]},t}(PlatFormParam);__reflect(TWLoginParam.prototype,"TWLoginParam");var UserInfo=function(){function e(){}return e}();__reflect(UserInfo.prototype,"UserInfo"),window.PlatFormTWBase=PlatFormTWBase;var BaseWinEntry=function(e){function t(){var t=e.call(this)||this;return t.shapeAlpha=.5,t.event=[],t.initUI(),t}return __extends(t,e),t.prototype.initUI=function(){this.group=new eui.Group,this.group.width=720,this.group.height=1280,this.group.horizontalCenter=0,this.addChild(this.group)},t.prototype.addBg=function(e){void 0===e&&(e=.5),this.shapeBg||(this.shapeAlpha=e,this.shapeBg=new egret.Shape,this.shapeBg.graphics.beginFill(0,e),this.shapeBg.graphics.drawRect(0,0,egret.MainContext.instance.stage.stageWidth,egret.MainContext.instance.stage.stageHeight),this.shapeBg.graphics.endFill(),this.addChildAt(this.shapeBg,0))},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onStageResize(),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)},t.prototype.close=function(){this.removeEs(),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this),this.parent&&this.parent.removeChild(this)},t.prototype.onStageResize=function(){this.shapeBg&&(this.shapeBg.graphics.clear(),this.removeChild(this.shapeBg),this.shapeBg=null,this.addBg(this.shapeAlpha))},t.prototype.addClickE=function(e,t){this.addEvent(egret.TouchEvent.TOUCH_TAP,e,t)},t.prototype.addClickEndE=function(e,t){this.addEvent(egret.TouchEvent.TOUCH_END,e,t)},t.prototype.addClickBeginE=function(e,t){this.addEvent(egret.TouchEvent.TOUCH_BEGIN,e,t)},t.prototype.addChangeE=function(e,t){this.addEvent(egret.TouchEvent.CHANGE,e,t)},t.prototype.addChangingE=function(e,t){this.addEvent(egret.TouchEvent.CHANGING,e,t)},t.prototype.addItemTapE=function(e,t){this.addEvent(eui.ItemTapEvent.ITEM_TAP,e,t)},t.prototype.addLinkE=function(e,t){this.addEvent(egret.TextEvent.LINK,e,t)},t.prototype.addEvent=function(e,t,r){if(!t)return void console.log(egret.getQualifiedClassName(this)+"不存在绑定的显示对象，BaseView.addEvent");for(var n=!1,o=0,a=this.event;o<a.length;o++){var i=a[o];if(e==i[0]&&t==i[2]&&r==i[1]){n=!0;break}}n||(t.addEventListener(e,r,this),this.event.push([e,r,t]))},t.prototype.removeClickE=function(e,t){for(var r=0;r<this.event.length;r++){var n=this.event[r];if(e==n[2]&&n[0]==egret.TouchEvent.TOUCH_TAP&&n[1]==t)return e.removeEventListener(n[0],t,this),void this.event.splice(r,1)}},t.prototype.removeEs=function(){for(var e=0,t=this.event;e<t.length;e++){var r=t[e];r[2].removeEventListener(r[0],r[1],this),r[2].hasEventListener(r[0]),!1}this.event.length=0},t.prototype.createEuiImage=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var o=new eui.Image;return o.x=r,o.y=n,o.source=t,e.addChild(o),o},t.prototype.createEuiLabelText=function(e,t,r,n,o){void 0===r&&(r=0),void 0===n&&(n=0);var a=new eui.Label;return a.x=r,a.y=n,a.textFlow=this.addColorTF(t),a.size=o,a.fontFamily="Times",e&&e.addChild(a),a},t.prototype.createEuiTextInput=function(e,t,r,n,o){void 0===t&&(t=0),void 0===r&&(r=0);var a=new eui.EditableText;return a.x=t,a.y=r,a.width=n,a.height=o,e.addChild(a),a},t.prototype.addColorTF=function(e,t,r){return void 0===r&&(r=!1),r&&(e=this.addUnderLine(e.toString())),t?(new egret.HtmlTextParser).parser(this.addColor(e.toString(),t)):(new egret.HtmlTextParser).parser(e.toString())},t.prototype.addColor=function(e,t){var r;return"string"==typeof t?r=String(t):"number"==typeof t&&(r=Number(t).toString(10)),'<font color="'+r+'">'+e+"</font>"},t.prototype.addUnderLine=function(e){return"<u>"+e+"</u>"},t}(eui.UILayer);__reflect(BaseWinEntry.prototype,"BaseWinEntry"),window.BaseWinEntry=BaseWinEntry;var PlatFormBaseXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.getDestroyTime=function(){return 90},t}(PlatFormWW);__reflect(PlatFormBaseXYX.prototype,"PlatFormBaseXYX"),window.PlatFormBaseXYX=PlatFormBaseXYX;var ZSMK2RechargeParams=function(){function e(){}return e}();__reflect(ZSMK2RechargeParams.prototype,"ZSMK2RechargeParams");var ZSMK2ReportParam=function(){function e(){}return e}();__reflect(ZSMK2ReportParam.prototype,"ZSMK2ReportParam");var ZSMK2LoginData=function(){function e(){}return e}();__reflect(ZSMK2LoginData.prototype,"ZSMK2LoginData");var ShareInfoMK2=function(){function e(){}return e}();__reflect(ShareInfoMK2.prototype,"ShareInfoMK2");var VerifyRes=function(){function e(){this.isOpenVerify=0,this.status=0,this.isOpenIndulge=0,this.channelVerifyData=new ChannelVerifyData}return e}();__reflect(VerifyRes.prototype,"VerifyRes");var ChannelVerifyData=function(){function e(){}return e}();__reflect(ChannelVerifyData.prototype,"ChannelVerifyData");var ZSMK2LoginParams=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","passId","pfParam"],this.addMineKey("passId","appid")},t.prototype.setValueByUrl=function(t){e.prototype.setValueByUrl.call(this,t),this.pfParam=this.passId},t}(PlatFormParam);__reflect(ZSMK2LoginParams.prototype,"ZSMK2LoginParams");var ChatParamMK2=function(){function e(){}return e}();__reflect(ChatParamMK2.prototype,"ChatParamMK2",["IChatParam"]);var PlatFormZSMK2=function(e){function t(){var t=e.call(this)||this;return t.domain="https://loginpayzy.h5eco.com/",t.yinsizhengceURL="mk_yszc.txt",t.pfParam=new ZSMK2LoginParams,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),window.loadSingleScript("https://passcdn.mengkegame.cn/pass4/js/jssdk/h5sdk.js?v="+Math.random(),function(){}),t=this,window.__sdkready=function(){var e=this.pfParam,r=new ShareInfoMK2;r={title:"卓越传说",imgUrl:ResEntrance.getResSource("shareicon.png"),desc:"闯关就得vip，百万钻石送不停。",openId:e.openId,status:EntranceParam.urlParam.srvid};var n=t.getH5gamecn();n._init({getServerCallBack:function(e,t,r,n){0==e?console.log("loginCallBack选区"):1==e?console.log("loginCallBack直接进入游戏"):2==e&&console.log("loginCallBack维护")},enterCallBack:function(e,t){1==e?console.log("enterCallBack 直接进入游戏"):2==e&&console.log("enterCallBack 维护")},shareInfo:r,popWindow:function(e){console.log("弹出提示："+e.msg)},shareIconCallBack:function(e){console.log("shareIconCallBack",e),e.backicon},version:10}),e.passId&&EntranceParam.setKeyValue("appid",e.passId),t.openGame()}.bind(this),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return 2==this.isOpenIndulge?(this.alert(LangEntry.str27,0),[2]):[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(e?(n=t.actorId+"_"+new Date(t.serverTime).valueOf(),o=new ZSMK2RechargeParams,o.money=e.amount.toString(),o.gameOrderId=n,o.openId=EntranceParam.urlParam.openId,o.roleId=t.actorId,o.roleName=t.actorName,o.roleLevel=t.actorLevel,o.serverId=EntranceParam.urlParam.srvid,o.serverName=EntranceParam.urlParam.serverName,o.goodsName=e.itemName,o.goodsDesc=e.desc,o.goodsId=e.yb,o.ext=t.actorId+"|"+e.yb,this.getH5gamecn().pay(e.amount,o)):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.createRole=function(e){this.reportSDK("","create_role",e)},t.prototype.enterGame=function(e){this.reportSDK("","login",e)},t.prototype.roleUp=function(e){this.reportSDK("","levelup",e)},t.prototype.powerUp=function(e){this.reportSDK("","power",e)},t.prototype.getVerifyInfo=function(e,t){var r=this;this.getH5gamecn().getVerifyInfo(function(n){if(console.log("防沉迷数据:"+n),r.isOpenIndulge=n.isOpenIndulge,e(n.isOpenVerify?n.status:-1),n.isOpenIndulge){var o=n.channelVerifyData,a=""+r.domain+r.pfPHP+"/login/getFcmInfo?"+r.pfParam.toParamString()+"\n						&birthday="+o.birthday+"\n						&holiday_limit_minutes="+o.holiday_limit_minutes+"\n						&visiter_limit_day="+o.visiter_limit_day+"\n						&limit_age="+o.limit_age+"\n						&limit_login_time_end="+o.limit_login_time_end+"\n						&is_verify="+o.is_verify+"\n						&visiter_limit_minutes="+o.visiter_limit_minutes+"\n						&limit_login_time_start="+o.limit_login_time_start+"\n						&work_day_limit_minutes="+o.work_day_limit_minutes+"\n						&card_no="+o.card_no+"\n						&is_anti_indulge="+o.is_anti_indulge+"\n						&is_visiter="+o.is_visiter+"\n						&age="+o.age;console.log("防沉迷url:"+a);var i=new HttpRequester,s=function(e){var r=JSON.parse(e.target.response);r.isOpenIndulge=n.isOpenIndulge,t(r)};i.open(a,egret.HttpMethod.GET,s,s),i.send()}else console.log("防沉迷未开启")})},t.prototype.showVerify=function(e){this.getH5gamecn().showVerify(e)},t.prototype.isCustomerBtn=function(e){this.getH5gamecn().isCustomerBtn(function(t){e(t.show)})},t.prototype.showShare=function(){var e={title:"",imgUrl:"",query:""};this.getH5gamecn().showShare(e)},t.prototype.isOpenShare=function(e){this.getH5gamecn().isOpenShare(e)},t.prototype.setShareCallback=function(e){this.getH5gamecn().setShareCallback(e)},t.prototype.showQrCode=function(){this.getH5gamecn().showQrCode()},t.prototype.isOpenFocus=function(e){var t={appId:EntranceParam.urlParam.appid,openId:EntranceParam.urlParam.openId,openKey:EntranceParam.urlParam.openKey};this.getH5gamecn().getFocusState(t,e)},t.prototype.checkChat=function(e){try{var t=this.copyKey(e,ChatParamMK2);this.getH5gamecn().checkChat(t,function(t){var r="";"success"==t.result?e.onSuccessCallback(t.content):"fail"==t.result?r="网络异常":"verify_fail"==t.result?(-1==t.code?r="您输入的文字中有敏感词汇,请重新编辑！！！":-2==t.code?r="您已被禁言!":-3==t.code&&(r="平台错误码-3"),e.onFailCallback(r)):"self"==t.result?console.log("checkChat返回类型:self"):console.log("checkChat返回类型错误:"+t.result)})}catch(r){e.onSuccessCallback(e.chat_content),console.log("checkChat错误:"+r)}},t.prototype.sendService=function(e){var t=""+this.domain+this.pfPHP+"/api?m=player&fn=sendHttp&game="+EntranceParam.urlParam.srvid+"&userId="+e.actorId+"&userName="+EntranceParam.urlParam.openId+"&userNameCn="+e.actorName+"&userLevel="+e.actorLevel+"&vipLevel="+(e.vipLevel+e.svipLevel)+"&content="+e.content+"&appId="+this.pfPHP+"&passId="+this.pfParam.passId,r=new HttpRequester,n=function(t){var r=t.target.response;1===r||"1"===r?e.onSuccessCallback():e.onFailCallback()};r.open(t,egret.HttpMethod.GET,n,n),r.send()},t.prototype.logout=function(e){this.reportSDK("","logout",e),this.getH5gamecn().logout()},t.prototype.reportSDK=function(e,t,r){var n=this.getReportParam(e,t,r);this.getH5gamecn().reportData(n)},t.prototype.getReportParam=function(e,t,r){var n=new ZSMK2ReportParam;return n.action=t,n.app_openid=e,n.server=EntranceParam.urlParam.srvid,n.serverName=EntranceParam.urlParam.serverName,n.openId=EntranceParam.urlParam.openId,n.nickName=EntranceParam.urlParam.nickName,n.roleId=r.actorId,n.roleName=r.actorName,n.level=r.actorLevel,n.power=r.power,n.vip=r.vipLevel+r.svipLevel,n.partyName=r.guildName,n.balance=r.yb,n.relifeLevel=r.zsName,n.createRoleTime=r.createRoleTime,n},t.prototype.reportPaySDK=function(e,t,r,n){var o=this.getReportParam(e,t,r);o.money=n.amount,o.productId=n.yb,this.getH5gamecn().reportData(o)},t.prototype.getH5gamecn=function(){return window.h5gamecn},t.prototype.copyKey=function(e,t){var r=new t;for(var n in e){var o=e[n];if("function"!=typeof o){var a=n;r[a]=o}}return r},t.prototype.isLiuhai=function(){return EntranceParam.urlParam.appid==QdId.xianlai},t.prototype.isShowLogo=function(){return EntranceParam.urlParam.appid!=QdId.qd20072},t.prototype.isShowAge=function(){return void 0!=window.isShowAge?!!window.isShowAge:!0},t.prototype.isShowISBN=function(){return EntranceParam.urlParam.appid!=QdId.qd20072},t.prototype.getQuality=function(){var e=1;return e=this.IsWexinLLQ()&&this.isIos()?0:1},t.prototype.IsWexinLLQ=function(){var e=navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)?!0:!1},t.prototype.isIos=function(){var e=navigator.userAgent;return e.match(/iPad/)||e.match(/iPhone/)||e.match(/iPod/)?!0:!1},t.prototype.getISBN=function(){return window.ISBN||LangEntry.str4},t.prototype.reload=function(){if(this.getH5gamecn().invokeSystem){var t={action:"quitApp"};this.getH5gamecn().invokeSystem(t)}else e.prototype.reload.call(this)},t.prototype.dingHao=function(e){if(this.getH5gamecn().invokeSystem){var t={action:"userConflict",isAlert:"no"};this.getH5gamecn().invokeSystem(t)}},t}(PlatFormWW);__reflect(PlatFormZSMK2.prototype,"PlatFormZSMK2"),window.PlatFormZSMK2=PlatFormZSMK2;var PlatFormYXYMF=function(e){function t(){var t=e.call(this)||this;return t.domain="https://login.haha33.cn/",t}return __extends(t,e),t.prototype.isShowLogo=function(){return!1},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.getQuality=function(){return 1},t.prototype.getDestroyTime=function(){return 90},t.prototype.getISBN=function(){return window.ISBN||""},t.prototype.isShowHeibian=function(){return!1},t}(PlatFormWW);__reflect(PlatFormYXYMF.prototype,"PlatFormYXYMF"),window.PlatFormYXYMF=PlatFormYXYMF;var PlatFormTWAndroid=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.pfParam.appid="1",this.sdkLogin(),[2]})})},t.prototype.sdkLogin=function(){document.location.href="gdsdk://gamedreamerLogin"},t.prototype.loginGame=function(){document.location.href="gdsdk://gamedreamerCheckServer?serverCode="+EntranceParam.urlParam.srvid,window.IGameMain.isLogoutCallback(!0),e.prototype.loginGame.call(this)},t.prototype.createRole=function(e){document.location.href="gdsdk://gamedreamerNewRoleName?roleId="+e.actorId+"&roleName="+e.actorName},t.prototype.selectRole=function(e){document.location.href="gdsdk://gamedreamerSaveRoleName?roleId="+e.actorId+"&roleName="+e.actorName+"&level="+e.actorLevel},t.prototype.enterGame=function(e){document.location.href="gdsdk://gamedreamerNewRoleName?roleId="+e.actorId+"&roleName="+e.actorName,document.location.href="gdsdk://gamedreamerStartGameForEventRecorded"},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return t=r.sent(),t&&(document.location.href="gdsdk://gamedreamerSinglePay?proItemid=I"+e.shangpinId),[2]}})})},t.prototype.sendService=function(e){document.location.href="gdsdk://gamedreamerCs?serverCode="+EntranceParam.urlParam.srvid},t.prototype.logout=function(){document.location.href="gdsdk://gamedreamerMemberCenter"},t}(PlatFormTWBase);__reflect(PlatFormTWAndroid.prototype,"PlatFormTWAndroid");var UserInfoAZ=function(){function e(){}return e}();__reflect(UserInfoAZ.prototype,"UserInfoAZ"),window.PlatFormTWAndroid=PlatFormTWAndroid;var PlatFormZYYXBase=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new TaiwanLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zyyx},t.prototype.fbq=function(e,t){window.fbq&&window.fbq("track",e,t)},t.prototype.ttq=function(e){window.ttq&&window.ttq.track(e)},t}(PlatFormWW);__reflect(PlatFormZYYXBase.prototype,"PlatFormZYYXBase");var TaiwanLoginParam=function(e){function t(){var t=e.call(this)||this;return t.appid="0",t.keys=["token","appid","openId"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanLoginParam.prototype,"TaiwanLoginParam");var TaiwanReportParam=function(e){function t(){var t=e.call(this)||this;return t.keys=["roleId","roleName","roleBalance","level","vipLevel","zoneId","gameZoneName","guildName","submitType"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanReportParam.prototype,"TaiwanReportParam");var TaiwanPayParam=function(e){function t(){var t=e.call(this)||this;return t.isUseEmptyValue=!0,t.keys=["gameOrderId","gameZoneId","roleId","level","productId","productName","money","notifyUrl","language","cpPrivateInfo"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanPayParam.prototype,"TaiwanPayParam"),window.PlatFormTaiwanBase=PlatFormZYYXBase;var PlatFormQuickBase=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.pfParam.openId=egret.getOption("openId")||window.openId,[2]})})},t.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.openBgWin.call(this),this.openSelectServer(),[2]})})},t.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(n){return t=egret.getOption("serverId"),t?(r=new ServerData,r.server_id=t,this.callback(r)):e.prototype.openSelectServer.call(this),[2]})})},t.prototype.setVerData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return window.IGameMain.showRecharge(e,t),[2]})})},t.prototype.isShowLogo=function(){return!!window.isShowLogo||this.main.getPf(this.pfId).isShowLogo()},t.prototype.getBgName=function(){return this.main.getPf(this.pfId).getBgName()},t.prototype.getPfPay=function(){return window.pfPay||this.pfId},t}(PlatFormWW);__reflect(PlatFormQuickBase.prototype,"PlatFormQuickBase"),window.PlatFormQuickBase=PlatFormQuickBase;var QuickSDKLoginParam=function(){function e(){}return e}();__reflect(QuickSDKLoginParam.prototype,"QuickSDKLoginParam");var QuickSDKLoginParamData=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","token","channelId","openId"]},t.prototype.setData=function(e){this.uid=e.uid,this.username=e.username,this.token=e.token,this.isLogin=e.isLogin,this.channelId=e.channelId},t}(PlatFormParam);__reflect(QuickSDKLoginParamData.prototype,"QuickSDKLoginParamData");var QuickSDKRechargeParam=function(){function e(){}return e}();__reflect(QuickSDKRechargeParam.prototype,"QuickSDKRechargeParam");var QuickSDKRoleParam=function(){function e(){}return e}();__reflect(QuickSDKRoleParam.prototype,"QuickSDKRoleParam");var PlatFormQuickH5=function(e){function t(){var t=e.call(this)||this;return t.productCode="",t.productKey="",t._isLiuhai=!1,t.productCode=window.productCode,t.productKey=window.productKey,t.pfParam=new QuickSDKLoginParamData,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),t=this,window.loadSingleScript("https://staticjs.quickapi.net/static/lib/libQuickSDK_v2.js",function(){QuickSDK.init(t.productCode,t.productKey,!1,r.initCallback.bind(r)),QuickSDK.setSwitchAccountNotification(function(e){r.relogin()}),QuickSDK.setLogoutNotification(function(e){r.relogin(),console.log("Game:玩家点击注销帐号")})}),[2]})})},t.prototype.initCallback=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return console.log("init success"),QuickSDK.login(this.loginCallback.bind(this)),QuickSDK.getExtendsVal("getScreenType",function(t){e._isLiuhai=1==t.screenType||"true"==t.screenType}),[2]})})},t.prototype.loginCallback=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a=this;return __generator(this,function(i){switch(i.label){case 0:return e.status?(console.log("GameDemo:QuickSDK登录成功: uid=>"+e.data.uid),this.pfParam.setData(e.data),t=this.getVerUrl(),console.log("url:"+t),[4,this.getHttp(t)]):[3,2];case 1:return r=i.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>o,this.openGame(),[3,3];case 2:console.log("GameDemo:QuickSDK登录失败:"+e.message),this.serverBgWin?this.serverBgWin.once(egret.TouchEvent.TOUCH_TAP,function(){a.relogin()},this):this.relogin(),i.label=3;case 3:return[2]}})})},t.prototype.createRole=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!0,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.enterGame=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.roleUp=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.powerUp=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.getQuickSDKRoleParam=function(e){var t={};return t.isCreateRole=!0,t.roleCreateTime=e.createRoleTime,t.uid=this.pfParam.uid,t.serverId=EntranceParam.urlParam.srvid,t.serverName=EntranceParam.urlParam.serverName,t.userRoleName=e.actorName,t.userRoleId=e.actorId,t.userRoleBalance=e.yb,t.vipLevel=e.vipLevel+e.svipLevel,t.userRoleLevel=e.actorLevel,t.partyId=e.guildId,t.partyName=e.guildName,t.gameRoleGender=0,t.gameRolePower=e.power,t.partyRoleId="",t.partyRoleName="",t.professionId=0,t.profession="",t.friendlist="",t},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(e?(n={},n.productCode=this.productCode,n.uid=this.pfParam.uid,n.userRoleId=t.actorId,n.userRoleName=t.actorName,n.serverId=EntranceParam.urlParam.srvid,n.userServer=EntranceParam.urlParam.serverName,n.userLevel=t.actorLevel,n.cpOrderNo=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=e.amount/100,n.subject=e.itemName,n.desc=0,n.callbackUrl="",n.extrasParams=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.goodsId=e.yb.toString(),n.count=1,n.quantifier="个",QuickSDK.pay(JSON.stringify(n),function(){console.log("购买道具成功")})):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.logout=function(e){var t=this;QuickSDK.logout(function(e){t.initCallback()})},t.prototype.relogin=function(){location&&location.reload()},t.prototype.reload=function(){QuickSDK.callExtFunction("exit",{})},t.prototype.isLiuhai=function(){return this._isLiuhai},t}(PlatFormBaseXYX);__reflect(PlatFormQuickH5.prototype,"PlatFormQuickH5");var HWAzGoogleLoginParam=function(e){function t(){var t=e.call(this)||this;return t.playName="0",t.userid="0",t.email="0",t.applicationId="0",t.token="0",t.keys=["playName","userid","email","applicationId","token"],t}return __extends(t,e),t}(PlatFormParam);__reflect(HWAzGoogleLoginParam.prototype,"HWAzGoogleLoginParam");var HWAzGooglePayParam=function(e){function t(){var t=e.call(this)||this;return t.product_id="",t.game_order_id="",t.ext="",t.keys=["product_id","game_order_id","ext"],t}return __extends(t,e),t}(PlatFormParam);__reflect(HWAzGooglePayParam.prototype,"HWAzGooglePayParam");var PlatFormHWAzGoogle=function(e){function t(){var t=e.call(this)||this;return t.adjustEventKey={Purchase:"68n71c",app_start:"y0sdf2",app_login:"xmg7r4",app_role:"8etufc",Equip_lottery_10th:"xav8ed",Horcrux_lottery_10th:"qun6yy",Rune_lottery_10th:"s1j2bo",Peak_lottery_10th:"rypb68",God_lottery_10th:"z3g932",Spirit_lottery_10th:"q2alkv",tutorial_start:"su5g6l",tutorial_end:"j2k2j3",Finish_stage_06:"50hg77",VIP2:"7uxuq1",Chat:"xt45wo",Finish_stage_15:"mjfpu5",Smelt:"8vivns",Finish_stage_40:"ev8i45",Online_30:"53fucf",Online_60:"bud2xv",Finish_stage_50:"lwljaw",Flashsale:"30xamf",Templeboss:"vl8gmg",Level_800:"8jmur0",Level_880:"dz5yii",Level_1030:"gsqtih",Level_1100:"eyo4b9",Level_1170:"uqcvrp",Level_1290:"yjc26z",Level_1520:"dv6hx0"},t.pfParam=new HWAzGoogleLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.hwGoogle},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e.prototype.init.call(this),[4,this.getHttp(this.getVerUrl())];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,document.location.href="EzwanSDK://init",document.location.href="EzwanSDK://login",this.reportAdjust("app_start"),[2]}})})},t.prototype.backPressed=function(){console.log("backPressed");var e=!1;this.serverGgonggaoWin&&this.serverGgonggaoWin.parent&&(this.serverGgonggaoWin.close(),e=!0),!e&&this.serverListWin&&this.serverListWin.parent&&(this.serverListWin.close(),e=!0),e||(e=window.IGameMain&&window.IGameMain.backButton()),e||(document.location.href="EzwanSDK://exitGameDialogPopUp")},t.prototype.showRecharge=function(e,r){return __awaiter(this,void 0,void 0,function(){var n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(n=c.sent())?(console.log("调用充值"),o=new HWAzGooglePayParam,o.product_id=""+e.shangpinId,o.game_order_id=r.actorId+"_"+new Date(r.serverTime).valueOf()+"_"+Math.random(),o.ext=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+r.actorId+"|"+e.yb+"|"+e.amount,a=this.getCreatOrderUrl(o),console.log(a),[4,this.getHttp(a)]):[3,3];case 2:i=c.sent(),console.log(i),s=JSON.parse(i),200==s.code?(document.location.href="EzwanSDK://pay?product_id="+o.product_id+"&game_order_id="+o.game_order_id,t.payAmount=e.amount/100):this.alert(s.msg),c.label=3;case 3:return[2]}})})},t.prototype.isCustomerBtn=function(e){e(1)},t.prototype.sendService=function(e){e.onSuccessCallback()},t.prototype.createRole=function(e){this.reportAdjust("app_role",e)},t.prototype.enterGame=function(e){},t.prototype.guanQiaUp=function(e){switch(e.guanId){case 1:this.reportAdjust("tutorial_start",e);break;case 20:this.reportAdjust("tutorial_end",e);break;case 6:this.reportAdjust("Finish_stage_06",e);break;case 15:this.reportAdjust("Finish_stage_15",e);break;case 40:this.reportAdjust("Finish_stage_40",e);break;case 50:this.reportAdjust("Finish_stage_50",e)}},t.prototype.roleUp=function(e){switch(e.actorLevel){case 800:this.reportAdjust("Level_800",e);break;case 880:this.reportAdjust("Level_880",e);break;case 1030:this.reportAdjust("Level_1030",e);break;case 1100:this.reportAdjust("Level_1100",e);break;case 1170:this.reportAdjust("Level_1170",e);break;case 1290:this.reportAdjust("Level_1290",e);break;case 1520:this.reportAdjust("Level_1520",e)}},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.isShowPayItem=function(e){return 0==e||2==e},t.prototype.isShowMrzgSvipWin=function(){return!1},t.prototype.logout=function(e){document.location.href="EzwanSDK://logOut"},t.prototype.reportAdjust=function(e,t){this.adjustEventKey[e]&&(document.location.href="EzwanSDK://sendEvent?event_token="+this.adjustEventKey[e])},t.prototype.reportAdjustRecharge=function(e,t){this.adjustEventKey[e]&&(document.location.href="EzwanSDK://sendEventWithRevenue?event_token="+this.adjustEventKey[e]+"&revenue="+t+"&currency=KRW")},t.payAmount=0,t}(PlatFormWW);__reflect(PlatFormHWAzGoogle.prototype,"PlatFormHWAzGoogle");var WXRequestParam=function(){function e(){this.method="GET",this.dataType="json",this.responseType="text",this.fail=function(){console.log("http请求失败")}}return e}();__reflect(WXRequestParam.prototype,"WXRequestParam");var WXSuccessData=function(){function e(){}return e}();__reflect(WXSuccessData.prototype,"WXSuccessData");var SubPacketParam=function(){function e(){}return e}();__reflect(SubPacketParam.prototype,"SubPacketParam");var ShareInfoMK2XYX=function(){function e(){}return e}();__reflect(ShareInfoMK2XYX.prototype,"ShareInfoMK2XYX");var ZSMK2LoginParamsXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","aid","gdt_vid","pfParam"],this.addMineKey("aid","appid")},t}(ZSMK2LoginParams);__reflect(ZSMK2LoginParamsXYX.prototype,"ZSMK2LoginParamsXYX");var PlatFormZSMK2WXXYX=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.scene=0,t.pfParam=new ZSMK2LoginParamsXYX,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.wxxyx
},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return this.initWin(),this.initYszcData(),e=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return t=s.sent(),this._isIosShowRecharge="1"==t,[4,this.getHttp(this.getVerUrl())];case 2:return r=s.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=void 0==window.v||window.v>o,a=window.wx.getLaunchOptionsSync(),this.scene=a.scene,this.query=a.query,console.log("scene:"+this.scene),i=new SubPacketParam,i.name="js1",i.success=function(t){e.initLoginParam()},i.fail=function(t){var r="";for(var n in t)r+=n+"="+t[n]+"\n";e.openTipsWin("wx.loadSubpackage失败\n"+r)},window.wx.loadSubpackage(i),[2]}})})},t.prototype.initLoginParam=function(){var e=this,t=e.getH5gamecn(),r=this.pfParam;t._init({getLoginParamsCallBack:function(t){r.openId=t.openId,r.pfParam=t.passId,r.gdt_vid=window.gdt_vid||"0",r.aid=window.aid||t.passId,e.openGame()},shareInfo:{title:this.getTitle(),imgUrl:this.getImgUrl(),query:""}})},t.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,n){window.wx.request({url:e,success:function(e){r(e.data)},fail:function(){r(null)},dataType:"text",responseType:t})})]})})},t.prototype.getH5gamecn=function(){return window.h5gamecn||(window.h5gamecn=new DebugH5GAMECNMK2),window.h5gamecn},t.prototype.showRecharge=function(t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return e.prototype.showRecharge.call(this,t,r),[2]})})},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIos()?this.isShenhe?!1:this._isIosShowRecharge:!0},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.isIos=function(){var e=window.wx.getSystemInfoSync(),t=e.system.indexOf("iOS")>=0;return t},t.prototype.isShowTXSP=function(){var e=window.wx.getSystemInfoSync();return"sp"==e.AppPlatform},t.prototype.getSceneType=function(){return this.scene},t.prototype.requestInviteInfo=function(){var e="";if("string"==typeof this.query)e=this.query;else for(var t in this.query)e+=t+"="+this.query[t]+"&";if(this.query.invite_account&&this.query.invite_server_id){var r=""+this.domain+this.pfPHP+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+e;this.getHttp(r)}},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.showShare=function(){var e={title:this.getTitle(),imgUrl:this.getImgUrl(),query:this.getQuery()};this.getH5gamecn().showShare(e)},t.prototype.getTitle=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getQuality=function(){return 0},t.prototype.getDestroyTime=function(){return 90},t.prototype.isShowShoucang=function(){return!0},t.prototype.isShowYqhl=function(){return!0},t.prototype.isShowMrzgSvipWin=function(){return!1},t.prototype.getISBN=function(){return window.ISBN||LangEntry.str4},t.prototype.copyResult=function(e,t,r,n){window.wx.setClipboardData({data:e,success:t?t:function(){},fail:r?r:function(){},complete:n?n:function(){}})},t.prototype.reload=function(){console.log("reload"),window.wx.exitMiniProgram({success:function(){console.log("reload_success")},fail:function(){console.log("reload_fail")},complete:function(){}})},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2WXXYX.prototype,"PlatFormZSMK2WXXYX"),window.PlatFormZSMK2WXXYX=PlatFormZSMK2WXXYX;var DebugTXSDK=function(){function e(){this.isDebug=!0,this.agent="zycs2"}return e.prototype.request=function(e){var t=new HttpRequester,r=e.url.replace("https","http");t.open(r,e.method,function(t){var r=new WXSuccessData;r.data=JSON.parse(t.currentTarget.response),e.success(r)}),t.send()},e.prototype.downloadFile=function(e){},e.prototype.getSystemInfoSync=function(){var e,t,r=navigator.userAgent;return r.match(/iPad/)||r.match(/iPhone/)||r.match(/iPod/)?(e="iOS",t="iOS"):(e="system",t="model"),{system:e,model:t,AppPlatform:"qq"}},e.prototype.getLaunchOptionsSync=function(){var e=1089,t="invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId;return{scene:e,query:t}},e.prototype.exitMiniProgram=function(e){},e.prototype.loadSubpackage=function(e){e.success&&e.success()},e.prototype.setClipboardData=function(e){},e.prototype.onShow=function(e){var t=new OnShowParam;t.query={gdt_vid:"1",weixinadinfo:"2.3.4"},e(t)},e.prototype.shareAppMessage=function(e){},e.prototype.onShareAppMessage=function(e){},e.prototype.showShareMenu=function(e){e.withShareTicket,e.menus},e.prototype.setUserCloudStorage=function(e){},e}();__reflect(DebugTXSDK.prototype,"DebugTXSDK",["TXSDK"]);var OnShowParam=function(){function e(){}return e}();__reflect(OnShowParam.prototype,"OnShowParam"),window.wx||(window.wx=new DebugTXSDK);var DebugH5GAMECNMK2=function(){function e(){}return e.prototype.showVerify=function(e){},e.prototype.getVerifyInfo=function(e){},e.prototype.isCustomerBtn=function(e){},e.prototype.showShare=function(e){},e.prototype.isOpenShare=function(e){},e.prototype.setShareCallback=function(e){},e.prototype.showQrCode=function(){},e.prototype.getFocusState=function(e,t){},e.prototype._init=function(e){var t=e,r=new ZSMK2LoginParams;window.openId&&(r.openId=window.openId),window.qdId&&(r.passId=window.qdId.toString()),t.getLoginParamsCallBack(r)},e.prototype.enterGame=function(e){},e.prototype.onloginerror=function(){},e.prototype.logout=function(){},e.prototype.pay=function(e,t){},e.prototype.reportData=function(e){},e.prototype.checkChat=function(e,t){t({result:"success",code:1,content:e.chat_content,failMsg:""})},e.prototype.invokeSystem=function(e){},e}();__reflect(DebugH5GAMECNMK2.prototype,"DebugH5GAMECNMK2",["H5GAMECNMK2"]);var PlatFormYXYMFHwh5=function(e){function t(){var t=e.call(this)||this;return t.appid="101901823",t.pfParam=new Hwh5H5LoginParamData,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,HwFastappObject.onGameLoginWithRealResult=function(e){if(0==e.code){r.pfParam.setData(e.gameUserData),console.log("submitPlayerEvent:");var n={eventId:Math.random().toString(),eventType:Hwh5EvetnType.GAMEBEGIN};HwFastappObject.submitPlayerEvent(JSON.stringify(n))}else 7004==e.code||2012==e.code?(t.main.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onStageClick,t),window.system.postMessage("exitapp")):(r.alert("onGameLoginWithRealResult错误码:"+e.code+"|"+e.data),window.system.postMessage("exitapp"))},HwFastappObject.onSubmitPlayerEventResult=function(e){console.log("onSubmitPlayerEventResult:"+JSON.stringify(e));var t={transactionId:e.transactionId};HwFastappObject.getPlayerExtraInfo(JSON.stringify(t))},HwFastappObject.onGetPlayerExtraInfoResult=function(e){console.log("onGetPlayerExtraInfoResult:"+JSON.stringify(e)),0==e.code?(console.log("this.onSuccess:"),r.onSuccess()):r.alert("onGetPlayerExtraInfoResult错误码:"+e.code)},HwFastappObject.onPayResult=function(e){console.log("支付结果: "+e.code+",message: "+e.data)},this.startLogin(),[2]})})},t.prototype.startLogin=function(){var e={forceLogin:1,appid:this.appid};HwFastappObject.gameLoginWithReal(JSON.stringify(e))},t.prototype.onStageClick=function(e){this.startLogin(),this.main.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageClick,this)},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return console.log("onSuccess"),e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,console.log("openGame"),this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?e?(n=new Hwh5H5RechargeParam,n.amount=(e.amount/100).toFixed(2),n.applicationID=this.appid,n.country="CN",n.currency="CNY",n.productDesc=e.desc,n.productName=e.itemName,n.serviceCatalog="X6",n.urlver="2",n.sdkChannel=3,n.extReserved=EntranceParam.urlParam.openId+"_"+EntranceParam.urlParam.srvid+"_"+t.actorId+"_"+e.yb,o=this.getCreatOrderUrl(n),console.log(o),[4,this.getHttp(o)]):[3,3]:[3,4];case 2:return a=l.sent(),i=JSON.parse(a),200==i.code?(s={},s.amount=i.data.amount,s.applicationID=n.applicationID,s.country=n.country,s.currency=n.currency,s.productDesc=n.productDesc,s.productName=n.productName,s.requestId=i.data.requestId,s.serviceCatalog=n.serviceCatalog,s.merchantId=i.data.merchantId,s.merchantName=i.data.merchantName,s.sign=i.data.sign,s.urlver=n.urlver,s.sdkChannel=n.sdkChannel,s.extReserved=n.extReserved,s.publicKey=i.data.publicKey,s.url=i.data.url,c=JSON.stringify({orderInfo:JSON.stringify(s)}),console.log(c),HwFastappObject.pay(c)):this.alert(i.msg),[3,4];case 3:this.alert("错误的购买道具"),l.label=4;case 4:return[2]}})})},t.prototype.getISBN=function(){var e="%0A%E6%96%B0%E5%B9%BF%E5%87%BA%E5%AE%A1%5B2016%5D2352%E5%8F%B7%EF%BC%88ISBN%EF%BC%89%3A978-7-7979-0939-6%0A%E8%91%97%E4%BD%9C%E6%9D%83%E4%BA%BA%EF%BC%9A%E4%B8%8A%E6%B5%B7%E6%8C%87%E7%A6%85%E7%BD%91%E7%BB%9C%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%E5%87%BA%E7%89%88%E5%8D%95%E4%BD%8D%EF%BC%9A%E4%B8%8A%E6%B5%B7%E9%83%BD%E7%8E%A9%E7%BD%91%E7%BB%9C%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%20%0A%E6%96%87%E7%BD%91%E6%B8%B8%E5%A4%87%E5%AD%97%EF%BC%9A%5B2016%5DM-RPG%C2%A0366%20%E9%80%82%E9%BE%84%E6%8F%90%E7%A4%BA%EF%BC%9A18%E5%B2%81%E4%BB%A5%E4%B8%8A";return decodeURIComponent(e)},t}(PlatFormYXYMF);__reflect(PlatFormYXYMFHwh5.prototype,"PlatFormYXYMFHwh5"),window.PlatFormYXYMFHwh5=PlatFormYXYMFHwh5;var SuperSDKLoginParamData=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["user_id","super_game_id","platform_id","fcm","time","sign"]},t}(PlatFormParam);__reflect(SuperSDKLoginParamData.prototype,"SuperSDKLoginParamData");var SuperSDKRechargeParam=function(){function e(){}return e}();__reflect(SuperSDKRechargeParam.prototype,"SuperSDKRechargeParam");var SuperSDKRoleParam=function(){function e(){}return e}();__reflect(SuperSDKRoleParam.prototype,"SuperSDKRoleParam");var ChatParamSuperSDK=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","userId","roleId","roleName","gameId","serviceId","chatContents"]},t}(PlatFormParam);__reflect(ChatParamSuperSDK.prototype,"ChatParamSuperSDK");var PlatFormSuperSDK=function(e){function t(){var t=e.call(this)||this;return t.gameId=931,t.domain="https://cq2bt-login.wan73.com/",t.pfParam=new SuperSDKLoginParamData,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.loadSDK(),[2]})})},t.prototype.loadSDK=function(){var e=this,t=this;window.loadSingleScript("https://supersdk.7pa.com/js/libSuperSDK_v2.js",function(){SuperSDK.init(t.gameId,!0,e.initCallback.bind(e))})},t.prototype.initCallback=function(){console.log("initCallback"),this.pfParam.setValueByUrl(location.href),this.openSelectServer()},t.prototype.createRole=function(e){var t=this.getSuperSDKRoleParam(e);SuperSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.roleUp=function(e){var t=this.getSuperSDKRoleParam(e);SuperSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.powerUp=function(e){var t=this.getSuperSDKRoleParam(e);SuperSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.getSuperSDKRoleParam=function(e){var t={};return t.super_user_id=this.pfParam.user_id,t.service_id=EntranceParam.urlParam.srvid,t.service_name=e.serverName,t.role_id=e.actorId,t.role_name=e.actorName,t.role_level=e.actorLevel,t.describe=e.guildId,t.money=e.yb,t.experience=0,t.power_value=e.power,t},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(e?(n={},n.good_id=e.yb,n.good_name=e.itemName,n.game_order_sn=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.super_user_id=this.pfParam.user_id,n.money=e.amount/100,n.service_id=EntranceParam.urlParam.srvid,n.service_name=t.serverName,n.role_level=t.actorLevel,n.role_id=t.actorId,n.role_name=t.actorName,n.remark=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.power_value=t.power,SuperSDK.pay(JSON.stringify(n),function(e){1==e.status?console.log("支付成功"+JSON.stringify(e)):2==e.status&&console.log("支付失败"+JSON.stringify(e))})):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.checkChat=function(e){var t=new ChatParamSuperSDK;t.userId=this.pfParam.user_id,t.roleId=e.sender_id,t.roleName=encodeURIComponent(e.sender_name),t.gameId=this.gameId,t.serviceId=e.server_id,t.chatContents=e.chat_content;var r="https://cq2bt-login.wan73.com/"+this.pfPHP+"/api?m=player&fn=sendChat&"+t.toParamString();this.getHttp(r),e.onSuccessCallback(e.chat_content)},t.prototype.logout=function(e){this.reload()},t.prototype.openStore=function(e){SuperSDK.openStore(function(t){e(1==t.status?1:0),console.log(t.status)})},t.prototype.isShowStore=function(){return!0},t}(PlatFormWW);__reflect(PlatFormSuperSDK.prototype,"PlatFormSuperSDK");var PlatFormYingwenBase=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zycsen-login.sufungame.com/",t.pfParam=new YingwenLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zyen},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.isShow5Star=function(){return!0},t.prototype.isShowFaceBook=function(){return!0},t.prototype.openFaceBookLink=function(){window.open("https://www.facebook.com/Immortal-Legend-102942675054324")},t.prototype.getIsShenhe=function(){return this.isShenhe},t}(PlatFormWW);__reflect(PlatFormYingwenBase.prototype,"PlatFormYingwenBase");var YingwenLoginParam=function(e){function t(){var t=e.call(this)||this;return t.appid="0",t.keys=["token","appid","openId"],t}return __extends(t,e),t}(PlatFormParam);__reflect(YingwenLoginParam.prototype,"YingwenLoginParam");var YingwenReportParam=function(e){function t(){var t=e.call(this)||this;return t.keys=["roleId","roleName","roleBalance","level","vipLevel","zoneId","gameZoneName","guildName","submitType"],t}return __extends(t,e),t}(PlatFormParam);__reflect(YingwenReportParam.prototype,"YingwenReportParam");var YingwenPayParam=function(e){function t(){var t=e.call(this)||this;return t.isUseEmptyValue=!0,t.keys=["interfaceName","amount","currencyCode","gameName","serverId","serverName","roleId","roleName","roleLevel","goodsId","goodsName","goodsDesc","productId","productName","cpTradeSn","extData"],t}return __extends(t,e),t}(PlatFormParam);__reflect(YingwenPayParam.prototype,"YingwenPayParam"),window.PlatFormYingwenBase=PlatFormYingwenBase;var YingWenJunYaoAZRoleReportParam=function(){function e(){}return e}();__reflect(YingWenJunYaoAZRoleReportParam.prototype,"YingWenJunYaoAZRoleReportParam");var YingWenJunYaoAZRechargeParam=function(){function e(){this.sku_type="",this.qk_order_no="",this.callback_url=""}return e}();__reflect(YingWenJunYaoAZRechargeParam.prototype,"YingWenJunYaoAZRechargeParam");var YingWenJunYaoAZLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","user_name","token","openId"]},t}(PlatFormParam);__reflect(YingWenJunYaoAZLoginParam.prototype,"YingWenJunYaoAZLoginParam");var PlatFormYingWenJunYaoAZ=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zy2enjy-login.ynzn2022.com/",t.appFlyerEvent={payStart:["add to payment","A_add to payment","add to payment"],createRole:["Creat_User","A_Creat_User","Creat_User"],appStart:["first_open","A_first_open","first_open"],twoDayRemain:["retented user 2nd day","A_retented user2","retented user 2nd day"],threeDayReamin:["retented user 3rd day","A_retented user3","retented user 3rd day"],firstPurchase:["first purchase","A_first purchase","first purchase"],online1Hour:["online time 1( hour)","A_online time","1( hour)"],online3Hour:["online time 2( hour)","A_online time","3( hour)"],online5Hour:["online time 3( hour)","A_online time","5( hour)"],online12Hour:["online time 4( hour)","A_online time","12( hour)"],createGuild:["create the alliance","A_create the alliance","create the alliance"],JoinGuild:["join the alliance","A_join the alliance","join the alliance"],rookieGuide:["tutorialComplete","A_tutorialComplete","tutorialComplete"],fbLogin:["fb login","A_fb login","fb login"],login3Times:["login 3times","A_login 3times","login 3times"],chat:["9 up","A_9 up","9 up"],guaJiShouYi:["cap reward","A_cap reward","cap reward"],googleLogin:["google login","google login","google login"],loginSuccess:["login success","login success","login success"],firstDayOnlineHalfHour:["1st online time 0.5( hour)","A_online 1sttime","0.5( hour)"],firstDayOnlineOneHour:["1st online time 1( hour)","A_online 1sttime","1( hour)"]},t.serverHasKey={hir9x9:"online1Hour",a5olto:"online3Hour",mh0gcm:"online5Hour",u4lymb:"online12Hour",bw442b:"firstPurchase","56xyn5":"twoDayRemain",w4pkzm:"threeDayReamin"},t.pfParam=new YingWenJunYaoAZLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zy2enjy},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,egret.ExternalInterface.call("init",""),console.log("英文君曜"),egret.ExternalInterface.addCallback("QuickHwSDKInitSDKCallbackOnInitSuccess",function(e){console.log("初始化SDK成功----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("QuickHwSDKInitSDKCallbackOnInitFailed",function(e){console.log("初始化SDK失败----------------------------"+e)}),egret.ExternalInterface.addCallback("QuickHwSDKLoginSDKCallbackOnLoginSuccess",function(e){console.log("登录成功----------------------------"+e);var r=JSON.parse(e);t.pfParam.uid=r.uid,t.pfParam.user_name=r.user_name,t.pfParam.token=r.token,t.pfParam.open_type=r.open_type,t.pfParam.display_uid=r.display_uid,t.pfParam.fb_uid=r.fb_uid,t.pfParam.google_uid=r.google_uid,t.pfParam.is_trash=r.is_trash,t.pfParam.is_guest=r.is_guest,t.pfParam.is_new_user=r.is_new_user,t.pfParam.is_pre_reg=r.is_pre_reg,6==t.pfParam.open_type?t.reportAppFlyer("fbLogin"):8==t.pfParam.open_type&&t.reportAppFlyer("googleLogin"),t.onSuccess()}),egret.ExternalInterface.addCallback("QuickHwSDKLoginSDKCallbackOnLoginFailed",function(e){console.log("登录失败----------------------------"+e)}),egret.ExternalInterface.addCallback("QuickHwSDKLogoutSDKCallbackOnLogout",function(e){console.log("退出----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("QuickHwSDKPayQGPaymentCallbackOnPaySuccess",function(e){var r=JSON.parse(e);console.log("支付成功----------------------------",r),t.reportAppFlyer("paySuccess")}),egret.ExternalInterface.addCallback("QuickHwSDKPayQGPaymentCallbackOnPayFailed",function(e){var t=JSON.parse(e);console.log("支付失败----------------------------",t)}),egret.ExternalInterface.addCallback("QuickHwSDKPayQGPaymentCallbackOnPayCancel",function(e){var t=JSON.parse(e);console.log("支付取消----------------------------",t)}),egret.ExternalInterface.addCallback("QuickHwSDKH5GameLog",function(e){console.log("日志----------------------------",e)}),egret.ExternalInterface.addCallback("QuickHwSDKOnBackPressed",function(e){console.log("backPress");var n=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(r.serverGgonggaoWin.close(),n=!0),!n&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),n=!0),n||(n=window.IGameMain&&window.IGameMain.backButton()),n&&egret.ExternalInterface.call("logout","")}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.enterGame=function(e){this.reportAppFlyer("login3Times",e);var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("submitRoleInfo",r)},t.prototype.createRole=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("submitRoleInfo",r),this.reportAppFlyer("createRole",e),this.reportAppFlyer("loginSuccess",e)},t.prototype.roleUp=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("submitRoleInfo",r)},t.prototype.checkChat=function(e){this.reportAppFlyer("chat"),e.onSuccessCallback(e.chat_content)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(this.reportAppFlyer("payStart",t),n=new YingWenJunYaoAZRechargeParam,n.goods_id=e.shangpinId,n.product_order_id=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=e.amount/100,n.order_subject=e.itemName,n.suggest_currency="USD",n.extras_params=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.server_id=EntranceParam.urlParam.srvid,n.server_name=EntranceParam.urlParam.serverName,n.role_id=t.actorId,n.role_name=t.actorName,n.role_level=t.actorLevel,n.role_balance=t.yb,n.role_party_name=t.guildName,n.vip_level=t.vipLevel+t.svipLevel,o=JSON.stringify(n),console.log("支付",o),egret.ExternalInterface.call("pay",o)),[2]}})})},t.prototype.getRoleReportParam=function(e){var t=new YingWenJunYaoAZRoleReportParam;return t.server_id=EntranceParam.urlParam.srvid,t.server_name=EntranceParam.urlParam.serverName,t.role_id=e.actorId,t.role_name=e.actorName,t.role_level=e.actorLevel,t.role_balance=e.yb,t.role_party_name=e.guildName,t.vip_level=e.vipLevel+e.svipLevel,t},t.prototype.reportAppFlyer=function(e,t){void 0===t&&(t=null);var r=this.appFlyerEvent[e];if(r){var n=r[2],o=r[1],a=r[0],i=this.pfParam.uid,s=egret.localStorage.getItem(i+e),c=0;s&&(c=Number(s));for(var l=["createRole","appStart","fbLogin","login3Times","chat","googleLogin","guaJiShouYi","rookieGuide"],u=0,p=l.length;p>u;u++)if(l[u]==e&&c>0)return;if("login3Times"==e&&t){var h=Math.floor(t.serverTime/1e3/86400),d=egret.localStorage.getItem(""+i+h),m=0;if(d){if(m=Number(d),m>=3)return;egret.localStorage.setItem(""+i+h,m+1+"")}}egret.localStorage.setItem(i+e,c+1+"");var g=new Object;g.event_name=a,g[n]=o;var f=JSON.stringify(g);egret.ExternalInterface.call("appsFlyerEvent",f),console.log("客户端打点appFlyer:",f)}else if(this.serverHasKey[e]&&(e=this.serverHasKey[e],r=this.appFlyerEvent[e])){var n=r[2],o=r[1],a=r[0],g=new Object;g.event_name=a,g[n]=o;var f=JSON.stringify(g);egret.ExternalInterface.call("appsFlyerEvent",f),console.log("服务器打点appFlyer:",f)}if(t&&0==t.serverOpenDay&&("rxohc5"==e||"hir9x9"==e)&&("rxohc5"==e?r=this.appFlyerEvent.firstDayOnlineHalfHour:"hir9x9"==e&&(r=this.appFlyerEvent.firstDayOnlineOneHour),r)){var n=r[2],o=r[1],a=r[0],g=new Object;g.event_name=a,g[n]=o;var f=JSON.stringify(g);egret.ExternalInterface.call("appsFlyerEvent",f),console.log("服务器打点首日appFlyer:",f)}},t.prototype.reload=function(){location?location.reload():egret.ExternalInterface.call("logout","")},t.prototype.isShowFaceBook=function(){return!0},t.prototype.openFaceBookLink=function(){var e={pageUrl:"https://www.facebook.com/wrathcqen"},t=JSON.stringify(e);egret.ExternalInterface.call("openLinks",t)},t}(PlatFormWW);__reflect(PlatFormYingWenJunYaoAZ.prototype,"PlatFormYingWenJunYaoAZ");var PlatFormZYYXAZ=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.pfParam.appid="1",this.openBgWin(),document.location.href="zgamessdkapi://recoveryWebViewAlpha",document.location.href="zgamessdkapi://autoLogin",[2]})})},t.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.openSelectServer.call(this),document.location.href="zgamessdkapi://trackEvent?eventType=af_login",[2]})})},t.prototype.loginGame=function(){e.prototype.loginGame.call(this)},t.prototype.createRole=function(e){document.location.href="zgamessdkapi://trackEvent?eventType=af_complete_registration",document.location.href="zgamessdkapi://submitGameUserInfo?"+this.getReportParam(0,e).toParamString()},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n=new TaiwanPayParam,n.gameOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.gameZoneId=EntranceParam.urlParam.srvid,n.roleId=t.actorId,n.level=t.actorLevel,n.productId=e.shangpinId,n.productName=e.itemName,n.money=e.amount,n.notifyUrl="",n.language="zh-tw",n.cpPrivateInfo=EntranceParam.urlParam.openId+"|"+e.yb,document.location.href="zgamessdkapi://startPay?"+n.toParamString()),[2]}})})},t.prototype.getReportParam=function(e,t){var r=new TaiwanReportParam;return r.roleId=t.actorId,r.roleName=t.actorName,r.roleBalance=t.yb,r.level=t.actorLevel,r.vipLevel=t.vipLevel+t.svipLevel,r.zoneId=EntranceParam.urlParam.srvid,r.gameZoneName="",r.guildName=t.guildName,r.submitType=e,r},t.prototype.roleUp=function(e){e.actorLevel%10==0&&(document.location.href="zgamessdkapi://submitGameUserInfo?"+this.getReportParam(1,e).toParamString())},t.prototype.taskChange=function(e,t){3==t.taskId&&1==t.state&&(document.location.href="zgamessdkapi://trackEvent?eventType=af_level_achieved",document.location.href="zgamessdkapi://trackEvent?eventType=af_tutorial_completion")},t.prototype.sendService=function(e){},t.prototype.logout=function(e){document.location.href="zgamessdkapi://submitGameUserInfo?"+this.getReportParam(2,e).toParamString(),document.location.href="zgamessdkapi://switchAccount"},t}(PlatFormZYYXBase);__reflect(PlatFormZYYXAZ.prototype,"PlatFormZYYXAZ"),window.PlatFormTWAndroid=PlatFormTWAndroid;var TaiwanLoginParamZJWeb=function(e){function t(){var t=e.call(this)||this;return t.keys=["openId","cpgameid","qqesuid","channelid","channeluid","qqesnickname","qqesavatar","ext","sign"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanLoginParamZJWeb.prototype,"TaiwanLoginParamZJWeb");var TaiwanPayParamZJWeb=function(e){function t(){var t=e.call(this)||this;return t.keys=["openId","cpgameid","qqesuid","channelid","channeluid","goodsname","fee","goodsid"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanPayParamZJWeb.prototype,"TaiwanPayParamZJWeb");var PlatFormZYYXZJWeb=function(e){function t(){var t=e.call(this)||this;return t.domain="https://login.hwyxpros.com/",t.urlList=["https://oshdk.zhijiangames.com/static/js/jquery/dist/jquery.min.js?v="+Math.random(),"https://oshdk.zhijiangames.com/static/channelsdk/sbpulsdk.js?v="+Math.random()],t.pfParam=new TaiwanLoginParamZJWeb,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zyyxzj},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.openBgWin(),t=this,this.pfParam.setValueByUrl(location.href),window.loadScript(this.urlList,function(){var e=t.pfParam.toJson();SbPulSdk.init(e,function(e){t.openSelectServer()})}),[2]})})},t.prototype.openServerWin=function(){e.prototype.openServerWin.call(this),SbPulSdk.chooseServer()},t.prototype.createRole=function(e){var t={qqesuid:this.pfParam.qqesuid,cpgameid:this.pfParam.cpgameid,channelid:this.pfParam.channelid,channeluid:this.pfParam.channeluid,serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,roleId:e.actorId,rolePower:e.power,roleName:e.actorName,nickName:EntranceParam.urlParam.nickName};SbPulSdk.createRole(t)},t.prototype.enterGame=function(e){var t={cpgameid:this.pfParam.cpgameid,qqesuid:this.pfParam.qqesuid,channelid:this.pfParam.channelid,channeluid:this.pfParam.channeluid,serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,roleId:e.actorId,rolePower:e.power,roleName:e.actorName,nickName:EntranceParam.urlParam.nickName,level:e.actorLevel,vip:e.vipLevel+e.svipLevel};SbPulSdk.beginGame(t)},t.prototype.roleUp=function(e){if(e.actorLevel%10==0){var t={cpgameid:this.pfParam.cpgameid,qqesuid:this.pfParam.qqesuid,channelid:this.pfParam.channelid,channeluid:this.pfParam.channeluid,serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,roleId:e.actorId,rolePower:e.power,roleName:e.actorName,professionId:"1",nickName:EntranceParam.urlParam.nickName,level:e.actorLevel,vip:e.vipLevel+e.svipLevel};SbPulSdk.userUpgrade(t)}},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=c.sent())?(n=new TaiwanPayParamZJWeb,n.cpgameid=this.pfParam.cpgameid,n.qqesuid=this.pfParam.qqesuid,n.channelid=this.pfParam.channelid,n.channeluid=this.pfParam.channeluid,n.goodsname=""+e.shangpinId,n.fee=e.amount,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),[4,this.getHttp(o)]):[3,3];case 2:a=c.sent(),console.log(a),i=JSON.parse(a),200==i.code?(s={order:i.data.order,cpgameid:this.pfParam.cpgameid,qqesuid:this.pfParam.qqesuid,channelid:this.pfParam.channelid,channeluid:this.pfParam.channeluid,goodsname:e.shangpinId,fee:e.amount/100,serverID:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,roleName:t.actorName,roleId:t.actorId,ext:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,timestamp:i.data.timestamp,sign:i.data.sign},SbPulSdk.pay(s)):console.log("充值失败:"+i.msg),c.label=3;case 3:return[2]}})})},t.prototype.sendService=function(e){},t.prototype.logout=function(e){location.reload()},t}(PlatFormWW);__reflect(PlatFormZYYXZJWeb.prototype,"PlatFormZYYXZJWeb"),window.PlatFormZYYXZJWeb=PlatFormZYYXZJWeb;var BaseItemEntry=function(e){function t(){var t=e.call(this)||this;return t._data=null,t._selected=!1,t.itemIndex=-1,t}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()},enumerable:!0,configurable:!0}),t.prototype.dataChanged=function(){},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected!=e&&(this._selected=e,this.invalidateState())},enumerable:!0,configurable:!0}),t}(BaseWinEntry);__reflect(BaseItemEntry.prototype,"BaseItemEntry",["eui.IItemRenderer","eui.UIComponent","egret.DisplayObject"]),eui.registerBindable(BaseItemEntry.prototype,"data"),window.BaseItemEntry=BaseItemEntry;var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,r){function n(n){t.call(r,n,e)
}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var EntranceParam=function(){function e(){}return e.setKeyValue=function(e,t){void 0!==t&&(this.urlParam[e]=t)},Object.defineProperty(e,"isNew",{get:function(){return"1"==this.urlParam.isnew},enumerable:!0,configurable:!0}),e.has=function(e){return this.verData&&this.verData.hasOwnProperty(e)},e.getDir=function(e){return 255&this.verData[e]},e.getVer=function(e){return this.verData[e]},e.hasVer=function(){return void 0!==e.urlParam.v&&""!==e.urlParam.v},e.urlParamDefault={server_list_url:"",notice_url:"",server_status:"1",isBan:"0",srvid:"1",serverid:"1",srvport:"9401",user:"client9999",srvaddr:"192.168.1.250",spverify:"qianmeng",pfid:"151",pf:"",appid:"151",openId:"151",openKey:"151",isnew:"0",roleCount:"1",nickName:"",serverName:"1服",loadurl:"",login_ip:"192.168.0.1",v:"",default_v:"",entryHosts:"",hosts:"http://192.168.1.252:8081/trunk2/client/resource/"},e.urlParam=e.urlParamDefault,e}();__reflect(EntranceParam.prototype,"EntranceParam"),window.EntranceParam=EntranceParam;var HttpRequester=function(){function e(){this.requester=new egret.HttpRequest,this.isComplete=!1,this.errorCount=0,this.maxErrorCount=3}return e.prototype.setMaxErrorCount=function(e){this.maxErrorCount=e},e.prototype.sendUrl=function(){this.requester.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.requester.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),this.requester.send()},e.prototype.open=function(e,t,r,n){void 0===t&&(t=egret.HttpMethod.GET),void 0===r&&(r=null),void 0===n&&(n=null),this.url=e,this.method=t,this.onSuccessCallback=r,this.onFailCallback=n||this.log.bind(this),this.requester.open(this.url,this.method)},e.prototype.send=function(){this.sendUrl()},e.prototype.onGetComplete=function(e){this.errorCount=0,this.clear(),this.onSuccessCallback&&this.onSuccessCallback(e)},e.prototype.onGetIOError=function(e){this.clear(),this.errorCount<this.maxErrorCount?(this.requester.open(this.url,this.method),this.send(),this.errorCount+=1):(this.errorCount=0,this.onFailCallback(e),this.log())},e.prototype.clear=function(){this.requester.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.requester.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this)},e.prototype.log=function(){console.log("url:"+this.url+"请求失败")},e}();__reflect(HttpRequester.prototype,"HttpRequester");var RequestParam=function(){function e(){this.data={}}return e.prototype.toString=function(){var e="";for(var t in this.data)e+=""==e?t+"="+this.data[t]:"&"+t+"="+this.data[t];return e},e}();__reflect(RequestParam.prototype,"RequestParam");var Http=function(){function e(){}return e.get=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=egret.HttpResponseType.TEXT),this.request(e,egret.HttpMethod.GET,r)},e.post=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=egret.HttpResponseType.TEXT),this.request(e,egret.HttpMethod.POST,r)},e.request=function(e,t,r){var n=this;return void 0===t&&(t=egret.HttpMethod.GET),void 0===r&&(r=egret.HttpResponseType.TEXT),new Promise(function(o,a){var i=new egret.HttpRequest;i.responseType=r,i.open(e,t),i.once(egret.Event.COMPLETE,function(e){o(i.response)},n),i.once(egret.IOErrorEvent.IO_ERROR,function(e){o(null)},n),i.send()})},e}();__reflect(Http.prototype,"Http"),window.HttpRequester=HttpRequester;var LangEntry=function(){function e(){}return e.str1="Server name:",e.str2="Maintaining...",e.str3="",e.str4="",e.str5="Your account has been banned, please contact customer service",e.str6="The server is under maintenance, please choose another server",e.str7=["Deity Ring and Demon Ring can only be obtained from\nGear Hunt","Deity Ring and Demon Ring can only be obtained from\nGear Hun","Get limited fashion for free in Free Deal","Diamond Month Pass grants lots of diamonds every day","$1 deal, low investment with high return,\nenjoy a discount to buy the pack","Get the Undying Grail and experience the thrill of\ninfinite crit!","Always remember to inspire in Bloody Land"],e.str8="Recent logins",e.str9="Server",e.str10="No announcement!",e.str11="The server chosen is different from the original server version, please re-enter the app",e.str12="$name$ top-up is closed!",e.str13="The server is full, please choose another server!",e.str14="Confirm",e.str15="This game is only open to adults\nPlease enter your name and ID card information to verify",e.str16="Name",e.str17="ID number",e.str18="Please enter the correct name",e.str19="Under 18 years old, cannot enter the game",e.str20="The ID number is incorrect, please re-enter",e.str21="Loading...",e.str22="The first loading requires more time, please be patient",e.str23="Main program is loading...[0%]",e.str24="Loading...[$value$%]",e.str25="Diamond",e.str26="\n审批文号:国新出审[2019]2330号 （ISBN）:978-7-498-06711-1\n著作权人：广州千梦互娱科技有限公司\n出版单位：北京伯通电子出版社\n本网络游戏适合年满16周岁以上的用户使用：请您确认已如实进行实名注册。",e.str27="Can’t top up in guest mode, please go to ID Verification",e.str28="Please agree to User Agreement and Privacy Policy",e.str29={"-2":"账号已被封禁","-1":"服务器已满人，请前往新服游玩",201:"登录校验失败"},e}();__reflect(LangEntry.prototype,"LangEntry");var Main=function(e){function t(){var r=e.call(this)||this;t.self=r,r.layerWinBg=new eui.UILayer,r.layerWinBg.touchEnabled=!1,r.addChild(r.layerWinBg),r.layerWin=new eui.UILayer,r.layerWin.touchEnabled=!1,r.addChild(r.layerWin),r.layerWinTop=new eui.UILayer,r.layerWinTop.touchEnabled=!1,r.addChild(r.layerWinTop);var n=egret.MainContext.instance.stage;return n.registerImplementation("eui.IAssetAdapter",new AssetAdapter),n.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),egret.Capabilities.isMobile||(n.orientation=egret.OrientationMode.AUTO),RES.setMaxLoadingThread(6),egret.ImageLoader.crossOrigin="anonymous",window.alert||(window.alert=function(e){console.log(e)}),r.start(),r}return __extends(t,e),t.prototype.start=function(){window.hosts&&EntranceParam.setKeyValue("hosts",window.hosts);var e;e=window.entryHosts?window.entryHosts:EntranceParam.urlParam.hosts.replace("resource","entrance"),EntranceParam.setKeyValue("entryHosts",e),window.loginJson=void 0!=window.loginJson?window.loginJson:"login.json";var t=window.qdId&&window.qdId.toString();t&&EntranceParam.setKeyValue("appid",t);var r=window.pfId&&window.pfId.toString(),n=window.platform=this.getLoginPf(r);console.log("pfId:"+n.pfId),n.start(this)},t.prototype.getLoginPf=function(e){var t,r=window.password||egret.getOption("password");return r?("123456"==r?t=new PlatFormQuickHT:"111222"==r?t=new PlatFormQuickNW:"111111"==r&&(t=new PlatFormNW,EntranceParam.setKeyValue("pf",e),EntranceParam.setKeyValue("pfid",PfId.topfid[e]||0)),t.pfId=e,t.pfPHP=this.getPfPHP(e),t.domain=this.getPf(e).domain):t=this.getPf(e),t},t.prototype.getPf=function(e){var t,r=window.xyxType;if(r)switch(r){case XYXType.hw:t=new PlatFormHwh5XYX;break;case XYXType.oppo:t=new PlatFormOPPOXYX;break;case XYXType.vivo:t=new PlatFormVIVOXYX;break;case XYXType.xiaomi:t=new PlatFormXiaomiXYX;break;case XYXType.uc:t=new PlatFormUCXYX;break;case XYXType.quick:t=new PlatFormQuickH5;break;case XYXType.quickXiaomi:t=new PlatFormQuickH5Xiaomi;break;case XYXType.mlaz:t=new PlatFormMLAZCom;break;case XYXType.qtt:t=new PlatFormQTTH5;break;case XYXType.baidu:t=new PlatFormMLBAIDUXYX;break;case XYXType.BeginIOS:t=new PlatFormBeginIOS;break;case XYXType.QuickHw:t=new PlatFormPlatFormQuickHw;break;case XYXType.LeiDian:t=new PlatFormPlatFormLeiDianAz;break;case XYXType.XiaoQiAz:t=new PlatFormXiaoQiAz}else switch(e){case PfId.zy:case PfId.mk:case PfId.mkhf:case PfId.mkhf01:case PfId.mkhf02:case PfId.sdw:case PfId.afhf:case PfId.xiaoqi:case PfId.zy2daw:case PfId.zy2zq:t=new PlatFormZSMK2;break;case PfId.zs:t=new PlatFormZSH5;break;case PfId.xw360h5:t=new PlatFormXWH5;break;case PfId.xw360:t=new PlatFormXW360;break;case PfId.youjia:t=new PlatFormZSMKYJ;break;case PfId.ddt:case PfId.ddth5v2:t=new PlatFormZSMK2DDT;break;case PfId.wanba:t=new PlatFormZSMKWANBA;break;case PfId.zy2xiaoqi:t=new PlatFormZSMK2Xiaoqi;break;case PfId.wxxyx:case PfId.zy2mr:case PfId.zy2mrah:t=new PlatFormZSMK2WXXYX;break;case PfId.zy2jh:t=new PlatFormZSMK2WXXYXJH;break;case PfId.zy2zg:t=new PlatFormZGWXXYX;break;case PfId.wxmzw:case PfId.wxys:case PfId.wxbl:case PfId.zy2hjy:t=new PlatFormZSMK2WXXYXH5;break;case PfId.qqxyx:t=new PlatFormZSMK2QQXYX;break;case PfId.baiduxyx:t=new PlatFormZSMK2BAIDUXYX;break;case PfId.oppoxyx:t=new PlatFormZSMK2OPPOXYX;break;case PfId.vivoxyx:t=new PlatFormZSMK2VIVOXYX;break;case PfId.uc:case PfId.zy2qlduc:t=new PlatFormZSMK2UC;break;case PfId.twios:t=new PlatFormTWIOS;break;case PfId.twaz:t=new PlatFormTWAndroid;break;case PfId.twweb:t=new PlatFormTWWeb;break;case PfId.twf1:t=new PlatFormTWF1;break;case PfId.oppoxytx:t=new PlatFormOPPOXYX;break;case PfId.xiaomi:t=new PlatFormYXYMFXMKYXH5;break;case PfId.xiaomixytx:t=new PlatFormXYTXXMKYX("2882303761518683582");break;case PfId.quick:t=new PlatFormYXYMFQuickH5("97746207311317732396938421066606","47009072");break;case PfId.quickreview:t=new PlatFormYXYMFQuickH5("13079200032478657031629540710332","74967977");break;case PfId.azh5:t=new PlatFormMLAZ(377);break;case PfId.azh5zzzh:t=new PlatFormMLAZ(378);break;case PfId.azh5tszj:t=new PlatFormMLAZ(381,"bg_"+PfId.azh5tszj+".jpg");break;case PfId.hwh5:t=new PlatFormYXYMFHwh5;break;case PfId.hwh5xytx:t=new PlatFormYXYMFHwhh5xytx;break;case PfId.hwsnqmt:t=new PlatFormYXYMFHwhh5snqmt;break;case PfId.hyhf:t=new PlatFormHYAZ("1");break;case PfId.hyhfhb:t=new PlatFormHYAZ("2");break;case PfId.hyhfios:t=new PlatFormHYIOS("3");break;case PfId.zy2yw:t=new PlatFormYWH5;break;case PfId.zy2ywios:case PfId.zy2ywios2:t=new PlatFormYWIOSWeb;break;case PfId.zy2hwywios:t=new PlatFormYwYingwenIos;break;case PfId.zy2ywaz:t=new PlatFormYwAz;break;case PfId.zy2hhtd:t=new PlatFormHHTDWXXYX;break;case PfId.zy2hhtdh5:t=new PlatFormHHTDH5;break;case PfId.baiduh5:t=new PlatFormZSMK2BAIDUH5;break;case PfId.zy2gp:t=new PlatFormZSMK2GPH5;break;case PfId.zy2xy:t=new PlatFormXYQQXYX;break;case PfId.zy2ky:t=new PlatFormKYH5;break;case PfId.zy2bl:t=new PlatFormBLH5;break;case PfId.zy2qmios:t=new PlatFormQuanMingIos;break;case PfId.zy2zhangyoudouyin:t=new PlatFormZhangyouAzDouyin;break;case PfId.zyyxaz:case PfId.zyyx:t=new PlatFormZYYXAZ;break;case PfId.zyyxios:t=new PlatFormZYYXIOS;break;case PfId.zymc:t=new PlatFormZYYXAZMC;break;case PfId.zyyxtest:t=new PlatFormZYYXAZ;break;case PfId.zyyxweb:t=new PlatFormZYYXWeb;break;case PfId.zyyxmj:case PfId.zy2tw:case PfId.zy2twtest:t=new PlatFormZYYXMJH5;break;case PfId.zyyxmfh5:t=new PlatFormZYYXMFH5;break;case PfId.zyyxmfaz:t=new PlatFormZYYXMFAZ;break;case PfId.zyyxzj:case PfId.zyyxzjv2:t=new PlatFormZYYXZJWeb;break;case PfId.zy2hw:t=new PlatFormHWAzGoogle;break;case PfId.zy2hwos:t=new PlatFormHWAzOne;break;case PfId.zy2hwsam:t=new PlatFormHWAzSam;break;case PfId.zy2hwapple:t=new PlatFormHWIos;break;case PfId.zy2hwh5:t=new PlatFormHWH5;break;case PfId.zy2hwtest:t=new PlatFormHWH5;break;case PfId.zyen:case PfId.zyentest:t=new PlatFormYingwenAZ;break;case PfId.zyenh5:t=new PlatFormYingwenH5;break;case PfId.zyenios:t=new PlatFormYingwenIOS;break;case PfId.zy2xx:t=new PlatFormXxYingwenAZ;break;case PfId.zy2enjy:t=new PlatFormYingWenJunYaoAZ;break;case PfId.zy2enjyzszz:t=new PlatFormYingWenJunYaoZszzAZ;break;case PfId.zy2russia:case PfId.zy2russiatest:t=new PlatFormEwenH5;break;case PfId.zy2awy:t=new PlatFormAwyH5;break;case PfId.zy2jhzk:t=new PlatformJhzkAz;break;case PfId.zy2saga:t=new PlatFormYingwenGHG;break;case PfId.zy2facebook:t=new PlatformYingwenIG;break;case PfId.zy2steam:case PfId.zy2epic:t=new PlatformYingwenWP;break;case"":case void 0:case"64":t=new PlatFormNW;break;default:t=new PlatFormWW}return t.pfId=e,t.pfPHP=this.getPfPHP(e),t},t.prototype.getPfPHP=function(e){switch(e){case PfId.zyyxaz:case PfId.zyyxios:case PfId.zyyxweb:e=PfId.zyyx;break;case PfId.oppoxyx:case PfId.vivoxyx:case PfId.uc:case PfId.baiduxyx:e=PfId.qqxyx;break;case PfId.wanba:e=PfId.mkhf;break;case PfId.hyhfhb:case PfId.hyhfios:e=PfId.hyhf;break;case PfId.zyenh5:e=PfId.zyen}return e},t}(eui.UILayer);__reflect(Main.prototype,"Main"),window.Main=Main;var MCEntry=function(e){function t(){var t=e.call(this)||this;return t.startTick=0,t.rate=1,t.dir=0,t._scaleX=1,t._scaleY=1,t.jsonScaleX=1,t.jsonScaleY=1,t.hasSetVisibleFalse=!1,t}return __extends(t,e),t.prototype.playFile=function(e,t,r,n){void 0===t&&(t=1),void 0===r&&(r=null),void 0===n&&(n=!0),this.startTick=egret.getTimer(),this.completeCallback=r,this.playCount=t,this.isAutoRemove=n,this.hasSetVisibleFalse=!1,this.name==e&&this.texture&&this.texture.bitmapData?this.createBody():this.loadAndPlay(e)},t.prototype.loadAndPlay=function(e){var t=this;this.name=e,this.jsonData=null,this.texture=null;var r=this.getJSONname(this.name),n=this.getPNGname(this.name);RES.getResByUrl(r,function(r){t.name==e&&r&&(t.jsonData=r,t.createBody())},this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(n,function(r){t.name==e&&r&&(t.texture=r,t.createBody())},this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.createBody=function(){if(this.jsonData&&this.texture){var e=this.getPNGname(this.name);this.movieClipData=this.getMovieClipData(this.name),t.oldRate[e]||(t.oldRate[e]=this.movieClipData.frameRate),this.frameRate=t.oldRate[e]*this.rate>>0,this.setJsonScaleX((this.jsonData.scaleX||100)/100),this.setJsonScaleY((this.jsonData.scaleY||100)/100);var r,n=egret.getTimer()-this.startTick;if(this.playCount>0){var o=this.playTime/this.playCount;n%=o,r=n>100?Math.min(Math.floor(n/o*this.totalFrames),1):1}else r=1;if(this.gotoAndPlay(r,this.playCount),this.visible=!this.hasSetVisibleFalse,this.playCount>0){var a=this.playTime*this.playCount-n;a>0?setTimeout(this.playComp,a):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},t.prototype.$setVisible=function(t){e.prototype.$setVisible.call(this,t),this.hasSetVisibleFalse=!t},t.prototype.getPNGname=function(e){return e+".png"},t.prototype.getJSONname=function(e){return e+".json"},t.prototype.getMovieClipData=function(e){var r=e.split("/"),n=r.pop();return t.factory.mcDataSet=this.jsonData,t.factory.texture=this.texture,t.factory.generateMovieClipData(n)},t.prototype.playComp=function(){this.isAutoRemove&&this.parent.removeChild(this),this.completeCallback&&this.completeCallback()},Object.defineProperty(t.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),t.prototype.clearComFun=function(){this.completeCallback=null},t.prototype.continuePlay=function(){this.totalFrames&&(this.currentFrame+1<this.totalFrames?this.gotoAndPlay(this.currentFrame+1,this.playCount):this.gotoAndPlay(1,this.playCount))},Object.defineProperty(t.prototype,"fullName",{get:function(){return this.name+".png"},enumerable:!0,configurable:!0}),t.prototype.hasRes=function(e){return RES.hasRes(e+".json")||RES.hasRes(e+".png")},t.prototype.$setScaleX=function(t){this._scaleX=t,e.prototype.$setScaleX.call(this,this.getScaleX())},t.prototype.$setScaleY=function(t){this._scaleY=t,e.prototype.$setScaleY.call(this,this.getScaleY())},t.prototype.getScaleX=function(){return this.getSign()*this._scaleX*this.jsonScaleX},t.prototype.getScaleY=function(){return this._scaleY*this.jsonScaleY},t.prototype.getSign=function(){return this.dir>=5?-1:1},t.prototype.setJsonScaleX=function(t){this.jsonScaleX=t||1,e.prototype.$setScaleX.call(this,this.getScaleX())},t.prototype.setJsonScaleY=function(t){this.jsonScaleY=t||1,e.prototype.$setScaleY.call(this,this.getScaleY())},t.prototype.reset=function(){this.clearComFun(),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.jsonScaleX=1,this.jsonScaleY=1,this.dir=0,this.alpha=1,this.rotation=0,this.filters=[],this.hasSetVisibleFalse=!1,this.stop()},t.clearCache=function(){this.factory.clearCache()},t.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r),this.reload()},t.prototype.reload=function(){this.hasSetVisibleFalse||!this.name||this.texture&&this.texture.bitmapData||this.loadAndPlay(this.name)},t.oldRate={},t.func=function(){var e=new egret.MovieClipDataFactory;return e.enableCache=!1,e},t.factory=t.func(),t}(egret.MovieClip);__reflect(MCEntry.prototype,"MCEntry"),window.MCEntry=MCEntry;var ResEntrance=function(){function e(){}return e.getResSource=function(e,t){void 0===t&&(t=!0);var r=EntranceParam.urlParam.entryHosts+"icon/"+e;return t&&(this.resDic[r]=1),r},e.getResEff=function(e,t){void 0===t&&(t=!0);var r=EntranceParam.urlParam.entryHosts+"icon/eff/"+e;return t&&(this.resDic[r]=1),r},e.destroyRes=function(){for(var e in this.resDic){RES.destroyRes(e);this.resDic[e]&&delete this.resDic[e]}},e.resDic={},e}();__reflect(ResEntrance.prototype,"ResEntrance"),window.ResEntrance=ResEntrance;var ResUtil=function(){function e(){this.configCaller=new CallerRes(null,null),this.isConfigLoading=!1,this.groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResError,this)}return e.ins=function(){return this._instance||(this._instance=new e)},e.prototype.loadConfig=function(e,t,r,n){this.isConfigLoading?console.log("egret配置文件加载中,不可重复加载"):(RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.configCaller.func=r,this.configCaller.obj=n,RES.loadConfig(e,t),this.isConfigLoading=!0)},e.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.configCaller.call(),this.configCaller.reset()},e.prototype.loadGroup=function(e,t,r,n,o){if(void 0===o&&(o=3),this.groups[e]){var a=this.groups[e];a.func=t,a.funcProgress=r,a.obj=n,a.maxErrCount=o}else this.groups[e]=new CallerRes(t,r,n,o);RES.loadGroup(e)},e.prototype.onResComplete=function(e){var t=e.groupName;if(this.groups[t]){var r=this.groups[t];r.call(),r.reset(),delete this.groups[t]}},e.prototype.onResProgress=function(e){var t=e.groupName;this.groups[t]&&this.groups[t].callProgress(e.itemsLoaded,e.itemsTotal,e.resItem.name)},e.prototype.onResError=function(e){var t=this.groups[e.groupName];if(t.addError(),t.isErrorMax()){for(var r=RES.getGroupByName(e.groupName),n=[],o=0,a=r;o<a.length;o++){var i=a[o];i.data||n.push(i.name)}for(var s="",c=0,l=n;c<l.length;c++){var u=l[c];s+=u+","}this.onResComplete(e)}else RES.loadGroup(e.groupName)},e}();__reflect(ResUtil.prototype,"ResUtil");var CallerRes=function(){function e(e,t,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=3),this.errCount=0,this.maxErrCount=3,this.func=e,this.obj=r,this.funcProgress=t,this.maxErrCount=n}return e.prototype.isSame=function(e,t){return this.func==e&&this.obj==t},e.prototype.call=function(){if(this.func){if(!this.obj)return this.func();this.func.call(this.obj)}},e.prototype.callProgress=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.funcProgress&&(this.obj?(r=this.funcProgress).call.apply(r,[this.obj].concat(e)):this.funcProgress.apply(this,e));var r},e.prototype.addError=function(){this.errCount++},e.prototype.isErrorMax=function(){return this.errCount>=this.maxErrCount},e.prototype.reset=function(){this.func=null,this.obj=null,this.funcProgress=null,this.errCount=0,this.maxErrCount=3},e}();__reflect(CallerRes.prototype,"CallerRes"),window.CallerRes=CallerRes;var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,r,n){function o(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),r.call(n))}var i=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,r){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},i)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(c,function(r){window.JSONParseClass.setData(r),egret.callLater(function(){t.call(n,generateJSON.paths[e])},i)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var LoginDebugWin=function(e){function t(){var t=e.call(this)||this;return t.group0=new eui.Group,t.group1=new eui.Group,t.group2=new eui.Group,t.group3=new eui.Group,t.isShowFPS=!1,t.imgLoaderTitle=new egret.ImageLoader,t.imgLoaderBg=new egret.ImageLoader,t}return __extends(t,e),t.prototype.initUI1=function(){this.width=720,this.height=1280,this.left=0,this.right=0,this.imgBg=new eui.Image,this.imgBg.source="",this.imgBg.left=0,this.imgBg.right=0,this.imgBg.top=0,this.imgBg.bottom=0,this.addChild(this.imgBg),this.group1.width=this.width,this.group1.y=10,this.group1.touchEnabled=!1,this.group2.touchEnabled=!1,this.group0.width=this.width,this.group0.touchEnabled=!1,this.group0.touchEnabled=!1,this.addChild(this.group0),this.group0.horizontalCenter=0,this.addChild(this.group1),this.group1.horizontalCenter=0,this.group1.addChild(this.group2),this.addChild(this.group3),this.group1.addChild(this.group3),this.imgLogo=this.createEuiImage(this.group0,"",50,200),this.selectServer=this.createEuiLabelText(this.group2,"服务器:",10,10,20),this.selectRes=this.createEuiLabelText(this.group2,"资源:",10,37,20),this.selectClient=this.createEuiLabelText(this.group2,"客户端",10,63,20);var e=new egret.Sprite;e.graphics.beginFill(47103,.5),e.graphics.drawRect(0,0,200,50),e.graphics.endFill(),e.x=140,e.y=0,this.group3.addChild(e);var t=new egret.Sprite;t.graphics.beginFill(47103,1),t.graphics.drawRect(0,0,100,40),t.graphics.endFill(),t.x=185,t.y=70,this.group3.addChild(t),this.input=this.createEuiTextInput(this.group3,150,10,241,43);var r=this.createEuiLabelText(this.group3,"游戏账号：",0,10,30);r.textFlow=this.addColorTF("游戏账号：",16777215),this.lbIntoGame=this.createEuiLabelText(this.group3,"进入游戏",195,80,20),this.lbIntoGame.textFlow=this.addColorTF("进入游戏",16777215),this.lbSkillEditor=this.createEuiLabelText(this.group2,"技能编辑",210,228,20),this.lbSkillEditor.textFlow=this.addColorTF(this.addUnderLine("技能编辑"),5949490),this.lbLabelEditor=this.createEuiLabelText(this.group2,"文本编辑",340,228,20),this.lbLabelEditor.textFlow=this.addColorTF(this.addUnderLine("文本编辑"),5949490),this.lbShowFps=this.createEuiLabelText(this.group2,"显示FPS",450,228,20),this.lbShowFps.textFlow=this.addColorTF(this.addUnderLine("显示FPS"),5949490),this.lbBack=this.createEuiLabelText(this.group2,"返回",550,228,20),this.lbBack.textFlow=this.addColorTF(this.addUnderLine("返回"),5949490);var n=this.createEuiLabelText(this.group1,"健康游戏忠告",350,1020,20);n.horizontalCenter=0;var o=this.createEuiLabelText(this.group1,"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。\r\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",50,1050,20);o.horizontalCenter=0;this.createEuiLabelText(this.group2,"服务器列表:",10,267,20),this.createEuiLabelText(this.group2,"资源列表:",210,267,20),this.createEuiLabelText(this.group2,"客户端列表",390,267,20);this.serverList=new eui.List,this.serverList.x=10,this.serverList.y=299,this.serverList.itemRenderer=LoginTextItem,this.resList=new eui.List,this.resList.x=210,this.resList.y=299,this.resList.itemRenderer=LoginTextItem,this.clientList=new eui.List,this.clientList.x=390,this.clientList.y=299,this.clientList.itemRenderer=LoginTextItem,this.group2.addChild(this.serverList),this.group2.addChild(this.resList),this.group2.addChild(this.clientList)},t.prototype.updateStatsu=function(){var e=void 0==window.showurl||1==window.showurl;this.group2.visible=e,e?(this.group3.x=10,this.group3.y=100):(this.group3.x=120,this.group3.y=450)},t.prototype.open=function(t,r,n){var o=this;void 0===r&&(r=null),void 0===n&&(n=null),e.prototype.open.call(this),this.data=t,this.fun=r,this.funObj=n,this.initUI1(),this.addClickE(this.lbIntoGame,this.onEnterClick),this.addClickE(this.lbSkillEditor,this.onSkillEdiorClick),this.addClickE(this.lbLabelEditor,this.onLabelEdiorClick),this.addClickE(this.lbBack,this.onBackClick),this.addClickE(this.lbShowFps,this.onBackShowFPSClick),this.addItemTapE(this.serverList,this.onServerListClick),this.addItemTapE(this.resList,this.onResClick),this.addItemTapE(this.clientList,this.onClientClick),this.imgLoaderBg.addEventListener(egret.Event.COMPLETE,this.onImgBgLoad,this),this.imgLoaderTitle.addEventListener(egret.Event.COMPLETE,this.onImgTitleLoad,this),this.serverList.dataProvider=new eui.ArrayCollection(this.data.serverList),this.resList.dataProvider=new eui.ArrayCollection(this.data.resList),this.clientList.dataProvider=new eui.ArrayCollection(this.data.clientList);var a=setTimeout(function(){o.onSelectServer(),o.onSelectRes(),o.onSelectClient(),clearTimeout(a)},500),i=localStorage[location.href+"server"],s=localStorage[location.href+"res"],c=this.data.serverList[i]||this.data.serverList[0],l=this.data.resList[s]||this.data.resList[0],u=this.getCurClient();this.selectServer.text="服务器:"+c,this.selectRes.text="资源:"+l,this.selectRes.text="客户端:"+u,this.input.text=localStorage[location.href+"user"]||EntranceParam.urlParam.user,c&&this.setServer(c,i),l&&this.setRes(l,s),u&&this.setClient(u),this.updateStatsu()},t.prototype.close=function(){e.prototype.close.call(this),this.imgLoaderBg.addEventListener(egret.Event.COMPLETE,this.onImgBgLoad,this),this.imgLoaderTitle.addEventListener(egret.Event.COMPLETE,this.onImgTitleLoad,this)},t.prototype.onSelectServer=function(){for(var e=this.data.serverList[localStorage[location.href+"server"]],t=this.serverList.numElements,r=0;t>r;r++){var n=this.serverList.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},t.prototype.onSelectRes=function(){for(var e=this.data.resList[localStorage[location.href+"res"]],t=this.resList.numElements,r=0;t>r;r++){var n=this.resList.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},t.prototype.onSelectClient=function(){for(var e=this.getCurClient(),t=this.clientList.numElements,r=0;t>r;r++){var n=this.clientList.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},t.prototype.onServerListClick=function(e){var t=e.itemRenderer,r=e.item;this.setServer(r,e.itemIndex);for(var n=this.serverList.numElements,o=0;n>o;o++){var a=this.serverList.getElementAt(o);a&&a.isSelect(!1)}t.isSelect(!0)},t.prototype.setServer=function(e,t){var r=e.split("|"),n=r[1],o=r[2].split(":")[0],a=r[2].split(":")[1];EntranceParam.setKeyValue("srvid",n),EntranceParam.setKeyValue("srvaddr",o),EntranceParam.setKeyValue("srvport",a),this.selectServer.text="服务器:"+e,localStorage[location.href+"server"]=t},t.prototype.onResClick=function(e){var t=e.itemRenderer,r=e.item;this.setRes(r,e.itemIndex);for(var n=this.resList.numElements,o=0;n>o;o++){var a=this.resList.getElementAt(o);a&&a.isSelect(!1)}t.isSelect(!0)},t.prototype.setRes=function(e,t){var r=e.split("|"),n=r[1];EntranceParam.setKeyValue("hosts",n),this.selectRes.text="资源:"+e,localStorage[location.href+"res"]=t,this.imgLoaderBg.load(EntranceParam.urlParam.entryHosts+"icon/loginbg_nw.jpg")},t.prototype.onImgBgLoad=function(e){var t=e.currentTarget.data,r=new egret.Texture;r.bitmapData=t,this.imgBg.source=r},t.prototype.onImgTitleLoad=function(e){var t=e.currentTarget.data,r=new egret.Texture;r.bitmapData=t,this.imgLogo.source=r},t.prototype.onClientClick=function(e){var t=e.itemRenderer,r=e.item;this.setClient(r);for(var n=this.clientList.numElements,o=0;n>o;o++){var a=this.clientList.getElementAt(o);a&&a.isSelect(!1)}t.isSelect(!0);var i=r.split("|"),s=i[1];location.href=s},t.prototype.setClient=function(e){var t=e.split("|");t[1];this.selectClient.text="客户端:"+e},t.prototype.onEnterClick=function(e){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i,s,c,l,u,p,h,d,m;return __generator(this,function(g){switch(g.label){case 0:return e=this.input.text,EntranceParam.setKeyValue("user",e),localStorage[location.href+"user"]=e,window.v?(EntranceParam.setKeyValue("v",window.v),[4,window.platform.getHttp(window.platform.getVerDataUrl(),egret.HttpResponseType.ARRAY_BUFFER)]):[3,3];case 1:return t=g.sent(),r=new JSZip(t),n=r.file(EntranceParam.urlParam.v+".json"),EntranceParam.verData=JSON.parse(n.asText()),o=""+window.platform.domain+window.platform.pfPHP+"/login/getlogininfo?openId="+EntranceParam.urlParam.user+"&serverId="+EntranceParam.urlParam.srvid,[4,window.platform.getHttp(o,egret.HttpResponseType.TEXT)];case 2:for(a=g.sent(),a=a.replace(/[\s\\]/g,""),i=JSON.parse(a),s=i.flashUrl,c=s.split("?")[1],l=c.split("&"),u={},p=0;p<l.length;p++)h=l[p].split("="),d=h[0],m=h[1],u[d]=m;EntranceParam.setKeyValue("spverify",u.spverify),g.label=3;case 3:return this.fun.call(this.funObj),this.close(),[2]}})})},t.prototype.onSkillEdiorClick=function(e){this.close(),window.Server&&window.Server.loginSkillEditor&&window.Server.loginSkillEditor()},t.prototype.onLabelEdiorClick=function(e){this.close(),window.Server&&window.Server.loginSkillEditor&&window.Server.loginSkillEditor()},t.prototype.onBackClick=function(e){window.history.back()},t.prototype.onBackShowFPSClick=function(e){this.onDisplayFPS()},t.prototype.onDisplayFPS=function(){this.isShowFPS=!this.isShowFPS;var e=document.querySelectorAll(".egret-player"),t=e[0],r=t["egret-player"].player,n={bgAlpha:"0.3",display:"none",size:22,textColor:"0xffffff",x:0,y:0};r.displayFPS(this.isShowFPS,!1,!1,n),document.body.childNodes[5].style.visibility=this.isShowFPS?"visible":"hidden",this.lbShowFps.textFlow=this.addColorTF(this.addUnderLine(this.isShowFPS?"隐藏FPS":"显示FPS"),5949490)},t.prototype.getCurClient=function(){for(var e=0;e<this.data.clientList.length;e++){var t=this.data.clientList[e];if(t.indexOf(location.href)>-1)return t}return"自己"},t.openCheck=function(){return!0},t}(BaseWinEntry);__reflect(LoginDebugWin.prototype,"LoginDebugWin");var LoginDebugWin64=function(e){function t(){var t=e.call(this)||this;return t.group0=new eui.Group,t.group1=new eui.Group,t.group2=new eui.Group,t.group3=new eui.Group,t.isShowFPS=!1,t.imgLoaderBg=new egret.ImageLoader,t}return __extends(t,e),t.prototype.initUI1=function(){this.width=720,this.height=1280,this.left=0,this.right=0,this.imgBg=new eui.Image,this.imgBg.source="",this.imgBg.left=0,this.imgBg.right=0,this.imgBg.top=0,this.imgBg.bottom=0,this.addChild(this.imgBg),this.group1.width=this.width,this.group1.y=10,this.group1.touchEnabled=!1,this.group2.touchEnabled=!1,this.group0.width=this.width,this.group0.touchEnabled=!1,this.group0.touchEnabled=!1,this.addChild(this.group0),this.group0.horizontalCenter=0,this.addChild(this.group1),this.group1.horizontalCenter=0,this.group1.addChild(this.group2),this.addChild(this.group3),this.group1.addChild(this.group3),this.imgLogo=this.createEuiImage(this.group0,"",50,200),this.selectServer=this.createEuiLabelText(this.group2,"服务器:",10,10,20),this.selectRes=this.createEuiLabelText(this.group2,"资源:",10,37,20),this.selectClient=this.createEuiLabelText(this.group2,"客户端",10,63,20);var e=new egret.Sprite;e.graphics.beginFill(47103,.5),e.graphics.drawRect(0,0,200,50),e.graphics.endFill(),e.x=140,e.y=0,this.group3.addChild(e);var t=new egret.Sprite;t.graphics.beginFill(47103,1),t.graphics.drawRect(0,0,100,40),t.graphics.endFill(),t.x=185,t.y=70,this.group3.addChild(t),this.input=this.createEuiTextInput(this.group3,150,10,241,43);var r=this.createEuiLabelText(this.group3,"游戏账号：",0,10,30);r.textFlow=this.addColorTF("游戏账号：",16777215),this.lbIntoGame=this.createEuiLabelText(this.group3,"进入游戏",195,80,20),this.lbIntoGame.textFlow=this.addColorTF("进入游戏",16777215);this.createEuiLabelText(this.group2,"服务器列表:",10,267,20),this.createEuiLabelText(this.group2,"资源列表:",210,267,20),this.createEuiLabelText(this.group2,"客户端列表",390,267,20);
this.serverList=new eui.List,this.serverList.x=10,this.serverList.y=299,this.serverList.itemRenderer=LoginTextItem,this.resList=new eui.List,this.resList.x=210,this.resList.y=299,this.resList.itemRenderer=LoginTextItem,this.clientList=new eui.List,this.clientList.x=390,this.clientList.y=299,this.clientList.itemRenderer=LoginTextItem,this.group2.addChild(this.serverList),this.group2.addChild(this.resList),this.group2.addChild(this.clientList)},t.prototype.updateStatsu=function(){var e=void 0==window.showurl||1==window.showurl;this.group2.visible=e,e?(this.group3.x=10,this.group3.y=100):(this.group3.x=120,this.group3.y=450)},t.prototype.open=function(t,r,n){var o=this;void 0===r&&(r=null),void 0===n&&(n=null),e.prototype.open.call(this),this.data=t,this.fun=r,this.funObj=n,this.initUI1(),this.addClickE(this.lbIntoGame,this.onEnterClick),this.addItemTapE(this.serverList,this.onServerListClick),this.addItemTapE(this.resList,this.onResClick),this.addItemTapE(this.clientList,this.onClientClick),this.imgLoaderBg.addEventListener(egret.Event.COMPLETE,this.onImgBgLoad,this),this.serverList.dataProvider=new eui.ArrayCollection(this.data.serverList),this.resList.dataProvider=new eui.ArrayCollection(this.data.resList),this.clientList.dataProvider=new eui.ArrayCollection(this.data.clientList);var a=setTimeout(function(){o.onSelectServer(),o.onSelectRes(),o.onSelectClient(),clearTimeout(a)},500),i=localStorage[location.href+"server"],s=localStorage[location.href+"res"],c=this.data.serverList[i]||this.data.serverList[0],l=this.data.resList[s]||this.data.resList[0],u=this.getCurClient();this.selectServer.text="服务器:"+c,this.selectRes.text="资源:"+l,this.selectRes.text="客户端:"+u,this.input.text=localStorage[location.href+"user"]||EntranceParam.urlParam.user,c&&this.setServer(c,i),l&&this.setRes(l,s),u&&this.setClient(u),this.updateStatsu()},t.prototype.close=function(){e.prototype.close.call(this),this.imgLoaderBg.addEventListener(egret.Event.COMPLETE,this.onImgBgLoad,this)},t.prototype.onSelectServer=function(){for(var e=this.data.serverList[localStorage[location.href+"server"]],t=this.serverList.numElements,r=0;t>r;r++){var n=this.serverList.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},t.prototype.onSelectRes=function(){for(var e=this.data.resList[localStorage[location.href+"res"]],t=this.resList.numElements,r=0;t>r;r++){var n=this.resList.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},t.prototype.onSelectClient=function(){for(var e=this.getCurClient(),t=this.clientList.numElements,r=0;t>r;r++){var n=this.clientList.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},t.prototype.onServerListClick=function(e){var t=e.itemRenderer,r=e.item;this.setServer(r,e.itemIndex);for(var n=this.serverList.numElements,o=0;n>o;o++){var a=this.serverList.getElementAt(o);a&&a.isSelect(!1)}t.isSelect(!0)},t.prototype.setServer=function(e,t){var r=e.split("|"),n=r[1],o=r[2].split(":")[0],a=r[2].split(":")[1];EntranceParam.setKeyValue("srvid",n),EntranceParam.setKeyValue("srvaddr",o),EntranceParam.setKeyValue("srvport",a),this.selectServer.text="服务器:"+e,localStorage[location.href+"server"]=t},t.prototype.onResClick=function(e){var t=e.itemRenderer,r=e.item;this.setRes(r,e.itemIndex);for(var n=this.resList.numElements,o=0;n>o;o++){var a=this.resList.getElementAt(o);a&&a.isSelect(!1)}t.isSelect(!0)},t.prototype.setRes=function(e,t){var r=e.split("|"),n=r[1];EntranceParam.setKeyValue("hosts",n),this.selectRes.text="资源:"+e,localStorage[location.href+"res"]=t,this.imgLoaderBg.load(EntranceParam.urlParam.entryHosts+"icon/loginbg_nw.jpg")},t.prototype.onImgBgLoad=function(e){var t=e.currentTarget.data,r=new egret.Texture;r.bitmapData=t,this.imgBg.source=r},t.prototype.onClientClick=function(e){var t=e.itemRenderer,r=e.item;this.setClient(r);for(var n=this.clientList.numElements,o=0;n>o;o++){var a=this.clientList.getElementAt(o);a&&a.isSelect(!1)}t.isSelect(!0);var i=r.split("|"),s=i[1];location.href=s},t.prototype.setClient=function(e){var t=e.split("|");t[1];this.selectClient.text="客户端:"+e},t.prototype.onEnterClick=function(e){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(n){return e=this.input.text.split("_"),t=parseInt(e[1])||0,r=e[0],EntranceParam.setKeyValue("user",r),localStorage[location.href+"user"]=r,this.fun.call(this.funObj,t),this.close(),[2]})})},t.prototype.getCurClient=function(){for(var e=0;e<this.data.clientList.length;e++){var t=this.data.clientList[e];if(t.indexOf(location.href)>-1)return t}return"自己"},t.openCheck=function(){return!0},t}(BaseWinEntry);__reflect(LoginDebugWin64.prototype,"LoginDebugWin64");var LoginServerData=function(){function e(){this.serverList=[],this.resList=[],this.clientList=[]}return e.prototype.setData=function(e){this.serverList=e.serverList,this.resList=e.resList,this.clientList=e.clientList},Object.defineProperty(e.prototype,"srvid",{get:function(){return this.serverStr.split("|")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srvaddr",{get:function(){return this.serverStr.split("|")[2].split(":")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srvport",{get:function(){return this.serverStr.split("|")[2].split(":")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverStr",{get:function(){return this.serverList[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hosts",{get:function(){return this.resList[0].split("|")[1]},enumerable:!0,configurable:!0}),e}();__reflect(LoginServerData.prototype,"LoginServerData"),window.LoginServerData=LoginServerData;var LoginTextItem=function(e){function t(){var t=e.call(this)||this;return t.label=new eui.Label,t.label.size=20,t.label.width=148,t.label.height=20,t.label.fontFamily="Times",t.width=25,t.height=30,t.addChild(t.label),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.label.text=e},t.prototype.isSelect=function(e){this.label.textColor=e?5949490:16777215},t}(eui.ItemRenderer);__reflect(LoginTextItem.prototype,"LoginTextItem"),window.LoginTextItem=LoginTextItem;var PfId=function(){function e(){}return e.zy="zy",e.mk="mk",e.sdw="sdw",e.wanba="wanba",e.mkhf="mkhf",e.mkhf01="mkhf01",e.mkhf02="mkhf02",e.afhf="afhf",e.xiaoqi="xiaoqi",e.youjia="youjia",e.wxxyx="wxxyx",e.qqxyx="qqxyx",e.oppoxyx="oppoxyx",e.vivoxyx="vivoxyx",e.baiduxyx="baiduxyx",e.baiduh5="baiduh5",e.zy2gp="zy2gp",e.uc="uc",e.zy2qlduc="zy2qlduc",e.wxmzw="wxmzw",e.wxys="wxys",e.wxbl="wxbl",e.zy2hjy="zy2hjy",e.zy2daw="zy2daw",e.zy2zq="zy2zq",e.ddt="ddt",e.ddth5v2="ddth5v2",e.zy2xiaoqi="zy2xiaoqi",e.zs="zs",e.zy2jh="zy2jh",e.zy2mr="zy2mr",e.zy2mrah="zy2mrah",e.zy2zg="zy2zg",e.oppo="oppo",e.oppobc="oppobc",e.vivomg="vivomg",e.xiaomi="xiaomi",e.ucxyx="ucxyx",e.quick="quick",e.quickreview="quickreview",e.azh5="azh5",e.hwh5="hwh5",e.azh5zzzh="azh5zzzh",e.hwh5xytx="hwh5xytx",e.oppoxytx="oppoxytx",e.vivoxytx="vivoxytx",e.xiaomixytx="xiaomixytx",e.oppofsz="oppofsz",e.xiaomifsz="xiaomifsz",e.azh5tszj="azh5tszj",e.oppozszw="oppozszw",e.xiaomizszw="xiaomizszw",e.uczszw="uczszw",e.vivozszw="vivozszw",e.hwsnqmt="hwsnqmt",e.oppoxbkp="oppoxbkp",e.xiaomixbkp="xiaomixbkp",e.oppojjdzs="oppojjdzs",e.opposgqg="opposgqg",e.opposksy="opposksy",e.opposgzc="opposgzc",e.baiduxlj="baiduxlj",e.zy2hhtd="zy2hhtd",e.zy2hhtdh5="zy2hhtdh5",e.zy2xy="zy2xy",e.twios="twios",e.twaz="twaz",e.twweb="twweb",e.twf1="twf1",e.zyyx="zyyx",e.zyyxaz="zyyxaz",e.zymc="zymc",e.zyyxios="zyyxios",e.zyyxtest="zyyxtest",e.zyyxweb="zyyxweb",e.zyyxzj="zyyxzj",e.zyyxzjv2="zyyxzjv2",e.zyyxmj="zyyxmj",e.zyyxmfh5="zyyxmfh5",e.zyyxmfaz="zyyxmfaz",e.zy2tw="zy2tw",e.zy2twtest="zy2twtest",e.hyhf="hyhf",e.hyhfhb="hyhfhb",e.hyhfios="hyhfios",e.zy2yw="zy2yw",e.zy2ywios="zy2ywios",e.zy2ywios2="zy2ywios2",e.zy2hwywios="zy2hwywios",e.zy2ywaz="zy2ywaz",e.zy2ky="zy2ky",e.xw360h5="xw360h5",e.xw360="xw360",e.zy2bl="zy2bl",e.zy2qmios="zy2qmios",e.zy2zhangyoudouyin="zy2zhangyoudouyin",e.zyen="zyen",e.zyenh5="zyenh5",e.zyenios="zyenios",e.zyentest="zyentest",e.zy2xx="zy2xx",e.zy2enjy="zy2enjy",e.zy2enjyzszz="zy2enjyzszz",e.zy2hw="zy2hw",e.zy2hwos="zy2hwos",e.zy2hwsam="zy2hwsam",e.zy2hwapple="zy2hwapple",e.zy2hwh5="zy2hwh5",e.zy2hwtest="zy2hwtest",e.zy2russia="zy2russia",e.zy2russiatest="zy2russiatest",e.zy2awy="zy2awy",e.zy2jhzk="zy2jhzk",e.zy2saga="zy2saga",e.zy2facebook="zy2facebook",e.zy2steam="zy2steam",e.zy2epic="zy2epic",e.topfid={mk:"1",sdw:"2",mkhf:"3",afhf:"4",zy:"5",wxxyx:"6",ddt:"7",qqxyx:"8",ddth5v2:"9",zyyx:"1",oppo:"101",xiaomi:"102",ucxyx:"103",vivomg:"104",quick:"105",oppobc:"106",azh5:"107",azh5zzzh:"108",hwh5:"109",hwh5xytx:"110"},e}();__reflect(PfId.prototype,"PfId"),window.PfId=PfId;var XYXType=function(){function e(){}return e.hw="hw",e.oppo="oppo",e.vivo="vivo",e.xiaomi="xiaomi",e.uc="uc",e.quick="quick",e.quickXiaomi="quickXiaomi",e.mlaz="mlaz",e.qtt="qtt",e.baidu="baidu",e.BeginIOS="BeginIOS",e.QuickHw="QuickHw",e.LeiDian="LeiDian",e.XiaoQiAz="XiaoQiAz",e}();__reflect(XYXType.prototype,"XYXType"),window.XYXType=XYXType;var PfPay=function(){function e(){}return e.h5="",e.wxxyx="wxxyx",e.qqxyx="qqxyx",e.zyen="zyen",e.hwGoogle="hwGoogle",e.hwOne="hwOne",e.hwIos="hwIos",e.hwPc="hwPc",e.hwSam="hwSam",e.ewn="ewn",e.qmsyIos="qmsyIos",e.zyyx="zyyx",e.zyyxzj="zyyxzj",e.zyyxmf="zyyxmf",e.aiweiyou="aiweiyou",e.zy2enjy="zy2enjy",e.zy2enjyzszz="zy2enjyzszz",e.zy2saga="zy2saga",e.zy2qy="zy2qy",e.zy2youwang2="zy2youwang2",e}();__reflect(PfPay.prototype,"PfPay");var QdId=function(){function e(){}return e.xianlai="20061",e.qd20072="20072",e}();__reflect(QdId.prototype,"QdId"),window.QdId=QdId;var LoadGroupType=function(){function e(){}return e.preloadAll="preloadAll",e.preloadConfig="preloadConfig",e.preloadAllXYX="preloadAllXYX",e}();__reflect(LoadGroupType.prototype,"LoadGroupType"),window.LoadGroupType=LoadGroupType;var SceneType=function(){function e(){}return e.vx_type_1089="1089",e.qq_type_3003="3003",e.qq_type_1011="1011",e}();__reflect(SceneType.prototype,"SceneType"),window.SceneType=SceneType;var VerifyDataPHP=function(){function e(){this.code=1,this.msg="",this.data=0,this.isOpenIndulge=0}return e}();__reflect(VerifyDataPHP.prototype,"VerifyDataPHP");var PlatFormNW=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.openSelectServer(),[2]})})},t.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,o;return __generator(this,function(a){switch(a.label){case 0:return e=""+EntranceParam.urlParam.entryHosts+window.loginJson,n=(r=JSON).parse,[4,this.getHttp(e)];case 1:return t=n.apply(r,[a.sent()]),"64"==this.pfId?(this.loginDebugWin=new LoginDebugWin64,this.main.addChild(this.loginDebugWin),o=egret.getDefinitionByName("GameMain64"),window.IGameMain=new o,this.loginDebugWin.open(t,window.IGameMain.login,window.IGameMain)):(this.loginDebugWin=new LoginDebugWin,this.main.addChild(this.loginDebugWin),o=egret.getDefinitionByName("GameMain"),window.IGameMain=new o,this.loginDebugWin.open(t,window.IGameMain.login,window.IGameMain)),[2]}})})},t.prototype.closeSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.loginDebugWin&&(this.loginDebugWin.close(),this.loginDebugWin=null),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return window.IGameMain.showRecharge(e,t),[2]})})},t.prototype.isOpenShare=function(e){e(1)},t.prototype.setShareCallback=function(e){},t.prototype.isOpenFocus=function(e){e(0)},t.prototype.getVerifyInfo=function(e,t){e(0),t(new VerifyDataPHP)},t.prototype.isCustomerBtn=function(e){e(1)},t.prototype.sendService=function(e){e.onSuccessCallback()},t.prototype.isShowRecharge=function(){var e=window.pfId;return e?(e=e.toString(),this.pf||(this.pf=this.main.getPf(e)),this.pf.isShowRecharge()):!0},t.prototype.getPfPay=function(){var e=window.pfId;return e?(e=e.toString(),this.pf||(this.pf=this.main.getPf(e)),this.pf.getPfPay()):""},t.prototype.isShowFBCzfl=function(){window.pfId;if(window.pfId||window.xyxType){var e=window.pfId&&window.pfId.toString();return this.pf||(this.pf=this.main.getPf(e)),this.pf.isShowFBCzfl()}return!1},t.prototype.isShowFBFsfl=function(){window.pfId;if(window.pfId||window.xyxType){var e=window.pfId&&window.pfId.toString();return this.pf||(this.pf=this.main.getPf(e)),this.pf.isShowFBFsfl()}return!1},t.prototype.showShare=function(){e.prototype.showShare.call(this)},t.prototype.getSceneType=function(){return""},t.prototype.roleUp=function(e){},t.prototype.isShowHeibian=function(){return!1},t.prototype.isShowZBJH=function(){var e=window.pfId;return e?(e=e.toString(),this.pf||(this.pf=this.main.getPf(e)),this.pf.isShowZBJH()):!1},t.prototype.isShowLCFL=function(){var e=window.pfId;return e?(e=e.toString(),this.pf||(this.pf=this.main.getPf(e)),this.pf.isShowLCFL()):!1},t.prototype.isShowMrzgSvipWin=function(){var e=window.pfId;return e?(e=e.toString(),this.pf||(this.pf=this.main.getPf(e)),this.pf.isShowMrzgSvipWin()):!0},t.prototype.alert=function(e,t){window.IGameMain?window.IGameMain.alert(e,t):console.log(e)},t.prototype.yingwenAdsInfo=function(e){e&&window.pfId==PfId.zyen&&e(1)},t.prototype.yingwenAdsPlay=function(e){e&&window.pfId==PfId.zyen&&e()},t.prototype.isEnterXyx=function(){return this.pfId?(this.pf||(this.pf=this.main.getPf(this.pfId)),this.pf.isEnterXyx()):!1},t.prototype.isShowXyx=function(){return this.pfId?(this.pf||(this.pf=this.main.getPf(this.pfId)),this.pf.isShowXyx()):!1},t.prototype.isShowXyxCloseBtn=function(){return this.pfId?(this.pf||(this.pf=this.main.getPf(this.pfId)),this.pf.isShowXyxCloseBtn()):!1},t.prototype.getXyxSkin=function(){return this.pfId?(this.pf||(this.pf=this.main.getPf(this.pfId)),this.pf.getXyxSkin()):1},t.prototype.isPassVIP=function(){return 1==window.isPassVIP},t.prototype.isShowPass=function(){return 1==window.isShowPassVIP},t.prototype.isPass2VIP=function(){return 1==window.isPass2VIP},t.prototype.isShowPass2=function(){return 1==window.isShowPass2VIP},t}(PlatFormBase);__reflect(PlatFormNW.prototype,"PlatFormNW"),window.PlatFormNW=PlatFormNW;var PlatFormQuickHT=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e.prototype.init.call(this),[4,this.getHttp(this.getVerUrl())];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,[2]}})})},t.prototype.setVerData=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerDataUrl(),[4,this.getHttp(e,egret.HttpResponseType.ARRAY_BUFFER)];case 1:return t=o.sent(),r=new JSZip(t),n=r.file(EntranceParam.urlParam.v+".json"),EntranceParam.verData=JSON.parse(n.asText()),[2]}})})},t}(PlatFormQuickBase);__reflect(PlatFormQuickHT.prototype,"PlatFormQuickHT"),window.PlatFormQuickHT=PlatFormQuickHT;var PlatFormQuickNW=function(e){function t(){var t=e.call(this)||this;return t.domain="http://loginpayzy.h5eco.com/",t}return __extends(t,e),t.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.openBgWin.call(this),[2]})})},t.prototype.setV=function(e){EntranceParam.setKeyValue("v","")},t}(PlatFormQuickBase);__reflect(PlatFormQuickNW.prototype,"PlatFormQuickNW"),window.PlatFormQuickNW=PlatFormQuickNW;var AwySdkLoginParam=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","gameid","token","fuid","focus","chid"],this.addMineKey("token","user_token")},t}(PlatFormParam);__reflect(AwySdkLoginParam.prototype,"AwySdkLoginParam");var AwySdkReportChatParam=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameid="",t.openid="",t.serverid="",t.accountid="",t.roleid="",t.rolename="",t.channel=0,t.msgcont="",t.time=0,t}return __extends(t,e),t.prototype.init=function(){this.keys=["gameid","openid","serverid","accountid","roleid","rolename","channel","msgcont","time"]},t}(PlatFormParam);__reflect(AwySdkReportChatParam.prototype,"AwySdkReportChatParam");var PlatFormAwyH5=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new AwySdkLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.aiweiyou},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){switch(n.label){case 0:return[4,e.prototype.init.call(this)];case 1:return n.sent(),t=this,this.pfParam.setValueByUrl(window.location.href),window.loadSingleScript("https://cdn.11h5.com/static/js/sdk.min.js",function(){t.sdk=window.AWY_SDK,t.sdk.config(r.pfParam.gameid,function(){console.log("分享成功回调方法")},function(){console.log("支付成功回调方法（仅针对于快捷支付方式有效）")}),t.openGame()}),[2]}})})},t.prototype.createRole=function(e){this.sdk.serverLoginStat({serverid:EntranceParam.urlParam.srvid,newuser:1})},t.prototype.enterGame=function(e){this.sdk.serverLoginStat({serverid:EntranceParam.urlParam.srvid,newuser:0}),this.sdk.shareParams({cp_invite_serverid:EntranceParam.urlParam.srvid,cp_invite_account:EntranceParam.urlParam.openId})},t.prototype.roleUp=function(e){},t.prototype.powerUp=function(e){},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(e?(n=t.actorId+"_"+new Date(t.serverTime).valueOf(),o=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,this.sdk.pay({pid:e.shangpinId,txid:n,userdata:encodeURI(o),product_count:1,serverid:EntranceParam.urlParam.srvid})):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.logout=function(t){e.prototype.logout.call(this,t)},t.prototype.relogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return location&&location.reload(),[2]})})},t.prototype.reload=function(){this.sdk.refresh()},t.prototype.isLiuhai=function(){return e.prototype.isLiuhai.call(this)},t.prototype.channelSvipIconRes=function(e){console.log("channelSvipIconRes:"),this.sdk.checkSVIP(function(t){var r=t.isAdd,n=t.isCPS;n||e(r?ResEntrance.getResSource("aiweiyou_svip.png"):ResEntrance.getResSource("aiweiyou_svip.png"))})},t.prototype.openChannelSvipWin=function(){this.sdk.addSVIP()},t.prototype.isOpenFocus=function(e){e(this.pfParam.chid?-1:+this.pfParam.focus)},t.prototype.showQrCode=function(){this.sdk.showFocus(),console.log("showQrCode:")},t.prototype.isShowYqhl=function(){return!0},t.prototype.requestInviteInfo=function(){if(this.pfParam.cp_invite_account&&this.pfParam.cp_invite_serverid){var e="invite_server_id="+this.pfParam.cp_invite_serverid+"&invite_account="+this.pfParam.cp_invite_account,t=""+this.domain+this.pfPHP+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+e;this.getHttp(t),console.log("requestInviteInfo:",t)}},t.prototype.showShare=function(){this.sdk.showShare(),console.log("主动拉起转发，进入选择通讯录界面1")},t.prototype.checkChat=function(e){e.onSuccessCallback(e.chat_content);var t=7;if(1==e.chat_scene)switch(e.chat_channel){case 1:case 6:t=4;break;case 2:t=5;break;case 3:t=1;break;case 7:t=3;break;default:t=7}else 2==e.chat_scene||3==e.chat_scene||4==e.chat_scene;var r=new AwySdkReportChatParam;r.gameid=this.pfParam.gameid,r.openid=this.pfParam.openId,r.serverid=EntranceParam.urlParam.srvid,r.accountid=this.pfParam.openId,r.roleid=""+e.sender_id,r.rolename=""+e.sender_name,r.channel=t,r.msgcont=""+e.chat_content,r.time=Math.floor((new Date).valueOf()/1e3);var n=""+this.domain+this.pfPHP+"/api?m=player&fn=sendChat&"+r.toParamString();this.getHttp(n)},t}(PlatFormWW);__reflect(PlatFormAwyH5.prototype,"PlatFormAwyH5");var PlatFormHaiWaiAzRoleReportParam1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.isUseEmptyValue=!0,this.keys=["game","mobile","channel","pvc","apkNum","userId","joinTime","loginTime","phoneid","ip"]},t}(PlatFormParam);__reflect(PlatFormHaiWaiAzRoleReportParam1.prototype,"PlatFormHaiWaiAzRoleReportParam1");var PlatFormHaiWaiAzRoleReportParam2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.isUseEmptyValue=!0,this.keys=["game","mobile","channel","pvc","apkNum","serverId","serverName","cpRoleId","extraRoleId","roleName","infoType","userId","roleLTime","roleCTime"]},t}(PlatFormParam);__reflect(PlatFormHaiWaiAzRoleReportParam2.prototype,"PlatFormHaiWaiAzRoleReportParam2");var PlatFormHaiWaiAzRoleReportParam3=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.isUseEmptyValue=!0,this.keys=["game","mobile","channel","pvc","apkNum","callBackInfo","money","cpRoleId","extraRoleId","roleName","serverId","userId","cpOrderId","time","status","paymentName","currency"]},t}(PlatFormParam);__reflect(PlatFormHaiWaiAzRoleReportParam3.prototype,"PlatFormHaiWaiAzRoleReportParam3");var PlatFormHaiWaiAzRoleReportParam=function(){function e(){}return e}();__reflect(PlatFormHaiWaiAzRoleReportParam.prototype,"PlatFormHaiWaiAzRoleReportParam");var PlatFormHaiWaiAzRechargeParam=function(){function e(){}return e}();__reflect(PlatFormHaiWaiAzRechargeParam.prototype,"PlatFormHaiWaiAzRechargeParam");var PlatFormHaiWaiAzRechargeOrderParam=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["game_guid","subject","game_price","notify_id","game_access_version","game_orderid","game_area","game_level","game_role_id","game_role_name","extends_info_data"]},t}(PlatFormParam);__reflect(PlatFormHaiWaiAzRechargeOrderParam.prototype,"PlatFormHaiWaiAzRechargeOrderParam");var PlatFormHaiWaiAzLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["tokenkey"]},t}(PlatFormParam);__reflect(PlatFormHaiWaiAzLoginParam.prototype,"PlatFormHaiWaiAzLoginParam");var PlatFormHaiWaiAz=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new PlatFormHaiWaiAzLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zy2qy},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,egret.ExternalInterface.call("init",""),console.log("英文HaiWaiAz"),egret.ExternalInterface.addCallback("X7sySDKSMInitListenerOnSuccess",function(e){console.log("初始化SDK成功----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("X7sySDKSMInitListenerOnFail",function(e){console.log("初始化SDK失败----------------------------"+e)}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLoginSuccess",function(e){console.log("登录成功----------------------------"+e),t.pfParam.tokenkey=e,t.onSuccess()}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLoginFailed",function(e){console.log("登录失败----------------------------"+e)}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLoginCancell",function(e){console.log("取消登录----------------------------"+e)}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLogoutSuccess",function(e){console.log("退出----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("X7sySDKSMPayListenerOnPaySuccess",function(e){console.log("支付成功----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKSMPayListenerOnPayFailed",function(e){console.log("支付失败----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKSMPayListenerOnPayCancell",function(e){console.log("支付取消----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKH5GameLog",function(e){console.log("日志----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKOnBackPressed",function(e){console.log("backPress");var n=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(r.serverGgonggaoWin.close(),n=!0),!n&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),n=!0),n||(n=window.IGameMain&&window.IGameMain.backButton()),n&&egret.ExternalInterface.call("exitApp","")}),[2]})})},t.prototype.getOpenIdSuc=function(){var e=this.reportSDKLogin(),t=""+this.domain+this.pfPHP+"/api?m=reportExt&fn=post&type=login&"+e.toParamString();console.log("reportSDKLogin",t);var r=this.getHttp(t);console.log("reportSDKLogin",r)},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.enterGame=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("smAfterChooseRoleSendInfo",r);var n=this.reportSDKEnterGame(e),o=""+this.domain+this.pfPHP+"/api?m=reportExt&fn=post&type=setUserInfo&"+n.toParamString();console.log("reportSDKEnterGame",o);var a=this.getHttp(o);console.log("reportSDKEnterGame",a)},t.prototype.createRole=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("smAfterChooseRoleSendInfo",r)},t.prototype.roleUp=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("smAfterChooseRoleSendInfo",r)},t.prototype.checkChat=function(e){e.onSuccessCallback(e.chat_content)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l,u;return __generator(this,function(p){switch(p.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=p.sent())?(n=new PlatFormHaiWaiAzRechargeOrderParam,n.game_guid=this.pfParam.openId,n.subject=e.itemName,o=e.amountYuan.toString().split("."),a="",a="0"==o[0]?o[1]:""+o[0]+o[1],n.game_price=e.rmbsdkPay+".00",n.notify_id="-1",n.game_access_version="6.106",n.game_orderid=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.game_guid=this.pfParam.openId,n.game_area=EntranceParam.urlParam.serverName,n.game_role_id=t.actorId,n.game_level=t.actorLevel,n.game_role_name=t.actorName,n.extends_info_data=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,i=this.getCreatOrderUrl(n),console.log(i),[4,this.getHttp(i)]):[3,3];case 2:s=p.sent(),console.log(s),c=JSON.parse(s),200==c.code&&(console.log("调用充值200"),l=new PlatFormHaiWaiAzRechargeParam,l.game_guid=this.pfParam.openId,l.subject=e.itemName,l.game_price=n.game_price,l.notify_id=n.notify_id,l.game_access_version=n.game_access_version,l.game_sign=c.data.sign,l.game_orderid=n.game_orderid,l.game_area=EntranceParam.urlParam.serverName,l.game_role_id=t.actorId,l.game_level=t.actorLevel,l.game_role_name=t.actorName,l.extends_info_data=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,this.payParam=l,u=JSON.stringify(l),console.log("支付",u),this.payItem=e,this.extend=t,egret.ExternalInterface.call("pay",u)),p.label=3;case 3:return[2]}})})},t.prototype.getRoleReportParam=function(e){var t=new PlatFormHaiWaiAzRoleReportParam;return t.game_guid=this.pfParam.openId,t.game_area_id=EntranceParam.urlParam.srvid,t.game_area=EntranceParam.urlParam.serverName,t.game_role_id=e.actorId,t.game_role_name=e.actorName,t.role_level=e.actorLevel,t.role_ce=e.power,t.role_stage=e.guanId,t.role_recharge_amount="-1",t},t.prototype.reportSDKLogin=function(){var e=new PlatFormHaiWaiAzRoleReportParam1;return e.game="ashesstorm_q1",e.mobile="android",e.channel="160068",e.pvc="1",e.apkNum="海外",e.userId=""+EntranceParam.urlParam.openId,e.joinTime=""+(new Date).valueOf()/1e3,e.loginTime=""+(new Date).valueOf()/1e3,e.phoneid="",e.ip="",e},t.prototype.reportSDKEnterGame=function(e){var t=new PlatFormHaiWaiAzRoleReportParam2;return t.game="ashesstorm_q1",t.mobile="android",t.channel="160068",t.pvc="1",t.apkNum="海外",t.serverId=EntranceParam.urlParam.serverid,t.serverName=e.serverName,t.cpRoleId=""+EntranceParam.urlParam.openId,t.extraRoleId=""+EntranceParam.urlParam.openId,t.roleName=""+e.actorName,t.infoType="1",t.userId=""+EntranceParam.urlParam.openId,t.roleLTime=""+(new Date).valueOf()/1e3,t.roleCTime=""+Math.floor(e.createRoleTime),t},t.prototype.reportSDKPay=function(e,t){var r=new PlatFormHaiWaiAzRoleReportParam3;return r.game="ashesstorm_q1",r.mobile="android",r.channel="160068",r.pvc="1",r.apkNum="海外",r.callBackInfo=this.payParam.extends_info_data,r.money=""+100*e.rmbsdkPay,r.cpRoleId=""+EntranceParam.urlParam.openId,r.extraRoleId=""+EntranceParam.urlParam.openId,r.roleName=""+t.actorName,r.serverId=EntranceParam.urlParam.serverid,r.userId=""+EntranceParam.urlParam.openId,r.cpOrderId=this.payParam.game_orderid,r.time=""+Math.floor(new Date(t.serverTime).valueOf()/1e3),r.status="1",r.paymentName="",r.currency="CNY",r},t.prototype.reload=function(){location?location.reload():egret.ExternalInterface.call("smExitCurrent","")},t}(PlatFormWW);__reflect(PlatFormHaiWaiAz.prototype,"PlatFormHaiWaiAz");var Hwh5EvetnType=function(){function e(){}return e.GAMEBEGIN="GAMEBEGIN",e.GAMEEND="GAMEEND",e}();__reflect(Hwh5EvetnType.prototype,"Hwh5EvetnType");var GameUserData=function(){function e(){}return e}();__reflect(GameUserData.prototype,"GameUserData");var Hwh5H5System=function(){function e(){}return e}();__reflect(Hwh5H5System.prototype,"Hwh5H5System");var Hwh5H5LoginParamData=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","playerId","playerLevel","ts","gameAuthSign"]},t.prototype.setData=function(e){this.playerId=e.playerId,this.playerLevel=e.playerLevel,this.ts=e.ts,this.gameAuthSign=e.gameAuthSign},t}(PlatFormParam);__reflect(Hwh5H5LoginParamData.prototype,"Hwh5H5LoginParamData");var Hwh5H5RechargeParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["amount","applicationID","country","currency","productDesc","productName","serviceCatalog","urlver","sdkChannel","extReserved","openId"]},t}(PlatFormParam);__reflect(Hwh5H5RechargeParam.prototype,"Hwh5H5RechargeParam");var PlatFormHwh5XYX=function(e){function t(){var t=e.call(this)||this;return t.appid="",t.pfParam=new Hwh5H5LoginParamData,t.appid=window.appid,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,HwFastappObject.onGameLoginWithRealResult=function(e){if(0==e.code){r.pfParam.setData(e.gameUserData),console.log("submitPlayerEvent:");var n={eventId:Math.random().toString(),eventType:Hwh5EvetnType.GAMEBEGIN};HwFastappObject.submitPlayerEvent(JSON.stringify(n))}else 7004==e.code||2012==e.code?(t.main.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onStageClick,t),window.system.postMessage("exitapp")):(r.alert("onGameLoginWithRealResult错误码:"+e.code+"|"+e.data),window.system.postMessage("exitapp"))
},HwFastappObject.onSubmitPlayerEventResult=function(e){console.log("onSubmitPlayerEventResult:"+JSON.stringify(e));var t={transactionId:e.transactionId};HwFastappObject.getPlayerExtraInfo(JSON.stringify(t))},HwFastappObject.onGetPlayerExtraInfoResult=function(e){console.log("onGetPlayerExtraInfoResult:"+JSON.stringify(e)),0==e.code?(console.log("this.onSuccess:"),r.onSuccess()):r.alert("onGetPlayerExtraInfoResult错误码:"+e.code)},HwFastappObject.onPayResult=function(e){console.log("支付结果: "+e.code+",message: "+e.data)},this.startLogin(),[2]})})},t.prototype.startLogin=function(){var e={forceLogin:1,appid:this.appid};HwFastappObject.gameLoginWithReal(JSON.stringify(e))},t.prototype.onStageClick=function(e){this.startLogin(),this.main.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageClick,this)},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return console.log("onSuccess"),e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,console.log("openSelectServer"),this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?e?(n=new Hwh5H5RechargeParam,n.amount=(e.amount/100).toFixed(2),n.applicationID=this.appid,n.country="CN",n.currency="CNY",n.productDesc=e.desc,n.productName=e.itemName,n.serviceCatalog="X6",n.urlver="2",n.sdkChannel=3,n.extReserved=EntranceParam.urlParam.openId+"_"+EntranceParam.urlParam.srvid+"_"+t.actorId+"_"+e.yb,o=this.getCreatOrderUrl(n),console.log(o),[4,this.getHttp(o)]):[3,3]:[3,4];case 2:return a=l.sent(),i=JSON.parse(a),200==i.code?(s={},s.amount=i.data.amount,s.applicationID=n.applicationID,s.country=n.country,s.currency=n.currency,s.productDesc=n.productDesc,s.productName=n.productName,s.requestId=i.data.requestId,s.serviceCatalog=n.serviceCatalog,s.merchantId=i.data.merchantId,s.merchantName=i.data.merchantName,s.sign=i.data.sign,s.urlver=n.urlver,s.sdkChannel=n.sdkChannel,s.extReserved=n.extReserved,s.publicKey=i.data.publicKey,s.url=i.data.url,c=JSON.stringify({orderInfo:JSON.stringify(s)}),console.log(c),HwFastappObject.pay(c)):this.alert(i.msg),[3,4];case 3:this.alert("错误的购买道具"),l.label=4;case 4:return[2]}})})},t.prototype.reLogin=function(){location&&location.reload()},t.prototype.reload=function(){HwFastappObject.exitApplication({success:function(){},fail:function(){},complete:function(){}})},t}(PlatFormBaseXYX);__reflect(PlatFormHwh5XYX.prototype,"PlatFormHwh5XYX"),window.PlatFormHwh5=PlatFormHwh5XYX;var PlatFormLeiDianAzRoleReportParam=function(){function e(){}return e}();__reflect(PlatFormLeiDianAzRoleReportParam.prototype,"PlatFormLeiDianAzRoleReportParam");var PlatFormLeiDianAzRechargeParam=function(){function e(){}return e}();__reflect(PlatFormLeiDianAzRechargeParam.prototype,"PlatFormLeiDianAzRechargeParam");var PlatFormLeiDianAzLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","token"]},t}(PlatFormParam);__reflect(PlatFormLeiDianAzLoginParam.prototype,"PlatFormLeiDianAzLoginParam");var PlatFormPlatFormLeiDianAz=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new PlatFormLeiDianAzLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zy2qy},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,egret.ExternalInterface.call("init",""),console.log("英文LeiDianAz"),egret.ExternalInterface.addCallback("LDSDKInitOnSuccess",function(e){console.log("初始化SDK成功----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("LDSDKInitOnError",function(e){console.log("初始化SDK失败----------------------------"+e)}),egret.ExternalInterface.addCallback("LDSDKLDLoginCallbackOnSuccess",function(e){console.log("登录成功----------------------------"+e);var r=JSON.parse(e);t.pfParam.uid=r.cpUserId,t.pfParam.token=r.cpToken,t.onSuccess()}),egret.ExternalInterface.addCallback("LDSDKLDLoginCallbackOnError",function(e){console.log("登录失败----------------------------"+e)}),egret.ExternalInterface.addCallback("LDSDKLDLoginCallbackOnLogout",function(e){console.log("退出----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("LDSDKLDPayCallbackOnSuccess",function(e){console.log("支付成功----------------------------",e);var t=r.reportSDKPay(r.payItem,r.extend),n=""+r.domain+r.pfPHP+"/api?m=reportExt&fn=post&type=submitOrder&"+t.toParamString();console.log("reportSDKPay",n);var o=r.getHttp(n);console.log("reportSDKPay",o)}),egret.ExternalInterface.addCallback("LDSDKLDPayCallbackOnError",function(e){console.log("支付失败----------------------------",e)}),egret.ExternalInterface.addCallback("LDSDKReportCpLoginOnError",function(e){console.log("支付取消----------------------------",e)}),egret.ExternalInterface.addCallback("LDSDKH5GameLog",function(e){console.log("日志----------------------------",e)}),egret.ExternalInterface.addCallback("LDSDKOnBackPressed",function(e){console.log("backPress");var n=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(r.serverGgonggaoWin.close(),n=!0),!n&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),n=!0),n||(n=window.IGameMain&&window.IGameMain.backButton()),n&&egret.ExternalInterface.call("logout","")}),[2]})})},t.prototype.getOpenIdSuc=function(){var e=this.reportSDKLogin(),t=""+this.domain+this.pfPHP+"/api?m=reportExt&fn=post&type=login&"+e.toParamString();console.log("reportSDKLogin",t);var r=this.getHttp(t);console.log("reportSDKLogin",r)},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.enterGame=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("enterGame",r);var n=this.reportSDKEnterGame(e),o=""+this.domain+this.pfPHP+"/api?m=reportExt&fn=post&type=setUserInfo&"+n.toParamString();console.log("reportSDKEnterGame",o);var a=this.getHttp(o);console.log("reportSDKEnterGame",a)},t.prototype.createRole=function(e){},t.prototype.roleUp=function(e){},t.prototype.checkChat=function(e){e.onSuccessCallback(e.chat_content)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=s.sent(),r&&(this.reportAppFlyer("payStart",t),n=new PlatFormLeiDianAzRechargeParam,n.cpOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.productId=e.shangpinId,o=e.amountYuan.toString().split("."),a="",a="0"==o[0]?o[1]:""+o[0]+o[1],n.commodityPrice=""+a,n.tradeName=e.itemName,n.currencyType="USD",n.transparentParams=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.cpUserId=EntranceParam.urlParam.openId,this.payParam=n,this.payItem=e,this.extend=t,i=JSON.stringify(n),console.log("支付",i),egret.ExternalInterface.call("pay",i)),[2]}})})},t.prototype.formatFloat=function(e,t){var r=e.toString(),n=t.toString(),o=-1==r.lastIndexOf(".")?0:r.lastIndexOf("."),a=-1==n.lastIndexOf(".")?0:n.lastIndexOf("."),i=r.replace(".",""),s=n.replace(".","");return console.log(i,s),parseInt(i)*parseInt(s)/Math.pow(10,o+a)},t.prototype.getRoleReportParam=function(e){var t=new PlatFormLeiDianAzRoleReportParam;return t.serverId=EntranceParam.urlParam.srvid,t.serverName=EntranceParam.urlParam.serverName,t.roleId=e.actorId,t.roleName=e.actorName,t.roleLevel=e.actorLevel,t.roleMoney=e.yb,t.rolePartyName=e.guildName,t.roleVipLevel=e.vipLevel+e.svipLevel,t.rolePowerNum=e.power,t},t.prototype.reportSDKLogin=function(){var e=new PlatFormXiaoQiAzRoleReportParam1;return e.game="ashesstorm_q",e.mobile="android",e.channel="160068",e.pvc="1",e.apkNum="海外",e.userId=""+EntranceParam.urlParam.openId,e.joinTime=""+Math.floor((new Date).valueOf()/1e3),e.loginTime=""+Math.floor((new Date).valueOf()/1e3),e.phoneid="",e.ip="",e},t.prototype.reportSDKEnterGame=function(e){var t=new PlatFormXiaoQiAzRoleReportParam2;return t.game="ashesstorm_q",t.mobile="android",t.channel="160068",t.pvc="1",t.apkNum="海外",t.serverId=EntranceParam.urlParam.serverid,t.serverName=e.serverName,t.cpRoleId=""+e.actorId,t.extraRoleId=""+EntranceParam.urlParam.openId,t.roleName=""+e.actorName,t.infoType="1",t.userId=""+EntranceParam.urlParam.openId,t.roleLTime=""+(new Date).valueOf()/1e3,t.roleCTime=""+Math.floor(e.createRoleTime),t},t.prototype.reportSDKPay=function(e,t){var r=new PlatFormXiaoQiAzRoleReportParam3;return r.game="ashesstorm_q",r.mobile="android",r.channel="160068",r.pvc="1",r.apkNum="海外",r.callBackInfo=this.payParam.transparentParams,r.money=""+this.payParam.commodityPrice,r.cpRoleId=""+t.actorId,r.extraRoleId=""+t.actorId,r.roleName=""+t.actorName,r.serverId=EntranceParam.urlParam.serverid,r.userId=""+EntranceParam.urlParam.openId,r.cpOrderId=this.payParam.cpOrderId,r.time=""+Math.floor(new Date(t.serverTime).valueOf()/1e3),r.status="1",r.paymentName="",r.currency="USD",r},t.prototype.reload=function(){location?location.reload():egret.ExternalInterface.call("logout","")},t}(PlatFormWW);__reflect(PlatFormPlatFormLeiDianAz.prototype,"PlatFormPlatFormLeiDianAz");var LoginParamsOPPO=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","openId"]},t}(PlatFormParam);__reflect(LoginParamsOPPO.prototype,"LoginParamsOPPO");var RechargeParamOPPO=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","productName","productDesc","count","price","appVersion","engineVersion","openId","serverId","roleId","gold"]},t}(PlatFormParam);__reflect(RechargeParamOPPO.prototype,"RechargeParamOPPO");var PlatFormOPPOXYX=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsOPPO,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){return this.initWin(),this.initYszcData(),this.openBgWin(),e=this,t={},t.success=function(t){console.log("token"+t.token),e.pfParam.token=t.token,e.onSuccess()},t.fail=function(t){e.openTipsWin("sdk登录失败")},console.log("qglogin:"),window.qg.login(t),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l,u,p;return __generator(this,function(h){switch(h.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=h.sent())?(console.log("调用充值"),n=new RechargeParamOPPO,n.token=this.pfParam.token,n.productName=e.itemName,n.productDesc=e.desc,n.count=1,n.price=e.amount.toString(),n.appVersion=EntranceParam.urlParam.v,n.engineVersion=window.qg.getSystemInfoSync().platformVersion,n.openId=EntranceParam.urlParam.openId,n.serverId=EntranceParam.urlParam.srvid,n.roleId=t.actorId,n.gold=e.yb,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),console.log(o),[4,this.getHttp(o)]):[3,3];case 2:a=h.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s={},c=i.data,l=c.appId,u=c.cpOrderId,p=c.orderNo,s.appId=c.appId,s.token=this.pfParam.token,s.timestamp=c.timestamp,s.orderNo=c.orderNo,s.paySign=c.paySign,s.success=function(){console.log("支付成功")},s.fail=function(){console.log("支付失败")},window.qg.pay(s)):console.log("充值失败:"+i.msg),h.label=3;case 3:return[2]}})})},t.prototype.isShowLogo=function(){return e.prototype.isShowLogo.call(this)&&!this.isShenhe},t.prototype.reload=function(){console.log("reload"),window.qg.exitApplication({})},t.prototype.isActColorLabel=function(){return!1},t.prototype.isLiuhai=function(){return window.qg.getSystemInfoSync().statusBarHeight&&window.qg.getSystemInfoSync().statusBarHeight>0},t}(PlatFormBaseXYX);__reflect(PlatFormOPPOXYX.prototype,"PlatFormOPPOXYX"),window.PlatFormOPPO=PlatFormOPPOXYX;var QXYLoginParamData=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["app_id","platform","ticket","time","sign"]},t}(PlatFormParam);__reflect(QXYLoginParamData.prototype,"QXYLoginParamData");var PlatFormQTTH5=function(e){function t(){var t=e.call(this)||this;return t.appId="",t.pfParam=new QXYLoginParamData,t.appId=window.appid,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(r){return this.initWin(),this.initYszcData(),this.pfParam.setValueByUrl(location.href),console.log("href : ",location.href),e="https://newidea4-gamecenter-frontend.1sapp.com/sdk/prod/h5.v1.0.0.js?spread=required",window.loadSingleScript(e,function(){t.openGame()}),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){switch(n.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=n.sent(),r&&(e?window.qttGame.pay({openId:EntranceParam.urlParam.openId,money:e.amount,appId:this.appId,notifyUrl:""+this.domain+this.pfId+"/payment",platform:this.pfParam.platform,land:1,ext:{openId:EntranceParam.urlParam.openId,srvid:EntranceParam.urlParam.srvid,actorId:t.actorId,yb:e.yb}}):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.createRole=function(e){this.reportSDK("newRole",e)},t.prototype.enterGame=function(e){this.reportSDK("login",e)},t.prototype.roleUp=function(e){this.reportSDK("upgrade",e)},t.prototype.reportSDK=function(e,t){window.qttGame.reportData({type:e,open_id:EntranceParam.urlParam.openId,app_id:this.appId,game_name:window.title,extend_info:{}})},t}(PlatFormWW);__reflect(PlatFormQTTH5.prototype,"PlatFormQTTH5"),window.PlatFormQTTH5=PlatFormQTTH5;var PlatFormQuickH5Xiaomi=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initCallback=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i=this;return __generator(this,function(s){switch(s.label){case 0:return window.yszcFile?(t=this.getYinsiUrl(),o=(n=JSON).parse,[4,this.getHttp(t)]):[3,2];case 1:return r=o.apply(n,[s.sent()]),this.privacy_status=r.privacy_status,1==this.privacy_status?(a=egret.localStorage.getItem("yinsi_QuickH5Xiaomi"),"1"==a?e.prototype.initCallback.call(this):(this.main.layerWin.addChild(this.serverYinsiWin),this.serverYinsiWin.open(window.platform.getYinsi(),function(){egret.localStorage.setItem("yinsi_QuickH5Xiaomi","1"),e.prototype.initCallback.call(i)},function(){i.reload()}))):e.prototype.initCallback.call(this),[3,3];case 2:e.prototype.initCallback.call(this),s.label=3;case 3:return[2]}})})},t.prototype.openGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.openSelectServer(),[2]})})},t}(PlatFormQuickH5);__reflect(PlatFormQuickH5Xiaomi.prototype,"PlatFormQuickH5Xiaomi");var PlatFormQuickHwRoleReportParam=function(){function e(){}return e}();__reflect(PlatFormQuickHwRoleReportParam.prototype,"PlatFormQuickHwRoleReportParam");var PlatFormQuickHwRechargeParam=function(){function e(){this.sku_type="",this.qk_order_no="",this.callback_url=""}return e}();__reflect(PlatFormQuickHwRechargeParam.prototype,"PlatFormQuickHwRechargeParam");var PlatFormQuickHwLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","user_name","token","openId"]},t}(PlatFormParam);__reflect(PlatFormQuickHwLoginParam.prototype,"PlatFormQuickHwLoginParam");var PlatFormPlatFormQuickHw=function(e){function t(){var t=e.call(this)||this;return t.appFlyerEvent={payStart:["add to payment","A_add to payment","add to payment"],createRole:["Creat_User","A_Creat_User","Creat_User"],appStart:["first_open","A_first_open","first_open"],twoDayRemain:["retented user 2nd day","A_retented user2","retented user 2nd day"],threeDayReamin:["retented user 3rd day","A_retented user3","retented user 3rd day"],firstPurchase:["first purchase","A_first purchase","first purchase"],online1Hour:["online time 1( hour)","A_online time","1( hour)"],online3Hour:["online time 2( hour)","A_online time","3( hour)"],online5Hour:["online time 3( hour)","A_online time","5( hour)"],online12Hour:["online time 4( hour)","A_online time","12( hour)"],createGuild:["create the alliance","A_create the alliance","create the alliance"],JoinGuild:["join the alliance","A_join the alliance","join the alliance"],rookieGuide:["tutorialComplete","A_tutorialComplete","tutorialComplete"],fbLogin:["fb login","A_fb login","fb login"],login3Times:["login 3times","A_login 3times","login 3times"],chat:["9 up","A_9 up","9 up"],guaJiShouYi:["cap reward","A_cap reward","cap reward"],googleLogin:["google login","google login","google login"],loginSuccess:["login success","login success","login success"],firstDayOnlineHalfHour:["1st online time 0.5( hour)","A_online 1sttime","0.5( hour)"],firstDayOnlineOneHour:["1st online time 1( hour)","A_online 1sttime","1( hour)"]},t.serverHasKey={hir9x9:"online1Hour",a5olto:"online3Hour",mh0gcm:"online5Hour",u4lymb:"online12Hour",bw442b:"firstPurchase","56xyn5":"twoDayRemain",w4pkzm:"threeDayReamin"},t.pfParam=new PlatFormQuickHwLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zy2qy},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,egret.ExternalInterface.call("init",""),console.log("英文QuickHW"),egret.ExternalInterface.addCallback("QuickHwSDKInitSDKCallbackOnInitSuccess",function(e){console.log("初始化SDK成功----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("QuickHwSDKInitSDKCallbackOnInitFailed",function(e){console.log("初始化SDK失败----------------------------"+e)}),egret.ExternalInterface.addCallback("QuickHwSDKLoginSDKCallbackOnLoginSuccess",function(e){console.log("登录成功----------------------------"+e);var r=JSON.parse(e);t.pfParam.uid=r.uid,t.pfParam.user_name=r.user_name,t.pfParam.token=r.token,t.pfParam.open_type=r.open_type,t.pfParam.display_uid=r.display_uid,t.pfParam.fb_uid=r.fb_uid,t.pfParam.google_uid=r.google_uid,t.pfParam.is_trash=r.is_trash,t.pfParam.is_guest=r.is_guest,t.pfParam.is_new_user=r.is_new_user,t.pfParam.is_pre_reg=r.is_pre_reg,6==t.pfParam.open_type?t.reportAppFlyer("fbLogin"):8==t.pfParam.open_type&&t.reportAppFlyer("googleLogin"),t.onSuccess()}),egret.ExternalInterface.addCallback("QuickHwSDKLoginSDKCallbackOnLoginFailed",function(e){console.log("登录失败----------------------------"+e)}),egret.ExternalInterface.addCallback("QuickHwSDKLogoutSDKCallbackOnLogout",function(e){console.log("退出----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("QuickHwSDKPayQGPaymentCallbackOnPaySuccess",function(e){var r=JSON.parse(e);console.log("支付成功----------------------------",r),t.reportAppFlyer("paySuccess")}),egret.ExternalInterface.addCallback("QuickHwSDKPayQGPaymentCallbackOnPayFailed",function(e){var t=JSON.parse(e);console.log("支付失败----------------------------",t)}),egret.ExternalInterface.addCallback("QuickHwSDKPayQGPaymentCallbackOnPayCancel",function(e){var t=JSON.parse(e);console.log("支付取消----------------------------",t)}),egret.ExternalInterface.addCallback("QuickHwSDKH5GameLog",function(e){console.log("日志----------------------------",e)}),egret.ExternalInterface.addCallback("QuickHwSDKOnBackPressed",function(e){console.log("backPress");var n=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(r.serverGgonggaoWin.close(),n=!0),!n&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),n=!0),n||(n=window.IGameMain&&window.IGameMain.backButton()),n&&egret.ExternalInterface.call("logout","")}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.enterGame=function(e){this.reportAppFlyer("login3Times",e);var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("submitRoleInfo",r)},t.prototype.createRole=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("submitRoleInfo",r),this.reportAppFlyer("createRole",e),this.reportAppFlyer("loginSuccess",e)},t.prototype.roleUp=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("submitRoleInfo",r)},t.prototype.checkChat=function(e){this.reportAppFlyer("chat"),e.onSuccessCallback(e.chat_content)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(this.reportAppFlyer("payStart",t),n=new PlatFormQuickHwRechargeParam,n.goods_id=e.shangpinId,n.product_order_id=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=e.amount/100,n.order_subject=e.itemName,n.suggest_currency="USD",n.extras_params=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.server_id=EntranceParam.urlParam.srvid,n.server_name=EntranceParam.urlParam.serverName,n.role_id=t.actorId,n.role_name=t.actorName,n.role_level=t.actorLevel,n.role_balance=t.yb,n.role_party_name=t.guildName,n.vip_level=t.vipLevel+t.svipLevel,o=JSON.stringify(n),console.log("支付",o),egret.ExternalInterface.call("pay",o)),[2]}})})},t.prototype.getRoleReportParam=function(e){var t=new PlatFormQuickHwRoleReportParam;return t.server_id=EntranceParam.urlParam.srvid,t.server_name=EntranceParam.urlParam.serverName,t.role_id=e.actorId,t.role_name=e.actorName,t.role_level=e.actorLevel,t.role_balance=e.yb,t.role_party_name=e.guildName,t.vip_level=e.vipLevel+e.svipLevel,t},t.prototype.reportAppFlyer=function(e,t){void 0===t&&(t=null);var r=this.appFlyerEvent[e];if(r){var n=r[2],o=r[1],a=r[0],i=this.pfParam.uid,s=egret.localStorage.getItem(i+e),c=0;s&&(c=Number(s));for(var l=["createRole","appStart","fbLogin","login3Times","chat","googleLogin","guaJiShouYi","rookieGuide"],u=0,p=l.length;p>u;u++)if(l[u]==e&&c>0)return;if("login3Times"==e&&t){var h=Math.floor(t.serverTime/1e3/86400),d=egret.localStorage.getItem(""+i+h),m=0;if(d){if(m=Number(d),m>=3)return;egret.localStorage.setItem(""+i+h,m+1+"")}}egret.localStorage.setItem(i+e,c+1+"");var g=new Object;g.event_name=a,g[n]=o;var f=JSON.stringify(g);egret.ExternalInterface.call("appsFlyerEvent",f),console.log("客户端打点appFlyer:",f)}else if(this.serverHasKey[e]&&(e=this.serverHasKey[e],r=this.appFlyerEvent[e])){var n=r[2],o=r[1],a=r[0],g=new Object;g.event_name=a,g[n]=o;var f=JSON.stringify(g);egret.ExternalInterface.call("appsFlyerEvent",f),console.log("服务器打点appFlyer:",f)}if(t&&0==t.serverOpenDay&&("rxohc5"==e||"hir9x9"==e)&&("rxohc5"==e?r=this.appFlyerEvent.firstDayOnlineHalfHour:"hir9x9"==e&&(r=this.appFlyerEvent.firstDayOnlineOneHour),r)){var n=r[2],o=r[1],a=r[0],g=new Object;g.event_name=a,g[n]=o;var f=JSON.stringify(g);egret.ExternalInterface.call("appsFlyerEvent",f),console.log("服务器打点首日appFlyer:",f)}},t.prototype.reload=function(){location?location.reload():egret.ExternalInterface.call("logout","")},t.prototype.isShowFaceBook=function(){return!0},t.prototype.openFaceBookLink=function(){var e={pageUrl:"https://www.facebook.com/wrathcqen"},t=JSON.stringify(e);egret.ExternalInterface.call("openLinks",t)},t}(PlatFormWW);__reflect(PlatFormPlatFormQuickHw.prototype,"PlatFormPlatFormQuickHw");var LoginParamsUCXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["code","openId"]},t}(PlatFormParam);__reflect(LoginParamsUCXYX.prototype,"LoginParamsUCXYX");var RechargeParamUCXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["total_amount","title","platform","extra","openId"]},t}(PlatFormParam);__reflect(RechargeParamUCXYX.prototype,"RechargeParamUCXYX");var PlatFormUCXYX=function(e){function t(){var t=e.call(this)||this;return t.pay_biz_id="",t.pay_biz_id=window.pay_biz_id,t.pfParam=new LoginParamsUCXYX,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return this.initWin(),this.initYszcData(),this.openBgWin(),e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.ucLogin(),[2]}})})},t.prototype.ucLogin=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=this,window.uc.login({success:function(t){e.pfParam.code=t.code,e.onSuccess()},fail:function(t){window.uc.showModal({title:"登录失败",content:"是否重新登录？",cancelText:"退出游戏",success:function(t){t.confirm?e.ucLogin():t.cancel&&window.uc.exit()}})}}),[2]})})},t.prototype.isLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.isLogin({success:function(t){alert("isLogin success:"+t.isLogin),e(t.isLogin)},fail:function(t){alert("isLogin fail:"+t.isLogin),e(t.isLogin)}})})]})})},t.prototype.checkSession=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.checkSession({success:function(t){alert("checkSession success:"+t),e(!0)},fail:function(t){alert("checkSession fail:"+t),e(!1)}})})]})})},t.prototype.login1=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=this,[2,new Promise(function(t,r){window.uc.login({success:function(r){e.pfParam.code=r.code,e.onSuccess(),alert("login1"+r),alert("login1"+r.code),t(r.code)},fail:function(t){var r="";for(var n in t)r+=n+":"+t[n]+",";alert("login1 fail"+r),window.uc.showModal({title:"登录失败",content:"是否重新登录？3",cancelText:"退出游戏",success:function(t){t.confirm?e.ucLogin():t.cancel&&window.uc.exit()}})}})})]})})},t.prototype.getSetting=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.getSetting({success:function(t){return e(t)},fail:function(e){return t(e)}})})]})})},t.prototype.authorize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.authorize({scope:"userInfo",success:function(t){return e(t)},fail:function(e){return t(e)}})})]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:if(r=l.sent(),!r)return[3,3];if(n=window.uc.getSystemInfoSync(),o=void 0,"string"==typeof n)try{o=JSON.parse(n)}catch(u){}else o=n;return this.compareVersion(o.SDKVersion,"1.0.1")<0?(window.platform.alert("当前版本不支持内购功能，请升级UC浏览器。"),[2]):(console.log("调用充值"),a=new RechargeParamUCXYX,a.total_amount=e.amount.toString(),a.title=e.itemName,a.platform=o.platform,a.openId=EntranceParam.urlParam.openId,a.extra=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,i=""+this.domain+this.pfPHP+"/payment/createorder?"+a.toParamString()+"&sys_info="+encodeURIComponent(n),console.log(i),[4,this.getHttp(i)]);case 2:s=l.sent(),c=JSON.parse(s),200==c.code?window.uc.requestPayment({biz_id:this.pay_biz_id,token:c.data.token,order_id:c.data.order_id,success:function(e){console.log("充值成功:"+e)},fail:function(e){console.error("充值失败:"+e)}}):window.platform.alert("支付失败"),l.label=3;case 3:return[2]}})})},t.prototype.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;r>n;n++){var o=parseInt(e[n]),a=parseInt(t[n]);if(o>a)return 1;if(a>o)return-1}return 0},t.prototype.isLiuhai=function(){return this.isIphoneX()},t.prototype.isIphoneX=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&812===screen.height&&375===screen.width},t}(PlatFormBaseXYX);__reflect(PlatFormUCXYX.prototype,"PlatFormUCXYX"),window.PlatFormUCXYX=PlatFormUCXYX;var LoginParamsVIVO=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","openId"]},t}(PlatFormParam);__reflect(LoginParamsVIVO.prototype,"LoginParamsVIVO");var RechargeParamVIVO=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["productName","productDesc","orderAmount","extInfo","openId"]},t}(PlatFormParam);__reflect(RechargeParamVIVO.prototype,"RechargeParamVIVO");var PlatFormVIVOXYX=function(e){function t(){var t=e.call(this)||this;return t.appId="",t.appId=window.appid,t.pfParam=new LoginParamsVIVO,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n=this;return __generator(this,function(o){return this.initWin(),this.initYszcData(),this.openBgWin(),e=parseInt(window.qg.getSystemInfoSync().platformVersionCode),console.log("version:"+e),t=1063,e>=t?(r=this,window.qg.login().then(function(e){e.data.token&&(console.log("token:"+e.data.token),r.pfParam.token=e.token,r.onSuccess())},function(e){n.openTipsWin("登录失败"+JSON.stringify(e),function(){window.qg.exitApplication()})})):this.openTipsWin("你的快游戏版本号低于"+t+",请升级快游戏引擎",function(){window.qg.exitApplication()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?(console.log("调用充值"),n=new RechargeParamVIVO,n.productName=e.itemName,n.productDesc=e.desc,n.orderAmount=e.amount,n.extInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),console.log(o),[4,this.getHttp(o)]):[3,3];case 2:a=l.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s=i.data,c={appId:this.appId,cpOrderNumber:s.cpOrderNumber,productName:e.itemName,productDesc:e.desc,orderAmount:e.amount.toString(),notifyUrl:s.notifyUrl,extInfo:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,vivoSignature:s.vivoSignature},console.log(c),window.qg.pay({orderInfo:JSON.stringify(c),success:function(e){console.log("code:"+e.code+",message:"+e.message+",result:"+e.result)
},fail:function(e){console.log("data:"+e)},complete:function(){console.log("支付完成")}})):this.alert("充值失败"),l.label=3;case 3:return[2]}})})},t.prototype.isLiuhai=function(){return window.qg.getSystemInfoSync().isHole||window.qg.getSystemInfoSync().isNotch},t.prototype.getLiuhaiHeight=function(){return this.isShenhe?100:e.prototype.getLiuhaiHeight.call(this)},t.prototype.relogin=function(){location&&location.reload()},t.prototype.reload=function(){console.log("reload"),window.qg.exitApplication()},t.prototype.isActColorLabel=function(){return!1},t}(PlatFormBaseXYX);__reflect(PlatFormVIVOXYX.prototype,"PlatFormVIVOXYX"),window.PlatFormVIVO=PlatFormVIVOXYX;var LoginParamsXXIAOMI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["session","appAccountId","openId"]},t}(PlatFormParam);__reflect(LoginParamsXXIAOMI.prototype,"LoginParamsXXIAOMI");var RechargeParamXXIAOMI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["appAccountId","session","displayName","feeValue","cpUserInfo","openId"]},t}(PlatFormParam);__reflect(RechargeParamXXIAOMI.prototype,"RechargeParamXXIAOMI");var PlatFormXiaomiXYX=function(e){function t(){var t=e.call(this)||this;return t.APPID="",t.APPID=window.appid,t.pfParam=new LoginParamsXXIAOMI,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,window.xmqg=window.qg,window.xmqg.login({success:function(e,n){r.pfParam.session=e.data.session,r.pfParam.appAccountId=e.data.appAccountId,t.onSuccess()},fail:function(){r.alert("登录失败",1)},complete:function(){}}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l;return __generator(this,function(u){switch(u.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=u.sent())?(console.log("调用充值"),n=new RechargeParamXXIAOMI,n.appAccountId=this.pfParam.appAccountId,n.session=this.pfParam.session,n.displayName=e.itemName,n.feeValue=e.amount,o=n.cpUserInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,a=this.getCreatOrderUrl(n),console.log(a),[4,this.getHttp(a)]):[3,3];case 2:i=u.sent(),console.log(i),s=JSON.parse(i),200==s.code?(console.log("调用充值200"),c=s.data,l={appId:this.APPID,appAccountId:this.pfParam.appAccountId,session:this.pfParam.session,cpOrderId:c.cpOrderId,cpUserInfo:o,displayName:e.itemName,feeValue:e.amount,sign:c.sign},console.log(l),window.xmqg.pay({orderInfo:l,success:function(){console.log("支付成功")},fail:function(){console.log("支付失败")},complete:function(){console.log("支付完成")}})):this.alert(s.msg),u.label=3;case 3:return[2]}})})},t.prototype.isShowLogo=function(){return e.prototype.isShowLogo.call(this)&&!this.isShenhe},t.prototype.reload=function(){console.log("reload"),window.xmqg.exitApplication(function(){},function(){},function(){})},t}(PlatFormBaseXYX);__reflect(PlatFormXiaomiXYX.prototype,"PlatFormXiaomiXYX"),window.PlatFormXIAOMI=PlatFormXiaomiXYX;var PlatFormXiaoQiAzRoleReportParam1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.isUseEmptyValue=!0,this.keys=["game","mobile","channel","pvc","apkNum","userId","joinTime","loginTime","phoneid","ip"]},t}(PlatFormParam);__reflect(PlatFormXiaoQiAzRoleReportParam1.prototype,"PlatFormXiaoQiAzRoleReportParam1");var PlatFormXiaoQiAzRoleReportParam2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.isUseEmptyValue=!0,this.keys=["game","mobile","channel","pvc","apkNum","serverId","serverName","cpRoleId","extraRoleId","roleName","infoType","userId","roleLTime","roleCTime"]},t}(PlatFormParam);__reflect(PlatFormXiaoQiAzRoleReportParam2.prototype,"PlatFormXiaoQiAzRoleReportParam2");var PlatFormXiaoQiAzRoleReportParam3=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.isUseEmptyValue=!0,this.keys=["game","mobile","channel","pvc","apkNum","callBackInfo","money","cpRoleId","extraRoleId","roleName","serverId","userId","cpOrderId","time","status","paymentName","currency"]},t}(PlatFormParam);__reflect(PlatFormXiaoQiAzRoleReportParam3.prototype,"PlatFormXiaoQiAzRoleReportParam3");var PlatFormXiaoQiAzRoleReportParam=function(){function e(){}return e}();__reflect(PlatFormXiaoQiAzRoleReportParam.prototype,"PlatFormXiaoQiAzRoleReportParam");var PlatFormXiaoQiAzRechargeParam=function(){function e(){}return e}();__reflect(PlatFormXiaoQiAzRechargeParam.prototype,"PlatFormXiaoQiAzRechargeParam");var PlatFormXiaoQiAzRechargeOrderParam=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["game_guid","subject","game_price","notify_id","game_access_version","game_orderid","game_area","game_level","game_role_id","game_role_name","extends_info_data"]},t}(PlatFormParam);__reflect(PlatFormXiaoQiAzRechargeOrderParam.prototype,"PlatFormXiaoQiAzRechargeOrderParam");var PlatFormXiaoQiAzLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["tokenkey"]},t}(PlatFormParam);__reflect(PlatFormXiaoQiAzLoginParam.prototype,"PlatFormXiaoQiAzLoginParam");var PlatFormXiaoQiAz=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new PlatFormXiaoQiAzLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zy2qy},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t=this,egret.ExternalInterface.call("init",""),console.log("英文XiaoQiAz"),egret.ExternalInterface.addCallback("X7sySDKSMInitListenerOnSuccess",function(e){console.log("初始化SDK成功----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("X7sySDKSMInitListenerOnFail",function(e){console.log("初始化SDK失败----------------------------"+e)}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLoginSuccess",function(e){console.log("登录成功----------------------------"+e),t.pfParam.tokenkey=e,t.onSuccess()}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLoginFailed",function(e){console.log("登录失败----------------------------"+e)}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLoginCancell",function(e){console.log("取消登录----------------------------"+e)}),egret.ExternalInterface.addCallback("X7sySDKSMLoginListenerOnLogoutSuccess",function(e){console.log("退出----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("X7sySDKSMPayListenerOnPaySuccess",function(e){console.log("支付成功----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKSMPayListenerOnPayFailed",function(e){console.log("支付失败----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKSMPayListenerOnPayCancell",function(e){console.log("支付取消----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKH5GameLog",function(e){console.log("日志----------------------------",e)}),egret.ExternalInterface.addCallback("X7sySDKOnBackPressed",function(e){console.log("backPress");var n=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(r.serverGgonggaoWin.close(),n=!0),!n&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),n=!0),n||(n=window.IGameMain&&window.IGameMain.backButton()),n&&egret.ExternalInterface.call("exitApp","")}),[2]})})},t.prototype.getOpenIdSuc=function(){var e=this.reportSDKLogin(),t=""+this.domain+this.pfPHP+"/api?m=reportExt&fn=post&type=login&"+e.toParamString();console.log("reportSDKLogin",t);var r=this.getHttp(t);console.log("reportSDKLogin",r)},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.enterGame=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("smAfterChooseRoleSendInfo",r);var n=this.reportSDKEnterGame(e),o=""+this.domain+this.pfPHP+"/api?m=reportExt&fn=post&type=setUserInfo&"+n.toParamString();console.log("reportSDKEnterGame",o);var a=this.getHttp(o);console.log("reportSDKEnterGame",a)},t.prototype.createRole=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("smAfterChooseRoleSendInfo",r)},t.prototype.roleUp=function(e){var t=this.getRoleReportParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("smAfterChooseRoleSendInfo",r)},t.prototype.checkChat=function(e){e.onSuccessCallback(e.chat_content)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l,u;return __generator(this,function(p){switch(p.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=p.sent())?(n=new PlatFormXiaoQiAzRechargeOrderParam,n.game_guid=this.pfParam.openId,n.subject=e.itemName,o=e.amountYuan.toString().split("."),a="",a="0"==o[0]?o[1]:""+o[0]+o[1],n.game_price=e.rmbsdkPay+".00",n.notify_id="-1",n.game_access_version="6.106",n.game_orderid=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.game_guid=this.pfParam.openId,n.game_area=EntranceParam.urlParam.serverName,n.game_role_id=t.actorId,n.game_level=t.actorLevel,n.game_role_name=t.actorName,n.extends_info_data=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,i=this.getCreatOrderUrl(n),console.log(i),[4,this.getHttp(i)]):[3,3];case 2:s=p.sent(),console.log(s),c=JSON.parse(s),200==c.code&&(console.log("调用充值200"),l=new PlatFormXiaoQiAzRechargeParam,l.game_guid=this.pfParam.openId,l.subject=e.itemName,l.game_price=n.game_price,l.notify_id=n.notify_id,l.game_access_version=n.game_access_version,l.game_sign=c.data.sign,l.game_orderid=n.game_orderid,l.game_area=EntranceParam.urlParam.serverName,l.game_role_id=t.actorId,l.game_level=t.actorLevel,l.game_role_name=t.actorName,l.extends_info_data=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,this.payParam=l,u=JSON.stringify(l),console.log("支付",u),this.payItem=e,this.extend=t,egret.ExternalInterface.call("pay",u)),p.label=3;case 3:return[2]}})})},t.prototype.getRoleReportParam=function(e){var t=new PlatFormXiaoQiAzRoleReportParam;return t.game_guid=this.pfParam.openId,t.game_area_id=EntranceParam.urlParam.srvid,t.game_area=EntranceParam.urlParam.serverName,t.game_role_id=e.actorId,t.game_role_name=e.actorName,t.role_level=e.actorLevel,t.role_ce=e.power,t.role_stage=e.guanId,t.role_recharge_amount="-1",t},t.prototype.reportSDKLogin=function(){var e=new PlatFormXiaoQiAzRoleReportParam1;return e.game="ashesstorm_q1",e.mobile="android",e.channel="160068",e.pvc="1",e.apkNum="海外",e.userId=""+EntranceParam.urlParam.openId,e.joinTime=""+(new Date).valueOf()/1e3,e.loginTime=""+(new Date).valueOf()/1e3,e.phoneid="",e.ip="",e},t.prototype.reportSDKEnterGame=function(e){var t=new PlatFormXiaoQiAzRoleReportParam2;return t.game="ashesstorm_q1",t.mobile="android",t.channel="160068",t.pvc="1",t.apkNum="海外",t.serverId=EntranceParam.urlParam.serverid,t.serverName=e.serverName,t.cpRoleId=""+EntranceParam.urlParam.openId,t.extraRoleId=""+EntranceParam.urlParam.openId,t.roleName=""+e.actorName,t.infoType="1",t.userId=""+EntranceParam.urlParam.openId,t.roleLTime=""+(new Date).valueOf()/1e3,t.roleCTime=""+Math.floor(e.createRoleTime),t},t.prototype.reportSDKPay=function(e,t){var r=new PlatFormXiaoQiAzRoleReportParam3;return r.game="ashesstorm_q1",r.mobile="android",r.channel="160068",r.pvc="1",r.apkNum="海外",r.callBackInfo=this.payParam.extends_info_data,r.money=""+100*e.rmbsdkPay,r.cpRoleId=""+EntranceParam.urlParam.openId,r.extraRoleId=""+EntranceParam.urlParam.openId,r.roleName=""+t.actorName,r.serverId=EntranceParam.urlParam.serverid,r.userId=""+EntranceParam.urlParam.openId,r.cpOrderId=this.payParam.game_orderid,r.time=""+Math.floor(new Date(t.serverTime).valueOf()/1e3),r.status="1",r.paymentName="",r.currency="CNY",r},t.prototype.reload=function(){location?location.reload():egret.ExternalInterface.call("smExitCurrent","")},t}(PlatFormWW);__reflect(PlatFormXiaoQiAz.prototype,"PlatFormXiaoQiAz");var BeginIOSLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["oauth_token"]},t}(PlatFormParam);__reflect(BeginIOSLoginParam.prototype,"BeginIOSLoginParam");var BeginIOSRechargeParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["cpOrderId","goodsId","goodsName","roleId","roleName","level","serverId","serverName","amount","extend_params"]},t}(PlatFormParam);__reflect(BeginIOSRechargeParam.prototype,"BeginIOSRechargeParam");var PlatFormBeginIOS=function(e){function t(){var t=e.call(this)||this;return t.appKey="078a737e92034f7fb217a4bf13563516",t.gameId="1090",t.vestId="128653",t.isLogin=!0,t.pfParam=new BeginIOSLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zy2youwang2},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),this.openBgWin(),t={appKey:this.appKey,gameId:this.gameId,vestId:this.vestId},egret.ExternalInterface.addCallback("BeginSDKInitIResultOnSuccess",function(e){console.log("BeginSDKInitIResultOnSuccess----------------------------"+e),r.isLogin&&egret.ExternalInterface.call("login","")}),egret.ExternalInterface.call("login",""),egret.ExternalInterface.addCallback("BeginSDKLoginIResultOnSuccess",function(e){if(r.isLogin){r.isLogin=!1,console.log("BeginSDKLoginIResultOnSuccess----------------------------"+e);var t=JSON.parse(e);r.pfParam.oauth_token=t.oauth_token,r.onSuccess()}}),egret.ExternalInterface.addCallback("BeginSDKLogoutOnLogout",function(e){console.log("BeginSDKLogoutOnLogout----------------------------"+e),r.reload()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=s.sent(),r&&(n=""+this.domain+this.pfPHP+"/payment",o=t.actorId+"_"+new Date(t.serverTime).valueOf(),a={cpOrderId:o,goodsId:e.shangpinId,goodsName:e.itemName,roleId:t.actorId,roleName:t.actorName,level:t.actorLevel,serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,amount:e.amount/100,extend_params:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+n},i=JSON.stringify(a),egret.ExternalInterface.call("pay",i)),[2]}})})},t.prototype.createRole=function(e){this.reportSDKData(e)},t.prototype.enterGame=function(e){this.reportSDKData(e)},t.prototype.roleUp=function(e){this.reportSDKData(e)},t.prototype.powerUp=function(e){},t.prototype.sVipExpChang=function(e){},t.prototype.reportSDKData=function(e,t){void 0===t&&(t=!1);var r={serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,isCreate:t?"1":"0",roleId:e.actorId,roleName:e.actorName,roleLevel:e.actorLevel||1},n=JSON.stringify(r);egret.ExternalInterface.call("roleUpdate",n)},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.closeShenHeSys=function(){return this.isShenhe?!0:!1},t.prototype.isShowServerList=function(){return 1==window.isShowServerList},t}(PlatFormWW);__reflect(PlatFormBeginIOS.prototype,"PlatFormBeginIOS");var LoginParamsBLH5=function(e){function t(){var t=e.call(this)||this;return t.userId="",t.gameId=0,t.adId="",t.os="",t.time=0,t.sign="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["userId","gameId","adId","os","time","sign","openId"]},t}(PlatFormParam);__reflect(LoginParamsBLH5.prototype,"LoginParamsBLH5");var RechargeParamBLH5=function(){function e(){this.gameId=0,this.adId="",this.cpOrderId="",this.userId="",this.serverId="",this.serverName="",this.roleId="",this.roleName="",this.roleLevel="",this.money=0,this.currency="",this.productId="",this.productName="",this.ext=""}return e}();__reflect(RechargeParamBLH5.prototype,"RechargeParamBLH5");var ReportParamBLH5=function(){function e(){this.gameId=0,this.adId="",this.userId="",this.type=1,this.serverId="",this.serverName="",this.roleId="",this.roleName="",this.roleLevel="",this.totalCurrency="",this.roleCreateTime="",this.power=0,this.vip=0}return e}();__reflect(ReportParamBLH5.prototype,"ReportParamBLH5");var ReportChatParamBLH5=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uid="",t.sid="",t.sname="",t.rid="",t.rname="",t.rlevel="",t.type="",t.content="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","sid","sname","rid","rname","rlevel","type","content"]},t}(PlatFormParam);__reflect(ReportChatParamBLH5.prototype,"ReportChatParamBLH5");var PlatFormBLH5=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsBLH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://d.luomufeila.com/file/js/sdk.js?v="+Math.random(),function(){t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(e?(n=new RechargeParamBLH5,n.gameId=this.pfParam.gameId,n.adId=this.pfParam.adId,n.cpOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.userId=this.pfParam.userId,n.serverId=""+EntranceParam.urlParam.srvid,n.serverName=""+EntranceParam.urlParam.serverName,n.roleId=""+t.actorId,n.roleName=t.actorName,n.roleLevel=""+t.actorLevel,n.money=e.amount/100,n.currency="100",n.productId=""+e.shangpinId,n.productName=e.itemName,n.ext=EntranceParam.urlParam.openId+"_"+EntranceParam.urlParam.srvid+"_"+t.actorId+"_"+e.yb,JYSDK.pay(n)):this.alert("错误的购买道具")),[2]}})})},t.prototype.openServerListWin=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return e.prototype.openServerListWin.call(this,t),[2]})})},t.prototype.createRole=function(e){var t=this.getBLReportParam(e,2);JYSDK.roleInfo(t)},t.prototype.enterGame=function(e){var t=this.getBLReportParam(e,3);JYSDK.roleInfo(t)},t.prototype.roleUp=function(t){e.prototype.roleUp;var r=this.getBLReportParam(t,4);JYSDK.roleInfo(r)},t.prototype.logout=function(e){var t=this.getBLReportParam(e,5);JYSDK.roleInfo(t),this.reload()},t.prototype.getBLReportParam=function(e,t){var r={gameId:this.pfParam.gameId,adId:this.pfParam.adId,userId:this.pfParam.userId,type:t,serverId:""+EntranceParam.urlParam.srvid,serverName:""+EntranceParam.urlParam.serverName,roleId:""+e.actorId,roleName:e.actorName,roleLevel:""+e.actorLevel,totalCurrency:""+e.yb,roleCreateTime:""+e.createRoleTime,power:e.power,vip:e.vipLevel+e.svipLevel};return r},t.prototype.checkChat=function(e){e.onSuccessCallback(e.chat_content);var t="世界";if(1==e.chat_scene)switch(e.chat_channel){case 1:t="世界";break;case 2:t="帮派";break;case 3:t="私聊";break;case 6:t="跨服";break;case 7:t="当前";break;default:t="其他"}else 2==e.chat_scene?t="创角":3==e.chat_scene?t="创帮派":4==e.chat_scene&&(t="帮派公告");var r=new ReportChatParamBLH5;r.uid=this.pfParam.userId,r.sid=""+EntranceParam.urlParam.srvid,r.sname=""+EntranceParam.urlParam.serverName,r.rid=""+e.sender_id,r.rname=""+e.sender_name,r.rlevel=""+e.sender_level,r.type=""+t,r.content=""+e.chat_content;var n=""+this.domain+this.pfPHP+"/api?m=player&fn=sendChat&"+r.toParamString();this.getHttp(n)},t}(PlatFormWW);__reflect(PlatFormBLH5.prototype,"PlatFormBLH5");var LoginParamsEwenH5=function(e){function t(){var t=e.call(this)||this;return t.game_user_id="",t.game_server_id="",t.last_name="",t.first_name="",t.nickname="",t.ts="",t.session_key="",t.extra="",t.sig="",t.isUseEmptyValue=!0,t}return __extends(t,e),t.prototype.init=function(){this.keys=["game_user_id","game_server_id","last_name","first_name","nickname","ts","session_key","extra","sig","openId"]},t}(PlatFormParam);__reflect(LoginParamsEwenH5.prototype,"LoginParamsEwenH5");var PlatFormEwenH5=function(e){function t(){var t=e.call(this)||this;return t.loginNum=0,t.josnProduct={},t.pfParam=new LoginParamsEwenH5,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.ewn},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://core.espritgames.ru/static/js/sdk/xdm.js",function(){t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.openServerWin=function(){if(this.pfParam.game_server_id&&+this.pfParam.game_server_id>0)if(this.loginNum++<3){var t=new ServerData;t.server_id=this.pfParam.game_server_id,this.callback(t)}else this.alert('Сервер "'+this.pfParam.game_server_id+'" заполнен, пожалуйста, выберите другой.');else e.prototype.openServerWin.call(this)},t.prototype.createRole=function(e){},t.prototype.enterGame=function(e){window.pubEvent("game.entrance",{nickname:e.actorName})},t.prototype.roleUp=function(e){window.pubEvent("game.levelUp",{level:e.actorLevel})},t.prototype.checkChat=function(e){(2==e.chat_scene||3==e.chat_scene)&&(e.chat_content.length<4||e.chat_content.length>16)?e.onFailCallback("Имя персонажа должно быть от 4 до 16 символов."):e.onSuccessCallback(e.chat_content)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,window.callMethod("showRechargePopup",{packId:e.shangpinId,transit:{ext:n}},function(){console.log("支付成功")},function(){console.log("支付失败")})),[2]}})})},t.prototype.setProducts=function(e){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return console.log("setProducts"),e={1:"VK",2:"ОК",3:"MM","ФМ":"ФМ",RUB:"₽",YAN:"YAN",RBK:"RBK",GameNet:"GN",EUR:"€",PLN:"zł",CZK:"Kč",101:"$"},t=""+this.domain+this.pfPHP+"/api?m=player&fn=getPacksInfo&game_user_id="+this.pfParam.game_user_id+"&session_key="+this.pfParam.session_key,[4,this.getHttp(t)];case 1:if(r=c.sent(),n=JSON.parse(r),200==n.code){this.josnProduct={};for(o in n.data)a=n.data[o].packId,i=e[n.data[o].price.currency]||"",s=n.data[o].price.amount+i,this.josnProduct[a]=s}return[2]}})})},t.prototype.getProduct=function(e){return console.log("getProducts"),this.josnProduct[e.shangpinId]||""},t.prototype.reload=function(){console.log("reload"),window.callMethod("reloadGame")},t}(PlatFormWW);__reflect(PlatFormEwenH5.prototype,"PlatFormEwenH5");var RechargeParamsHHTDH5=function(){function e(){}return e}();__reflect(RechargeParamsHHTDH5.prototype,"RechargeParamsHHTDH5");var ReportParamHHTDH5=function(){function e(){}return e}();__reflect(ReportParamHHTDH5.prototype,"ReportParamHHTDH5");var DataTypeHHTDH5;!function(e){e[e.selectServer=1]="selectServer",e[e.createRole=2]="createRole",e[e.enterGame=3]="enterGame",e[e.roleUp=4]="roleUp",e[e.logout=5]="logout"}(DataTypeHHTDH5||(DataTypeHHTDH5={}));var LoginParamHHTDH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","uname","appid","os","time","sign"]},t}(PlatFormParam);__reflect(LoginParamHHTDH5.prototype,"LoginParamHHTDH5");var PlatFormHHTDH5=function(e){function t(){var t=e.call(this)||this;return t.game_id=130,t.domain="https://sydl-login.gzxinghu.com/",t.pfParam=new LoginParamHHTDH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),window.loadSingleScript("https://jsapi.vmicro.cn/js/game/sdk-init.js?v="+Math.random(),function(){t.openSelectServer()}),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(e?(n=new RechargeParamsHHTDH5,n.buyNum=1,n.coin=100,n.game_id=this.game_id,n.server_id=EntranceParam.urlParam.srvid,n.server_name=EntranceParam.urlParam.serverName,n.uid=this.pfParam.uid,n.role_name=t.actorName,n.role_level=t.actorLevel,n.vip=t.vipLevel+t.svipLevel,n.money=e.amount/100,n.game_gold=e.yb,n.role_id=t.actorId,n.product_id=e.yb,n.product_name=e.itemName,n.product_desc=e.desc,n.ext=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,window.wzSDK.pay(n)):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.createRole=function(e){this.reportSDK(DataTypeHHTDH5.createRole,e)},t.prototype.enterGame=function(e){this.reportSDK(DataTypeHHTDH5.enterGame,e)},t.prototype.roleUp=function(e){this.reportSDK(DataTypeHHTDH5.roleUp,e)},t.prototype.logout=function(e){this.reportSDK(DataTypeHHTDH5.logout,e)},t.prototype.reportSDK=function(e,t){var r=this.getReportParam(e,t);window.wzSDK.reportUserInfo(r)},t.prototype.getReportParam=function(e,t){var r=new ReportParamHHTDH5;return r.dataType=e,r.appid=this.game_id,r.serverID=EntranceParam.urlParam.srvid,r.serverName=EntranceParam.urlParam.serverName,r.userId=this.pfParam.uid,r.roleID=t.actorId,r.roleName=t.actorName,r.roleLevel=t.actorLevel,r.moneyNum=t.yb,r},t.prototype.getPfPay=function(){return PfPay.wxxyx},t.prototype.getISBN=function(){return window.ISBN||""},t.prototype.getLogoName=function(){return"logo_huohua.png"},t}(PlatFormWW);__reflect(PlatFormHHTDH5.prototype,"PlatFormHHTDH5"),window.PlatFormHHTDH5=PlatFormHHTDH5;var LoginParamsHHTDWXXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","openId"]},t}(PlatFormParam);__reflect(LoginParamsHHTDWXXYX.prototype,"LoginParamsHHTDWXXYX");var CreateOrderParamsHHTDWXXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["dsid","dsname","drid","drname","drlevel","money","dext"]},t}(PlatFormParam);__reflect(CreateOrderParamsHHTDWXXYX.prototype,"CreateOrderParamsHHTDWXXYX");var PlatFormHHTDWXXYX=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.scene=0,t.appId="wxdba6299cf208160d",t.domain="https://sydl-login.gzxinghu.com/",t.pfParam=new LoginParamsHHTDWXXYX,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.wxxyx},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return this.initWin(),e=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return t=s.sent(),this._isIosShowRecharge="1"==t,[4,this.getHttp(this.getVerUrl())];case 2:return r=s.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=void 0==window.v||window.v>o,a=window.wx.getLaunchOptionsSync(),this.scene=a.scene,this.query=a.query,console.log("scene:"+this.scene),i=new SubPacketParam,i.name="js1",i.success=function(t){e.initLoginParam()},i.fail=function(t){var r="";for(var n in t)r+=n+"="+t[n]+"\n";e.openTipsWin("wx.loadSubpackage失败\n"+r)},window.wx.loadSubpackage(i),[2]}})})},t.prototype.initLoginParam=function(){var e=this;this.sdk.init({authExtend:"0"}).then(function(t){e.pfParam.token=t.token,console.log("MYWxGameSdk init data:",t),console.log("MYWxGameSdk init token:"+t.token),e.openSelectServer()})},t.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,n){window.wx.request({url:e,success:function(e){r(e.data)},fail:function(){r(null)},dataType:"text",responseType:t})})]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=c.sent())?(console.log("调用充值"),n=new CreateOrderParamsHHTDWXXYX,n.dsid=EntranceParam.urlParam.srvid,n.dsname=EntranceParam.urlParam.serverName,n.drid=""+t.actorId,n.drname=""+t.actorName,n.drlevel=""+t.actorLevel,n.money=e.amount.toString(),n.dext=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),console.log(o),[4,this.getHttp(o)]):[3,3];case 2:a=c.sent(),console.log(a),i=JSON.parse(a),200==i.code?(s={dsn:i.data.dsn,dsid:EntranceParam.urlParam.srvid,dsname:EntranceParam.urlParam.serverName,drid:t.actorId.toString(),drname:t.actorName,drlevel:t.actorLevel.toString(),money:e.amount.toString(),dext:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,time:i.data.time,sign:i.data.sign},console.log("MYWxGameSdk pay param:",s),this.sdk.pay(s).then(function(e){console.log("MYWxGameSdk pay then:",e)})["catch"](function(e){console.log("MYWxGameSdk pay catch",e)})):this.alert("充值失败:"+i.msg),c.label=3;case 3:return[2]}})})},t.prototype.createRole=function(e){this.reportSDK("31",e)},t.prototype.enterGame=function(e){this.reportSDK("32",e)},t.prototype.roleUp=function(e){this.reportSDK("35",e)},t.prototype.powerUp=function(e){this.reportSDK("38",e)},t.prototype.reportSDK=function(e,t){var r={dsid:""+EntranceParam.urlParam.srvid,dsname:""+t.serverName,drid:""+t.actorId,drname:""+t.actorName,drlevel:""+t.actorLevel,drbalance:""+t.yb,drvip:""+(t.vipLevel+t.svipLevel),dcountry:""+t.guildName,dparty:""+t.guildName,dext:{},eid:""+e};this.sdk.event(r)},Object.defineProperty(t.prototype,"sdk",{get:function(){return window.MYWxGameSdk},enumerable:!0,configurable:!0}),t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIos()?this.isShenhe?!1:this._isIosShowRecharge:!0
},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.isIos=function(){var e=window.wx.getSystemInfoSync(),t=e.system.indexOf("iOS")>=0;return t},t.prototype.getSceneType=function(){return this.scene},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.getQuality=function(){return 0},t.prototype.getDestroyTime=function(){return 90},t.prototype.isShowShoucang=function(){return!0},t.prototype.showShare=function(){window.wx.shareAppMessage({title:this.getTitle(),imageUrl:this.getImgUrl(),query:this.getQuery()}),this.shareCallback(!0),console.log("主动拉起转发，进入选择通讯录界面1")},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getTitle=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.isOpenShare=function(e){e(2)},t.prototype.setShareCallback=function(e){this.shareCallback=e},t.prototype.requestInviteInfo=function(){var e="";if("string"==typeof this.query)e=this.query;else for(var t in this.query)e+=t+"="+this.query[t]+"&";if(this.query.invite_account&&this.query.invite_server_id){var r=""+this.domain+this.pfPHP+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+e;this.getHttp(r)}},t.prototype.getISBN=function(){return window.ISBN||""},t.prototype.getLogoName=function(){return"logo_huohua.png"},t.prototype.isShowYqhl=function(){return!0},t}(PlatFormWW);__reflect(PlatFormHHTDWXXYX.prototype,"PlatFormHHTDWXXYX"),window.PlatFormHHTDWXXYX=PlatFormHHTDWXXYX;var PlatFormHWAzOne=function(e){function t(){var t=e.call(this)||this;return t.adjustEventKey={Purchase:"by3137",app_start:"h89hr9",app_login:"bjr8jo",app_role:"4tj1io",Equip_lottery_10th:"7kdhxa",Horcrux_lottery_10th:"4f8rlp",Rune_lottery_10th:"tau5r8",Peak_lottery_10th:"pwagpy",God_lottery_10th:"7uqhjn",Spirit_lottery_10th:"9ndg3h",tutorial_start:"2draao",tutorial_end:"k1kwty",Finish_stage_06:"mbdf0e",VIP2:"dwo0yg",Chat:"qvfvk9",Finish_stage_15:"m982fj",Smelt:"p53zw0",Finish_stage_40:"xuxa8q",Online_30:"bh44y1",Online_60:"z7twgw",Finish_stage_50:"eurgj4",Flashsale:"80nwjz",Templeboss:"kiyi2j",Level_800:"hohsaq",Level_880:"m5xndh",Level_1030:"hd5ywi",Level_1100:"densj5",Level_1170:"kchlr9",Level_1290:"mkn75b",Level_1520:"j40fjd"},t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.hwOne},t}(PlatFormHWAzGoogle);__reflect(PlatFormHWAzOne.prototype,"PlatFormHWAzOne");var PlatFormHWAzSam=function(e){function t(){var t=e.call(this)||this;return t.adjustEventKey={Purchase:"4bxd74",app_start:"5r9pjt",app_login:"ajqc3l",app_role:"wq28gr",Equip_lottery_10th:"5z56v5",Horcrux_lottery_10th:"k4e4fp",Rune_lottery_10th:"bpmu2f",Peak_lottery_10th:"lrrr3a",God_lottery_10th:"jchdw7",Spirit_lottery_10th:"yoxvx6",tutorial_start:"joyucb",tutorial_end:"joyucb",Finish_stage_06:"sc2iii",VIP2:"tp30br",Chat:"",Finish_stage_15:"ybqtkm",Smelt:"clcqmm",Finish_stage_40:"e92mmd",Online_30:"dzaxjd",Online_60:"c2ivb8",Finish_stage_50:"89asd6",Flashsale:"b1f4ku",Templeboss:"",Level_800:"qbugjj",Level_880:"p0c3l5",Level_1030:"xm4nj4",Level_1100:"gj1xo4",Level_1170:"ca4njt",Level_1290:"g6m9ui",Level_1520:"5c6k9y"},t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.hwSam},t}(PlatFormHWAzGoogle);__reflect(PlatFormHWAzSam.prototype,"PlatFormHWAzSam");var LoginParamsHWH5=function(e){function t(){var t=e.call(this)||this;return t.account="",t.server_id="",t.fcm=0,t.time=0,t.extend="",t.sign="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["account","server_id","fcm","time","extend","sign","openId"]},t}(PlatFormParam);__reflect(LoginParamsHWH5.prototype,"LoginParamsHWH5");var RechargeParamHWH5=function(e){function t(){var t=e.call(this)||this;return t.money=0,t.productid="",t.server="",t.spid="",t.extInfo="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["money","productid","server","spid","extInfo"]},t}(PlatFormParam);__reflect(RechargeParamHWH5.prototype,"RechargeParamHWH5");var PlatFormHWH5=function(e){function t(){var t=e.call(this)||this;return t.loginNum=0,t.pfParam=new LoginParamsHWH5,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.hwPc},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.loginNum=0,this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://member.kingkongsoft.kr/libs/js/nb_sdk.js",function(){t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.openServerWin=function(){if(this.loginNum++<3){var e=new ServerData;e.server_id=this.pfParam.server_id,this.callback(e)}else this.alert("loginError,server_id="+this.pfParam.server_id)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=s.sent())?(n=new RechargeParamHWH5,n.money=e.amount/100,n.productid=""+e.shangpinId,n.server=EntranceParam.urlParam.srvid,n.spid=this.pfParam.account,n.extInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),[4,this.getHttp(o)]):[3,3];case 2:a=s.sent(),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),window.nbSdk.pay(i.data)):this.alert("充值失败"),s.label=3;case 3:return[2]}})})},t.prototype.isShowPayItem=function(e){return 0==e||1==e},t.prototype.isCustomerBtn=function(e){e(1)},t.prototype.sendService=function(e){e.onSuccessCallback()},t}(PlatFormWW);__reflect(PlatFormHWH5.prototype,"PlatFormHWH5");var HWIosLoginParam=function(e){function t(){var t=e.call(this)||this;return t.token="0",t.userid="0",t.applicationId="0",t.authCode="0",t.keys=["token","userid","applicationId","authCode"],t}return __extends(t,e),t}(PlatFormParam);__reflect(HWIosLoginParam.prototype,"HWIosLoginParam");var HWIosPayParam=function(e){function t(){var t=e.call(this)||this;return t.product_id="",t.game_order_id="",t.ext="",t.keys=["product_id","game_order_id","ext"],t}return __extends(t,e),t}(PlatFormParam);__reflect(HWIosPayParam.prototype,"HWIosPayParam");var PlatFormHWIos=function(e){function t(){var t=e.call(this)||this;return t.adjustEventKey={Purchase:"68n71c",app_start:"y0sdf2",app_login:"xmg7r4",app_role:"8etufc",Equip_lottery_10th:"xav8ed",Horcrux_lottery_10th:"qun6yy",Rune_lottery_10th:"s1j2bo",Peak_lottery_10th:"rypb68",God_lottery_10th:"z3g932",Spirit_lottery_10th:"q2alkv",tutorial_start:"su5g6l",tutorial_end:"j2k2j3",Finish_stage_06:"50hg77",VIP2:"7uxuq1",Chat:"xt45wo",Finish_stage_15:"mjfpu5",Smelt:"8vivns",Finish_stage_40:"ev8i45",Online_30:"53fucf",Online_60:"bud2xv",Finish_stage_50:"lwljaw",Flashsale:"30xamf",Templeboss:"vl8gmg",Level_800:"8jmur0",Level_880:"dz5yii",Level_1030:"gsqtih",Level_1100:"eyo4b9",Level_1170:"uqcvrp",Level_1290:"yjc26z",Level_1520:"dv6hx0"},t.pfParam=new HWIosLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.hwIos},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var r,n,o,a=this;return __generator(this,function(i){switch(i.label){case 0:return console.log("初始化 init"),e.prototype.init.call(this),[4,this.getHttp(this.getVerUrl())];case 1:return r=i.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>o,this.reportAdjust("app_start"),console.log("请求 login"),egret.ExternalInterface.call("login",""),egret.ExternalInterface.addCallback("loginCallback",function(e){console.log("接收 loginCallback");var t=JSON.parse(e);a.pfParam.token=t.token,a.pfParam.userid=t.userId,a.pfParam.applicationId=t.applicationId,a.pfParam.authCode=t.authCode,a.reportAdjust("app_login"),a.openSelectServer()}),egret.ExternalInterface.addCallback("payCallback",function(e){a.reportAdjustRecharge("Purchase",""+t.payAmount)}),[2]}})})},t.prototype.showRecharge=function(e,r){return __awaiter(this,void 0,void 0,function(){var n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(n=l.sent())?(console.log("调用充值"),o=new HWIosPayParam,o.product_id=""+e.shangpinId,o.game_order_id=r.actorId+"_"+new Date(r.serverTime).valueOf()+"_"+Math.random(),o.ext=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+r.actorId+"|"+e.yb+"|"+e.amount,a=this.getCreatOrderUrl(o),console.log(a),[4,this.getHttp(a)]):[3,3];case 2:i=l.sent(),console.log(i),s=JSON.parse(i),200==s.code?(t.payAmount=e.amount/100,c={product_id:e.shangpinId,game_order_id:o.game_order_id},egret.ExternalInterface.call("pay",JSON.stringify(c))):this.alert(s.msg),l.label=3;case 3:return[2]}})})},t.prototype.createRole=function(e){this.reportAdjust("app_role",e)},t.prototype.enterGame=function(e){},t.prototype.guanQiaUp=function(e){switch(e.guanId){case 1:this.reportAdjust("tutorial_start",e);break;case 20:this.reportAdjust("tutorial_end",e);break;case 6:this.reportAdjust("Finish_stage_06",e);break;case 15:this.reportAdjust("Finish_stage_15",e);break;case 40:this.reportAdjust("Finish_stage_40",e);break;case 50:this.reportAdjust("Finish_stage_50",e)}},t.prototype.roleUp=function(e){switch(e.actorLevel){case 800:this.reportAdjust("Level_800",e);break;case 880:this.reportAdjust("Level_880",e);break;case 1030:this.reportAdjust("Level_1030",e);break;case 1100:this.reportAdjust("Level_1100",e);break;case 1170:this.reportAdjust("Level_1170",e);break;case 1290:this.reportAdjust("Level_1290",e);break;case 1520:this.reportAdjust("Level_1520",e)}},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.isShowPayItem=function(e){return 0==e||2==e},t.prototype.logout=function(e){},t.prototype.reportAdjust=function(e,t){if(this.adjustEventKey[e]){var r={event:this.adjustEventKey[e]};egret.ExternalInterface.call("sendEvent",JSON.stringify(r))}},t.prototype.reportAdjustRecharge=function(e,t){if(this.adjustEventKey[e]){var r={eventToken:this.adjustEventKey[e],revenue:t,currency:"KRW"};egret.ExternalInterface.call("sendEventWithRevenue",JSON.stringify(r))}},t.payAmount=0,t}(PlatFormWW);__reflect(PlatFormHWIos.prototype,"PlatFormHWIos");var LoginParamHYAZ=function(e){function t(){var t=e.call(this)||this;return t.keys=["openId","user_id","timestamp","gid","sign","appid"],t}return __extends(t,e),t.prototype.setData=function(e){this.openId=e.user_id,this.user_id=e.user_id,this.timestamp=e.timestamp,this.gid=e.gid,this.sign=e.sign},t}(PlatFormParam);__reflect(LoginParamHYAZ.prototype,"LoginParamHYAZ");var ReportParamHYAZ=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["serverId","serverName","partyId","partyName","roleId","roleName","roleLevel","roleCreateTime","roleLevelUpTime","vip","balance","submitType"],this.isUseEmptyValue=!0},t}(PlatFormParam);__reflect(ReportParamHYAZ.prototype,"ReportParamHYAZ");var PayParamHYAZ=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["serverId","serverName","partyName","roleId","roleName","roleLevel","vip","balance","ratio","totalPrice","productId","productName","productDesc","perPrice","buyNum","callbackUrl","extension","gameOrderID","timeStamp"],this.isUseEmptyValue=!0},t}(PlatFormParam);__reflect(PayParamHYAZ.prototype,"PayParamHYAZ");var PlatFormHYAZ=function(e){function t(t){var r=e.call(this)||this;return r.domain="https://zycshy-login.gzxinghu.com/",r.pfParam=new LoginParamHYAZ,r.pfParam.appid=t,r}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.openBgWin(),t=egret.getOption("init_state"),t?document.location.href="gamblesdk://login":this.alert("初始化失败,请重新登录",1),[2]})})},t.prototype.createRole=function(e){document.location.href="gamblesdk://submitRoleInfo?"+this.getReportParam(2,e).toParamString()},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n=new PayParamHYAZ,n.serverId=EntranceParam.urlParam.srvid,n.serverName=EntranceParam.urlParam.serverName,n.partyName=t.guildName,n.roleId=t.actorId,n.roleName=t.actorName,n.roleLevel=t.actorLevel,n.vip=t.vipLevel+t.svipLevel,n.balance=t.yb,n.ratio=100,n.totalPrice=e.amount,n.productId=e.yb,n.productName=e.itemName,n.productDesc=e.desc,n.perPrice="分",n.buyNum=1,n.callbackUrl="https://zycshy-login.gzxinghu.com/hyhf/payment",n.extension=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+this.pfParam.appid,n.gameOrderID=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.timeStamp=new Date(t.serverTime).valueOf(),console.log("showRecharge:"+n.toParamString()),document.location.href="gamblesdk://pay?"+n.toParamString()),[2]}})})},t.prototype.getReportParam=function(e,t){var r=new ReportParamHYAZ;return r.submitType=e,r.serverId=EntranceParam.urlParam.srvid,r.serverName=EntranceParam.urlParam.serverName,r.partyId=t.guildId,r.partyName=t.guildName,r.roleId=t.actorId,r.roleName=t.actorName,r.roleLevel=t.actorLevel,r.roleCreateTime=t.createRoleTime,r.roleLevelUpTime=t.serverTime,r.vip=t.vipLevel+t.svipLevel,r.balance=t.yb,r},t.prototype.enterGame=function(e){document.location.href="gamblesdk://submitRoleInfo?"+this.getReportParam(3,e).toParamString()},t.prototype.roleUp=function(e){document.location.href="gamblesdk://submitRoleInfo?"+this.getReportParam(4,e).toParamString()},t.prototype.sendService=function(e){},t.prototype.logout=function(e){document.location.href="gamblesdk://submitRoleInfo?"+this.getReportParam(5,e).toParamString(),document.location.href="gamblesdk://logout"},t.prototype.getISBN=function(){return LangEntry.str4},t.prototype.relogin=function(){document.location.href="gamblesdk://logout",e.prototype.relogin.call(this)},t.prototype.roleUpReportLevel=function(){return 1},t}(PlatFormWW);__reflect(PlatFormHYAZ.prototype,"PlatFormHYAZ"),window.PlatFormHYAZ=PlatFormHYAZ;var LoginParamHYIOS=function(e){function t(){var t=e.call(this)||this;return t.keys=["openId","user_id","timestamp","gid","sign","appid"],t}return __extends(t,e),t.prototype.setData=function(e){this.openId=e.user_id,this.user_id=e.user_id,this.timestamp=e.timestamp,this.gid=e.gid,this.sign=e.sign},t}(PlatFormParam);__reflect(LoginParamHYIOS.prototype,"LoginParamHYIOS");var ReportParamHYIOS=function(){function e(){}return e}();__reflect(ReportParamHYIOS.prototype,"ReportParamHYIOS");var PayParamHYIOS=function(){function e(){}return e}();__reflect(PayParamHYIOS.prototype,"PayParamHYIOS");var SubmitTypeHYIOS=function(){function e(){}return e.TYPE_SELECT_SERVER="TYPE_SELECT_SERVER",e.TYPE_CREATE_ROLE="TYPE_CREATE_ROLE",e.TYPE_ENTER_GAME="TYPE_ENTER_GAME",e.TYPE_LEVEL_UP="TYPE_LEVEL_UP",e.TYPE_EXIT_GAME="TYPE_EXIT_GAME",e}();__reflect(SubmitTypeHYIOS.prototype,"SubmitTypeHYIOS");var PlatFormHYIOS=function(e){function t(t){var r=e.call(this)||this;return r.domain="https://zycshy-login.gzxinghu.com/",r.pfParam=new LoginParamHYIOS,r.pfParam.appid=t,r}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.openBgWin(),t={method:"login",params:{}},window.webkit.messageHandlers.GambleSDK.postMessage(t),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(n={},n.ServerId=EntranceParam.urlParam.srvid,n.ServerName=EntranceParam.urlParam.serverName,n.PartyName=t.guildName,n.RoleId=t.actorId,n.RoleName=t.actorName,n.RoleLevel=t.actorLevel,n.Vip=t.vipLevel+t.svipLevel,n.Balance=t.yb,n.Ratio=100,n.TotalPrice=e.amount,n.ProductId=e.yb,n.ProductName=e.itemName,n.ProductDesc=e.desc,n.Per_price="分",n.BuyNum=1,n.CallBackUrl="https://zycshy-login.gzxinghu.com/hyhf/payment",n.GameOrderID=n.Extension=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+this.pfParam.appid,n.TimeStamp=new Date(t.serverTime).valueOf(),o={method:"pay",params:n},window.webkit.messageHandlers.GambleSDK.postMessage(o)),[2]}})})},t.prototype.getReportParam=function(e,t){var r={};return r.SubmitType=e,r.ServerId=EntranceParam.urlParam.srvid,r.ServerName=EntranceParam.urlParam.serverName,r.PartyId=t.guildId,r.PartyName=t.guildName,r.RoleId=t.actorId,r.RoleName=t.actorName,r.RoleLevel=t.actorLevel,r.RoleCreateTime=t.createRoleTime,r.RoleLevelUpTime=t.serverTime,r.Vip=t.vipLevel+t.svipLevel,r.Balance=t.yb,r},t.prototype.reportSDK=function(e,t){var r={method:"submitRoleInfo",params:this.getReportParam(e,t)};window.webkit.messageHandlers.GambleSDK.postMessage(r)},t.prototype.createRole=function(e){this.reportSDK(SubmitTypeHYIOS.TYPE_CREATE_ROLE,e)},t.prototype.enterGame=function(e){this.reportSDK(SubmitTypeHYIOS.TYPE_ENTER_GAME,e)},t.prototype.roleUp=function(e){this.reportSDK(SubmitTypeHYIOS.TYPE_LEVEL_UP,e)},t.prototype.sendService=function(e){},t.prototype.logout=function(e){this.reportSDK(SubmitTypeHYIOS.TYPE_EXIT_GAME,e),this.reload()},t.prototype.getISBN=function(){return LangEntry.str4},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.relogin=function(){var t={method:"logout",params:{}};window.webkit.messageHandlers.GambleSDK.postMessage(t),e.prototype.relogin.call(this)},t}(PlatFormWW);__reflect(PlatFormHYIOS.prototype,"PlatFormHYIOS"),window.PlatFormHYIOS=PlatFormHYIOS;var JhzkAzRoleParam=function(){function e(){}return e}();__reflect(JhzkAzRoleParam.prototype,"JhzkAzRoleParam");var JhzkAzRechargeParam=function(){function e(){}return e}();__reflect(JhzkAzRechargeParam.prototype,"JhzkAzRechargeParam");var PlatformJhzkAzLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["username","token","logintime","openId"]},t}(PlatFormParam);__reflect(PlatformJhzkAzLoginParam.prototype,"PlatformJhzkAzLoginParam");var PlatformJhzkAz=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zy2jhzk-login.qmh5yx.com/",t.pfParam=new PlatformJhzkAzLoginParam,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this)];case 1:return r.sent(),egret.ExternalInterface.call("init",""),egret.ExternalInterface.addCallback("WancmsSDKInitLinstenerOnSuccess",function(e){console.log("初始化SDK成功----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("WancmsSDKInitLinstenerOnFailed",function(e){console.log("初始化SDK失败----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKLoginLinstenerOnSuccess",function(e){console.log("登录成功----------------------------"+e);var r=JSON.parse(e);t.pfParam.username=r.user_name,t.pfParam.token=r.token,t.pfParam.logintime=r.login_time,t.openGame()}),egret.ExternalInterface.addCallback("WancmsSDKLoginLinstenerOnFailed",function(e){console.log("登录失败----------------------------"+e),t.alert("登录失败-"+e)}),egret.ExternalInterface.addCallback("WancmsSDKLoginOutLinstenerOnSuccess",function(e){console.log("注销成功----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("WancmsSDKLoginOutLinstenerOnFailed",function(e){console.log("注销失败----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKSwitchUserLinstenerOnSuccess",function(e){console.log("切换账号成功----------------------------"+e);var r=JSON.parse(e);t.pfParam.username=r.user_name,t.pfParam.token=r.token,t.pfParam.logintime=r.login_time,t.openGame()}),egret.ExternalInterface.addCallback("WancmsSDKSwitchUserLinstenerOnFailed",function(e){console.log("切换账号失败----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKPayLinstenerOnSuccess",function(e){console.log("支付成功----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKPayLinstenerOnCancel",function(e){console.log("支付取消----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKPayLinstenerOnFailed",function(e){console.log("支付失败----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKH5GameLog",function(e){console.log("日志打印----------------------------"+e)}),egret.ExternalInterface.addCallback("WancmsSDKOnBackPressed",function(e){console.log("退出游戏----------------------------"+e);var r=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(t.serverGgonggaoWin.close(),r=!0),!r&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),r=!0),r||(r=window.IGameMain&&window.IGameMain.backButton()),r||egret.ExternalInterface.call("showExitDialod","")}),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),console.log("调用充值",r),r?e?(n={},n.user_level=t.actorLevel,n.cp_order_id=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=e.amount/100,n.count=1,n.goods_id=e.shangpinId,n.goods_name=e.itemName,n.goods_desc=e.desc,n.vip_level=t.vipLevel,n.server_id=EntranceParam.urlParam.srvid,n.server_name=EntranceParam.urlParam.serverName,n.role_id=t.actorId,n.role_name=t.actorName,n.party_name=t.guildName,n.game_role_balance=t.yb,n.extras_params=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=JSON.stringify(n),console.log("支付:",o),egret.ExternalInterface.call("pay",o)):window.platform.alert("错误的购买道具"):console.log("不能充值"),[2]}})})},t.prototype.createRole=function(e){var t=this.getSDKRoleParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("setRoleInfo",r)},t.prototype.enterGame=function(e){var t=this.getSDKRoleParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("setRoleInfo",r)},t.prototype.powerUp=function(e){var t=this.getSDKRoleParam(e),r=JSON.stringify(t);egret.ExternalInterface.call("setRoleInfo",r)},t.prototype.getSDKRoleParam=function(e){var t={};return t.server_id=EntranceParam.urlParam.srvid,t.server_name=EntranceParam.urlParam.serverName,t.role_id=e.actorId,t.role_name=e.actorName,t.role_level=e.actorLevel,t.role_create_time=e.createRoleTime,t.game_role_gender=1,t.game_role_power=e.power,t.game_role_balance=e.yb,t.vip_level=e.vipLevel,t.profession_id=1,t.profession="",t.party_id=e.guildId,t.party_name=e.guildName,t.profession_id=1,t.party_role_name="",t.friend_list="",t},t.prototype.reload=function(){location?location.reload():egret.ExternalInterface.call("loginOut","")},t}(PlatFormWW);__reflect(PlatformJhzkAz.prototype,"PlatformJhzkAz");var LoginParamsKYH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["UserCode","LoginToken"]},t}(PlatFormParam);__reflect(LoginParamsKYH5.prototype,"LoginParamsKYH5");var KYSubmitParam=function(){function e(){this.scene_Id="enterServer",this.processId="0",this.roleId="0",this.roleTime="0",this.roleName="0",this.level="0",this.serverId="0",this.serverName="0",this.balance="0",this.vip="0",this.currency="0",this.power="0",this.userCode="0"}return e}();__reflect(KYSubmitParam.prototype,"KYSubmitParam");var KYRechargeParam=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userCode="0",t.billNo="0",t.productId="0",t.extraInfo="0",t.serverId="0",t.serverName="0",t.roleName="0",t.roleId="0",t.level="0",t.balance="0",t.currency="0",t.vip="0",t.power="0",t.partyName="0",t}return __extends(t,e),t.prototype.init=function(){this.keys=["userCode","billNo","productId","extraInfo","serverId","serverName","roleName","roleId","level","vip","balance"]},t}(PlatFormParam);__reflect(KYRechargeParam.prototype,"KYRechargeParam");var PlatFormKYH5=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsKYH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://h5.hnguangyi.cn/static/admin/js/h5/cmgcwlCore.js",function(){t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openSelectServer(),[2]}})})},t.prototype.createRole=function(e){var t=this.getKYYXSubmitParam(e,"createRole");this.getH5gamecn().submitAccount(t)},t.prototype.enterGame=function(e){var t=this.getKYYXSubmitParam(e,"enterServer");this.getH5gamecn().submitAccount(t)},t.prototype.roleUp=function(e){var t=this.getKYYXSubmitParam(e,"levelUp");this.getH5gamecn().submitAccount(t)},t.prototype.getKYYXSubmitParam=function(e,t){var r={};return r.scene_Id=t,r.roleId=""+e.actorId||"0",r.roleTime=""+e.createRoleTime||"0",r.roleName=""+e.actorName||"0",r.level=""+e.actorLevel||"0",r.serverId=""+EntranceParam.urlParam.srvid||"0",r.serverName=""+e.serverName||"0",r.vip=""+e.svipLevel||"0",r.currency=""+e.yb||"0",r.power=""+e.power||"0",r.userCode=""+this.pfParam.UserCode||"0",r.processId="0",r.balance="0",r},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=i.sent(),r&&(e?(n=t.actorId+"_"+new Date(t.serverTime).valueOf(),o=new KYRechargeParam,o.billNo=n,o.productId="zycs_"+e.yb,o.serverName=""+t.serverName,o.serverId=""+EntranceParam.urlParam.srvid,o.roleName=""+t.actorName,o.roleId=""+t.actorId,o.level=""+t.actorLevel,o.vip=""+t.svipLevel,o.currency=""+t.yb,o.power=""+t.power,o.userCode=""+this.pfParam.UserCode,o.extraInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,a=this.getH5gamecn().payment(o)):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.getVerifyInfo=function(e,t){},t.prototype.getH5gamecn=function(){return window.cmgcwl||(window.cmgcwl=new DebugKYSDK),window.cmgcwl},t.prototype.postHttp=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,Http.post(e)]})})},t}(PlatFormWW);__reflect(PlatFormKYH5.prototype,"PlatFormKYH5");var DebugKYSDK=function(){function e(){}return e.prototype.submitAccount=function(e){},e.prototype.payment=function(e){},e.prototype.exit=function(){},e.prototype.addQGroup=function(e){},e.prototype.isRealCallBack=function(e){},e.prototype.logout=function(){},e}();__reflect(DebugKYSDK.prototype,"DebugKYSDK",["KYSDK"]);var ZSRechargeParams=function(){function e(){}return e}();__reflect(ZSRechargeParams.prototype,"ZSRechargeParams");var ZSReportParam=function(){function e(){}return e}();__reflect(ZSReportParam.prototype,"ZSReportParam");var ZSLoginData=function(){function e(){}return e}();__reflect(ZSLoginData.prototype,"ZSLoginData");var ShareInfo=function(){function e(){}return e}();__reflect(ShareInfo.prototype,"ShareInfo");var ZSLoginParams=function(e){function t(){var t=e.call(this)||this;return t.agent="zy",t}return __extends(t,e),t}(PlatFormParam);__reflect(ZSLoginParams.prototype,"ZSLoginParams");var PlatFormZS=function(e){function t(){var t=e.call(this)||this;return t.domain="https://loginpayzy.h5eco.com/",t.pfParam=new ZSLoginParams,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),window.loadSingleScript("https://pc.h5eco.com/pass_a/jssdk/h5sdk.js",function(){}),t=this,window.__sdkready=function(){var e=this.pfParam,r=new ShareInfo;r={title:"卓越传说",imgUrl:"",desc:"",openId:e.openId,status:EntranceParam.urlParam.srvid};var n=t.getH5gamecn();n._init({getServerCallBack:function(e,t,r,n){0==e?console.log("loginCallBack选区"):1==e?console.log("loginCallBack直接进入游戏"):2==e&&console.log("loginCallBack维护")},enterCallBack:function(e,t){1==e?console.log("enterCallBack 直接进入游戏"):2==e&&console.log("enterCallBack 维护")},shareInfo:r,popWindow:function(e){console.log("弹出提示："+e.msg)},shareIconCallBack:function(e){console.log("shareIconCallBack",e),e.backicon},version:10}),t.openSelectServer()}.bind(this),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(e?(n=t.actorId+"_"+new Date(t.serverTime).valueOf(),o=new ZSRechargeParams,o.orderNo=n,o.ext=EntranceParam.urlParam.srvid,o.appId=this.pfParam.appId,o.openId=EntranceParam.urlParam.openId,o.openKey=EntranceParam.urlParam.openKey,o.appUserName=t.actorName,o.subject=e.itemName,o.level=t.actorLevel,o.roleId=t.actorId,o.serverName=EntranceParam.urlParam.serverName,this.getH5gamecn().pay(e.amount,o)):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.createRole=function(e){this.reportSDK("","create_role",e.actorLevel,e.actorId,e.actorName)},t.prototype.enterGame=function(e){this.reportSDK("","login",e.actorLevel,e.actorId,e.actorName)},t.prototype.roleUp=function(e){this.reportSDK("","levelup",e.actorLevel,e.actorId,e.actorName)},t.prototype.sendService=function(e){var t="/"+this.pfPHP+"/api/?m=player&fn=sendhttp&game="+EntranceParam.urlParam.srvid+"&userId="+e.actorId+"&userName="+EntranceParam.urlParam.openId+"&userNameCn="+e.actorName+"&userLevel="+e.actorLevel+"&vipLevel="+e.vipLevel+"&content="+e.content,r=new HttpRequester,n=function(t){1===t||"1"===t?e.onSuccessCallback():e.onFailCallback()};r.open(t,egret.HttpMethod.GET,n,n),r.send()},t.prototype.showVerify=function(e){this.getH5gamecn().showVerify(e)},t.prototype.showQrCode=function(){this.getH5gamecn().showQrCode()},t.prototype.logout=function(){this.getH5gamecn().logout()},t.prototype.reportSDK=function(e,t,r,n,o){var a=new ZSReportParam;a.action=t,a.app_openid=e,a.server=EntranceParam.urlParam.srvid,a.serverName=EntranceParam.urlParam.serverName,a.openId=EntranceParam.urlParam.openId,a.roleId=n,a.nickName=o,a.openKey=EntranceParam.urlParam.openKey,a.level=r,this.getH5gamecn().reportData(a)},t.prototype.getH5gamecn=function(){return window.h5gamecn},t}(PlatFormWW);__reflect(PlatFormZS.prototype,"PlatFormZS"),window.PlatFormZS=PlatFormZS;var PlatFormZSMK2BAIDUH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qqxyx},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2BAIDUH5.prototype,"PlatFormZSMK2BAIDUH5"),window.PlatFormZSMK2BAIDUH5=PlatFormZSMK2BAIDUH5;var PlatFormZSMK2BAIDUXYX=function(e){function t(){var t=e.call(this)||this;return t.isShenhe=!1,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qqxyx},t.prototype.initLoginParam=function(){var e=this,t=e.getH5gamecn(),r=this.pfParam,n=setTimeout(function(){e.openTipsWin("sdk初始化失败,请重新登录")},3e3);t._init({getLoginParamsCallBack:function(t){r.openId=t.openId,r.passId=t.passId,r.pfParam=t.passId,clearTimeout(n),e.openGame()
},shareInfo:{title:this.getTitle(),imgUrl:this.getImgUrl(),query:""}})},t.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,n){window.swan.request({url:e,success:function(e){r(e.data)},fail:function(){r(null)},dataType:"text",responseType:t})})]})})},t.prototype.getTabListUrl=function(){var t=e.prototype.getTabListUrl.call(this)+"&device="+this.getDeviceName();return t},t.prototype.getServerListUrl=function(t){var r=e.prototype.getServerListUrl.call(this,t)+"&device="+this.getDeviceName();return r},t.prototype.isLiuhai=function(){return this.isShenhe&&egret.localStorage.clear(),this.isIphoneX()},t.prototype.isIphoneX=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&812===screen.height&&375===screen.width},t.prototype.getDeviceName=function(){return this.isIos()?"ios":"az"},t.prototype.getQuality=function(){return 1},t.prototype.isShowYqhl=function(){return!1},t}(PlatFormZSMK2WXXYX);__reflect(PlatFormZSMK2BAIDUXYX.prototype,"PlatFormZSMK2BAIDUXYX"),window.PlatFormZSMK2BAIDUXYX=PlatFormZSMK2BAIDUXYX;var PlatFormZSMK2DDT=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.isShowLogo=function(){return!1},t.prototype.getBgName=function(){return"bg_ddt.jpg"},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2DDT.prototype,"PlatFormZSMK2DDT"),window.PlatFormZSMK2DDT=PlatFormZSMK2DDT;var PlatFormZSMK2GPH5=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zy2gp-login.yinglenc.com/",t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qqxyx},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2GPH5.prototype,"PlatFormZSMK2GPH5"),window.PlatFormZSMK2GPH5=PlatFormZSMK2GPH5;var ZSMK2LoginParamsOPPOXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","pfParam"]},t}(ZSMK2LoginParams);__reflect(ZSMK2LoginParamsOPPOXYX.prototype,"ZSMK2LoginParamsOPPOXYX");var PlatFormZSMK2OPPOXYX=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new ZSMK2LoginParamsOPPOXYX,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return this.initWin(),[4,this.getHttp(this.getVerUrl())];case 1:return e=i.sent(),t=JSON.parse(e),r=t.client_version||0,this.isShenhe=void 0==window.v||window.v>r,n=this,o=n.getH5gamecn(),a=this.pfParam,o._init({getLoginParamsCallBack:function(e){a.openId=e.openId,a.pfParam=e.passId,n.openSelectServer()},shareInfo:{title:"无",imgUrl:"",query:""}}),[2]}})})},t.prototype.getH5gamecn=function(){return window.h5gamecn||(window.h5gamecn=new DebugH5GAMECNMK2),window.h5gamecn},t.prototype.showShare=function(){},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",window.IGameMain.relogin()},t.prototype.getQuality=function(){return 1},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2OPPOXYX.prototype,"PlatFormZSMK2OPPOXYX"),window.PlatFormZSMK2OPPOXYX=PlatFormZSMK2OPPOXYX;var PlatFormZSMK2QQXYX=function(e){function t(){var t=e.call(this)||this;return t.isShenhe=!1,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qqxyx},t.prototype.initLoginParam=function(){var e=this,t=e.getH5gamecn(),r=this.pfParam,n=setTimeout(function(){e.openTipsWin("sdk初始化失败,请重新登录")},3e3);t._init({getLoginParamsCallBack:function(t){r.openId=t.openId,r.passId=t.passId,r.pfParam=t.passId,r.gdt_vid=window.gdt_vid||"0",r.aid=window.aid||t.passId,clearTimeout(n),e.openGame()},shareInfo:{title:this.getTitle(),imgUrl:this.getImgUrl(),query:""}})},t.prototype.getTabListUrl=function(){var t=e.prototype.getTabListUrl.call(this)+"&device="+this.getDeviceName();return t},t.prototype.getServerListUrl=function(t){var r=e.prototype.getServerListUrl.call(this,t)+"&device="+this.getDeviceName();return r},t.prototype.isLiuhai=function(){this.isShenhe&&egret.localStorage.clear();for(var e=!1,t=window.wx.getSystemInfoSync().model,r=["iPhone X","iPhone 11"],n=0,o=r;n<o.length;n++){var a=o[n];if(-1!=t.indexOf(a)){e=!0;break}}return e},t.prototype.getDeviceName=function(){return this.isIos()?"ios":"az"},t.prototype.getQuality=function(){return 1},t.prototype.isShowShoucang=function(){return"qq"==window.wx.getSystemInfoSync().AppPlatform},t.prototype.isShowMrzgSvipWin=function(){return!0},t.prototype.isActColorLabel=function(){return!1},t}(PlatFormZSMK2WXXYX);__reflect(PlatFormZSMK2QQXYX.prototype,"PlatFormZSMK2QQXYX"),window.PlatFormZSMK2QQXYX=PlatFormZSMK2QQXYX;var PlatFormZSMK2UC=function(e){function t(){var t=e.call(this)||this;return t.domain=window.domain,t.isShenhe=!1,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qqxyx},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return this.initWin(),e=this,t=e.getH5gamecn(),r=this.pfParam,[4,this.getHttp(this.getVerUrl())];case 1:return n=i.sent(),o=JSON.parse(n),a=o.client_version||0,this.isShenhe=void 0==window.v||window.v>a,t._init({getLoginParamsCallBack:function(t){r.openId=t.openId,r.passId=t.passId,r.pfParam=t.passId,e.openGame()},shareInfo:{title:"",imgUrl:"",query:""}}),[2]}})})},t.prototype.getQuality=function(){return 1},t.prototype.isLiuhai=function(){return this.isIphoneX()},t.prototype.isIphoneX=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&812===screen.height&&375===screen.width},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2UC.prototype,"PlatFormZSMK2UC"),window.PlatFormZSMK2UC=PlatFormZSMK2UC;var ZSMK2LoginParamsVIVOXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","pfParam"]},t}(ZSMK2LoginParams);__reflect(ZSMK2LoginParamsVIVOXYX.prototype,"ZSMK2LoginParamsVIVOXYX");var PlatFormZSMK2VIVOXYX=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new ZSMK2LoginParamsVIVOXYX,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return this.initWin(),e=this.getVerUrl(),console.log(e),[4,this.getHttp(e)];case 1:return t=s.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,console.log(n),o=this,a=o.getH5gamecn(),i=this.pfParam,a._init({getLoginParamsCallBack:function(e){console.log("getLoginParamsCallBack"),i.openId=e.openId,i.pfParam=e.passId,i.pfParam=e.passId,o.openSelectServer()},shareInfo:{title:"无",imgUrl:"",query:""}}),[2]}})})},t.prototype.getH5gamecn=function(){return window.h5gamecn||(window.h5gamecn=new DebugH5GAMECNMK2),window.h5gamecn},t.prototype.showShare=function(){},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",window.IGameMain.relogin()},t.prototype.getQuality=function(){return 1},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2VIVOXYX.prototype,"PlatFormZSMK2VIVOXYX"),window.PlatFormZSMK2VIVOXYX=PlatFormZSMK2VIVOXYX;var PlatFormZSMK2WXXYXH5=function(e){function t(){var t=e.call(this)||this;return t.domain=window.domain,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.wxxyx},t}(PlatFormZSMK2);__reflect(PlatFormZSMK2WXXYXH5.prototype,"PlatFormZSMK2WXXYXH5"),window.PlatFormZSMK2WXXYXH5=PlatFormZSMK2WXXYXH5;var PlatFormZSMK2WXXYXJH=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zycsjh-login.mengkegame.cn/",t}return __extends(t,e),t.prototype.initLoginParam=function(){var e=this,t=e.getH5gamecn(),r=this.pfParam;t._init({getLoginParamsCallBack:function(t){r.openId=t.openId,r.pfParam=t.passId,r.gdt_vid=window.gdt_vid||"0",r.aid=window.aid||t.passId,e.openSelectServer()},shareInfo:{title:this.getTitle(),imgUrl:this.getImgUrl(),query:""},appVersion:window.xyxVer||"0"})},t.prototype.getISBN=function(){return window.ISBN||""},t}(PlatFormZSMK2WXXYX);__reflect(PlatFormZSMK2WXXYXJH.prototype,"PlatFormZSMK2WXXYXJH"),window.PlatFormZSMK2WXXYXJH=PlatFormZSMK2WXXYXJH;var PlatFormZSMK2Xiaoqi=function(e){function t(){var t=e.call(this)||this;return t.domain="https://396-zycsxq-login.sp.x7sy.cn/",t}return __extends(t,e),t}(PlatFormZSMK2);__reflect(PlatFormZSMK2Xiaoqi.prototype,"PlatFormZSMK2Xiaoqi"),window.PlatFormZSMK2Xiaoqi=PlatFormZSMK2Xiaoqi;var PlatFormZSMKWANBA=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return this.initWin(),window.loadSingleScript("https://passcdn.mengkegame.cn/pass4/js/jssdk/wanba/h5sdk_wanba.js?v="+Math.random(),function(){}),e=this,window.__sdkready=function(){var t=this.pfParam,r=e.getH5gamecn();r._init({gameName:"zycs",getLoginParamsCallBack:function(r){console.log("getLoginParamsCallBack"),t.openId=r.openId,t.passId=r.passId,t.pfParam=r.passId,e.openGame()},shareInfo:{title:"卓越传说",imgUrl:ResEntrance.getResSource("shareicon.png"),desc:"闯关就得vip，百万钻石送不停。"}})}.bind(this),this.image=new eui.Image,this.image.source=ResEntrance.getResSource("hsp.jpg",!1),this.image.visible=!1,this.main.stage.addChild(e.image),window.onorientationchange=function(){90==window.orientation||-90==window.orientation?(e.image.visible=!0,this.main.stage.addChild(e.image),this.onResize()):e.image.visible=!1}.bind(this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),[2]})})},t.prototype.onResize=function(){this.image.width=egret.MainContext.instance.stage.stageWidth,this.image.height=egret.MainContext.instance.stage.stageHeight},t.prototype.isShowHeibian=function(){return!1},t.prototype.isYuandi=function(){return this.isIphoneX()},t.prototype.isLiuhai=function(){return this.isIphoneX()},t.prototype.isIphoneX=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&812===screen.height&&375===screen.width},t}(PlatFormZSMK2);__reflect(PlatFormZSMKWANBA.prototype,"PlatFormZSMKWANBA"),window.PlatFormZSMKWANBA=PlatFormZSMKWANBA;var PlatFormZSMKYJ=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getISBN=function(){return LangEntry.str26},t.prototype.relogin=function(){this.getH5gamecn().logout(),this.reload()},t}(PlatFormZSMK2);__reflect(PlatFormZSMKYJ.prototype,"PlatFormZSMKYJ"),window.PlatFormZSMKYJ=PlatFormZSMKYJ;var Yx3xH5Sdk=function(){function e(){}return e.init=function(e){},e.yx3xH5Pay=function(e,t){},e}();__reflect(Yx3xH5Sdk.prototype,"Yx3xH5Sdk");var LoginParamsYXYMFAZ=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","token"]},t}(PlatFormParam);__reflect(LoginParamsYXYMFAZ.prototype,"LoginParamsYXYMFAZ");var YXYMFAZRoleParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openuid","roleID","roleName","serverID","serverName","roleLevel"]},t}(PlatFormParam);__reflect(YXYMFAZRoleParam.prototype,"YXYMFAZRoleParam");var YXYMFAZRechargeParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["tokenData","openUID","goodsName","amount","serverID","serverName","roleID","goodsID","roleName","privateField1"]},t}(PlatFormParam);__reflect(YXYMFAZRechargeParam.prototype,"YXYMFAZRechargeParam");var PlatFormMLAZCom=function(e){function t(){var t=e.call(this)||this;return t.appid="",t.appid=window.appid,t.pfParam=new LoginParamsYXYMFAZ,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://passport.3xyx.cn/theme/h5sdkv2.0/js/yx3x-h5-sdk.js",function(){Yx3xH5Sdk.init(t.appid),t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(n){switch(n.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=n.sent(),r=JSON.parse(t),this.openGame(),[2]}})})},t.prototype.roleUp=function(e){var t=new YXYMFAZRoleParam;t.openuid=EntranceParam.urlParam.openId,t.roleID=e.actorId,t.roleName=e.actorName,t.serverID=EntranceParam.urlParam.srvid,t.serverName=e.serverName,t.roleLevel=e.actorLevel;var r=this.getReportUrl(t);this.getHttp(r)},t.prototype.getReportUrl=function(e){var t="https://login.haha33.cn/"+this.pfPHP+"/api?m=player&fn=reportlevel&"+e.toParamString();return t},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l,u;return __generator(this,function(p){switch(p.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=p.sent())?e?(n=new YXYMFAZRechargeParam,n.tokenData=this.pfParam.tokenData,n.openUID=EntranceParam.urlParam.openId,n.goodsName=e.itemName,n.amount=e.amount/100,n.serverID=EntranceParam.urlParam.srvid,n.serverName=t.serverName,n.roleID=t.actorId,n.goodsID=e.yb,n.roleName=t.actorName,n.privateField1=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),console.log(o),[4,this.getHttp(o)]):[3,3]:[3,4];case 2:return a=p.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s=i.data,c=this.appid,l={pay_data:s,game_id:c},u={onStart:function(){console.log("开始支付")},onSuccess:function(){console.log("支付成功")},onFailure:function(){console.log("支付失败")}},Yx3xH5Sdk.yx3xH5Pay(l,u)):console.log("充值失败:"+i.msg),[3,4];case 3:window.platform.alert("错误的购买道具"),p.label=4;case 4:return[2]}})})},t}(PlatFormYXYMF);__reflect(PlatFormMLAZCom.prototype,"PlatFormMLAZCom");var PlatFormMLAZ=function(e){function t(t,r){void 0===r&&(r="");var n=e.call(this)||this;return n.appid="377",n.bgName="",n.appid=t.toString(),n.bgName=r,n.pfParam=new LoginParamsYXYMFAZ,n}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://passport.3xyx.cn/theme/h5sdkv2.0/js/yx3x-h5-sdk.js",function(){Yx3xH5Sdk.init(t.appid),t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(n){switch(n.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=n.sent(),r=JSON.parse(t),this.openGame(),[2]}})})},t.prototype.roleUp=function(e){var t=new YXYMFAZRoleParam;t.openuid=EntranceParam.urlParam.openId,t.roleID=e.actorId,t.roleName=e.actorName,t.serverID=EntranceParam.urlParam.srvid,t.serverName=e.serverName,t.roleLevel=e.actorLevel;var r=this.getReportUrl(t);this.getHttp(r)},t.prototype.getReportUrl=function(e){var t="https://login.haha33.cn/"+this.pfPHP+"/api?m=player&fn=reportlevel&"+e.toParamString();return t},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l,u;return __generator(this,function(p){switch(p.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=p.sent())?e?(n=new YXYMFAZRechargeParam,n.tokenData=this.pfParam.tokenData,n.openUID=EntranceParam.urlParam.openId,n.goodsName=e.itemName,n.amount=e.amount/100,n.serverID=EntranceParam.urlParam.srvid,n.serverName=t.serverName,n.roleID=t.actorId,n.goodsID=e.yb,n.roleName=t.actorName,n.privateField1=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),console.log(o),[4,this.getHttp(o)]):[3,3]:[3,4];case 2:return a=p.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s=i.data,c=this.appid,l={pay_data:s,game_id:c},u={onStart:function(){console.log("开始支付")},onSuccess:function(){console.log("支付成功")},onFailure:function(){console.log("支付失败")}},Yx3xH5Sdk.yx3xH5Pay(l,u)):console.log("充值失败:"+i.msg),[3,4];case 3:window.platform.alert("错误的购买道具"),p.label=4;case 4:return[2]}})})},t.prototype.getISBN=function(){return""},t.prototype.getBgName=function(){return this.bgName||e.prototype.getBgName.call(this)},t}(PlatFormYXYMF);__reflect(PlatFormMLAZ.prototype,"PlatFormMLAZ");var BaiduSuccessData=function(){function e(){}return e}();__reflect(BaiduSuccessData.prototype,"BaiduSuccessData");var BaiduSubPacketParam=function(){function e(){}return e}();__reflect(BaiduSubPacketParam.prototype,"BaiduSubPacketParam");var BaiduLoginParamsXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openId","code"]},t}(PlatFormParam);__reflect(BaiduLoginParamsXYX.prototype,"BaiduLoginParamsXYX");var CreateOrderParamsBaiduXYX=function(e){function t(){var t=e.call(this)||this;return t.totalAmount="",t.tpOrderId="",t.dealTitle="",t.extInfo="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["totalAmount","tpOrderId","dealTitle","extInfo"]},t}(PlatFormParam);__reflect(CreateOrderParamsBaiduXYX.prototype,"CreateOrderParamsBaiduXYX");var PlatFormMLBAIDUXYX=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.scene=0,t.pfParam=new BaiduLoginParamsXYX,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return this.initWin(),e=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return t=s.sent(),this._isIosShowRecharge="1"==t,[4,this.getHttp(this.getVerUrl())];case 2:return r=s.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=void 0==window.v||window.v>o,a=window.swan.getLaunchOptionsSync(),this.scene=a.scene,this.query=a.query,console.log("scene:"+this.scene),i=new BaiduSubPacketParam,i.name="js1",i.success=function(t){e.initLoginParam()},i.fail=function(t){var r="";for(var n in t)r+=n+"="+t[n]+"\n";e.openTipsWin("swan.loadSubpackage失败\n"+r)},window.swan.loadSubpackage(i),[2]}})})},t.prototype.initLoginParam=function(){var e=this;window.swan.login({timeout:5e3,success:function(t){e.pfParam.code=t.code,e.openSelectServer()},fail:function(t){e.alert("登录失败:"+t.errCode+"|"+t.errMsg)},complete:function(){}})},t.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,n){window.swan.request({url:e,success:function(e){r(e.data)},fail:function(){r(null)},dataType:"text",responseType:t})})]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c=this;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?(console.log("调用充值"),n=new CreateOrderParamsBaiduXYX,n.totalAmount=""+e.amount,n.tpOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.dealTitle=""+e.itemName,n.extInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+e.amount,o=this.getCreatOrderUrl(n),[4,this.getHttp(o)]):[3,3];case 2:a=l.sent(),i=JSON.parse(a),200==i.code?(s={dealId:i.data.dealId,appKey:i.data.appKey,totalAmount:i.data.totalAmount,tpOrderId:i.data.tpOrderId,dealTitle:i.data.dealTitle,signFieldsRange:i.data.signFieldsRange,rsaSign:i.data.rsaSign},window.swan.requestPolymerPayment({orderInfo:s,success:function(){console.log("支付成功")},fail:function(){c.alert("支付失败")},complete:function(){}})):this.alert("充值失败:"+i.msg),l.label=3;case 3:return[2]}})})},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIos()?this.isShenhe?!1:this._isIosShowRecharge:!0},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.isIos=function(){var e=window.swan.getSystemInfoSync(),t=e.system.indexOf("iOS")>=0;return t},t.prototype.isShowTXSP=function(){var e=window.swan.getSystemInfoSync();return"sp"==e.AppPlatform},t.prototype.getSceneType=function(){return this.scene},t.prototype.requestInviteInfo=function(){var e="";if("string"==typeof this.query)e=this.query;else for(var t in this.query)e+=t+"="+this.query[t]+"&";if(this.query.invite_account&&this.query.invite_server_id){var r=""+this.domain+this.pfPHP+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+e;this.getHttp(r)}},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.showShare=function(){},t.prototype.getTitle=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getQuality=function(){return 0},t.prototype.getDestroyTime=function(){return 90},t.prototype.isShowShoucang=function(){return!0},t.prototype.isShowYqhl=function(){return!0},t.prototype.getISBN=function(){return window.ISBN||LangEntry.str4},t.prototype.copyResult=function(e,t,r,n){window.swan.setClipboardData({data:e,success:t?t:function(){},fail:r?r:function(){},complete:n?n:function(){}})},t}(PlatFormWW);__reflect(PlatFormMLBAIDUXYX.prototype,"PlatFormMLBAIDUXYX");var DebugBaiduSDK=function(){function e(){this.isDebug=!0,this.agent="zycs2"}return e.prototype.request=function(e){var t=new HttpRequester,r=e.url.replace("https","http");t.open(r,e.method,function(t){var r=new BaiduSuccessData;r.data=JSON.parse(t.currentTarget.response),e.success(r)}),t.send()},e.prototype.login=function(e){},e.prototype.requestPolymerPayment=function(e){},e.prototype.downloadFile=function(e){},e.prototype.getSystemInfoSync=function(){var e,t,r=navigator.userAgent;return r.match(/iPad/)||r.match(/iPhone/)||r.match(/iPod/)?(e="iOS",t="iOS"):(e="system",t="model"),{system:e,model:t,AppPlatform:"qq"}},e.prototype.getLaunchOptionsSync=function(){var e=1089,t="invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId;return{scene:e,query:t}},e.prototype.loadSubpackage=function(e){e.success&&e.success()},e.prototype.setClipboardData=function(e){},e.prototype.onShow=function(e){var t=new BaiduOnShowParam;t.query={gdt_vid:"1",weixinadinfo:"2.3.4"},e(t)},e.prototype.shareAppMessage=function(e){},e.prototype.onShareAppMessage=function(e){},e.prototype.showShareMenu=function(e){e.withShareTicket,e.menus},e.prototype.setUserCloudStorage=function(e){},e}();__reflect(DebugBaiduSDK.prototype,"DebugBaiduSDK",["BaiduSDK"]);var BaiduOnShowParam=function(){function e(){}return e}();__reflect(BaiduOnShowParam.prototype,"BaiduOnShowParam"),window.swan||(window.swan=new DebugBaiduSDK);var PlatFormYXYMFHwhh5snqmt=function(e){function t(){var t=e.call(this)||this;return t.appid="103250061",t}return __extends(t,e),t.prototype.getISBN=function(){var e="%E5%AE%A1%E6%89%B9%E6%96%87%E5%8F%B7%EF%BC%9A%E6%96%B0%E5%B9%BF%E5%87%BA%E5%AE%A1%5B2016%5D4318%E5%8F%B7%20%EF%BC%88ISBN%EF%BC%89%3A978-7-7979-2875-5%20%0A%E8%91%97%E4%BD%9C%E6%9D%83%E4%BA%BA%EF%BC%9A%E5%B9%BF%E5%B7%9E%E6%B3%B0%E9%80%A2%E4%BF%A1%E6%81%AF%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%20%E5%87%BA%E7%89%88%E5%8D%95%E4%BD%8D%EF%BC%9A%E4%B8%8A%E6%B5%B7%E7%A7%91%E5%AD%A6%E6%8A%80%E6%9C%AF%E6%96%87%E7%8C%AE%E5%87%BA%E7%89%88%E7%A4%BE%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%20%0A%E6%96%87%E7%BD%91%E6%B8%B8%E5%A4%87%E5%AD%97%EF%BC%9A%5B2016%5DM-RPG%C2%A0366%20%E9%80%82%E9%BE%84%E6%8F%90%E7%A4%BA%EF%BC%9A18%E5%B2%81%E4%BB%A5%E4%B8%8A";return decodeURIComponent(e)},t}(PlatFormYXYMFHwh5);__reflect(PlatFormYXYMFHwhh5snqmt.prototype,"PlatFormYXYMFHwhh5snqmt"),window.PlatFormYXYMFHwhh5snqmt=PlatFormYXYMFHwhh5snqmt;var PlatFormYXYMFHwhh5xytx=function(e){function t(){var t=e.call(this)||this;return t.appid="102852225",t}return __extends(t,e),t.prototype.getISBN=function(){var e="%0A%E5%AE%A1%E6%89%B9%E6%96%87%E5%8F%B7%EF%BC%9A%E6%96%B0%E5%B9%BF%E5%87%BA%E5%AE%A1%5B2017%5D3628%E5%8F%B7%20%EF%BC%88ISBN%EF%BC%89%3A978-7-7979-7000-6%0A%E8%91%97%E4%BD%9C%E6%9D%83%E4%BA%BA%EF%BC%9A%E6%B7%B1%E5%9C%B3%E9%87%91%E5%8D%93%E7%BD%91%E7%BB%9C%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%20%E5%87%BA%E7%89%88%E5%8D%95%E4%BD%8D%EF%BC%9A%E5%8C%97%E4%BA%AC%E8%89%BA%E6%9C%AF%E4%B8%8E%E7%A7%91%E6%8A%80%E7%94%B5%E5%AD%90%E5%87%BA%E7%89%88%E7%A4%BE%0A%E6%96%87%E7%BD%91%E6%B8%B8%E5%A4%87%E5%AD%97%EF%BC%9A%5B2016%5DM-RPG%20366%20%E9%80%82%E9%BE%84%E6%8F%90%E7%A4%BA%EF%BC%9A18%E5%B2%81%E4%BB%A5%E4%B8%8A";return decodeURIComponent(e)},t}(PlatFormYXYMFHwh5);__reflect(PlatFormYXYMFHwhh5xytx.prototype,"PlatFormYXYMFHwhh5xytx"),window.PlatFormYXYMFHwhh5xytx=PlatFormYXYMFHwhh5xytx;var LoginParamsYXYMFOPPO=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","openId"]},t}(PlatFormParam);__reflect(LoginParamsYXYMFOPPO.prototype,"LoginParamsYXYMFOPPO");var RechargeParamYXYMFOPPO=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","productName","productDesc","count","price","appVersion","engineVersion","openId","serverId","roleId","gold"]},t}(PlatFormParam);__reflect(RechargeParamYXYMFOPPO.prototype,"RechargeParamYXYMFOPPO");var PlatFormYXYMFOPPO=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsYXYMFOPPO,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){return this.initWin(),this.openBgWin(),e=this,t={},t.success=function(t){console.log("token"+t.token),e.pfParam.token=t.token,e.onSuccess()},t.fail=function(t){e.openTipsWin("sdk登录失败")},console.log("qglogin:"),window.qg.login(t),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l,u,p;return __generator(this,function(h){switch(h.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=h.sent())?(console.log("调用充值"),n=new RechargeParamYXYMFOPPO,n.token=this.pfParam.token,n.productName=e.itemName,n.productDesc=e.desc,n.count=1,n.price=e.amount.toString(),n.appVersion=EntranceParam.urlParam.v,n.engineVersion=window.qg.getSystemInfoSync().platformVersion,n.openId=EntranceParam.urlParam.openId,n.serverId=EntranceParam.urlParam.srvid,n.roleId=t.actorId,n.gold=e.yb,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),console.log(o),[4,this.getHttp(o)]):[3,3];case 2:a=h.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s={},c=i.data,l=c.appId,u=c.cpOrderId,p=c.orderNo,s.appId=c.appId,s.token=this.pfParam.token,s.timestamp=c.timestamp,s.orderNo=c.orderNo,s.paySign=c.paySign,s.success=function(){console.log("支付成功")},s.fail=function(){console.log("支付失败")},window.qg.pay(s)):console.log("充值失败:"+i.msg),h.label=3;case 3:return[2]}})})},t}(PlatFormYXYMF);__reflect(PlatFormYXYMFOPPO.prototype,"PlatFormYXYMFOPPO"),window.PlatFormYXYMFOPPO=PlatFormYXYMFOPPO;var PlatFormYXYMFQuickH5=function(e){function t(t,r){var n=e.call(this)||this;return n.productCode="",n.productKey="",n.productCode=t,n.productKey=r,n.pfParam=new QuickSDKLoginParamData,n}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),t=this,window.loadSingleScript("https://staticjs.quickapi.net/static/lib/libQuickSDK_v2.js",function(){QuickSDK.init(t.productCode,t.productKey,!0,r.initCallback.bind(r)),QuickSDK.setSwitchAccountNotification(function(e){r.reload()}),QuickSDK.setLogoutNotification(function(e){r.reload(),console.log("Game:玩家点击注销帐号")})}),[2]})})},t.prototype.initCallback=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return console.log("init success"),QuickSDK.login(this.loginCallback.bind(this)),[2]})})},t.prototype.loginCallback=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o;return __generator(this,function(a){switch(a.label){case 0:return e.status?(console.log("GameDemo:QuickSDK登录成功: uid=>"+e.data.uid),this.pfParam.setData(e.data),t=this.getVerUrl(),console.log("url:"+t),[4,this.getHttp(t)]):[3,2];case 1:return r=a.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>o,this.openGame(),[3,3];case 2:console.log("GameDemo:QuickSDK登录失败:"+e.message),a.label=3;case 3:return[2]}})})},t.prototype.createRole=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!0,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.enterGame=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.roleUp=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.powerUp=function(e){var t=this.getQuickSDKRoleParam(e);t.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(t),function(e){})},t.prototype.getQuickSDKRoleParam=function(e){var t={};return t.isCreateRole=!0,t.roleCreateTime=e.createRoleTime,t.uid=this.pfParam.uid,t.serverId=EntranceParam.urlParam.srvid,t.serverName=EntranceParam.urlParam.serverName,t.userRoleName=e.actorName,t.userRoleId=e.actorId,t.userRoleBalance=e.yb,t.vipLevel=e.vipLevel+e.svipLevel,t.userRoleLevel=e.actorLevel,t.partyId=e.guildId,t.partyName=e.guildName,t.gameRoleGender=0,t.gameRolePower=e.power,t.partyRoleId="",t.partyRoleName="",t.professionId=0,t.profession="",t.friendlist="",t},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(e?(n={},n.productCode=this.productCode,n.uid=this.pfParam.uid,n.userRoleId=t.actorId,n.userRoleName=t.actorName,n.serverId=EntranceParam.urlParam.srvid,n.userServer=EntranceParam.urlParam.serverName,n.userLevel=t.actorLevel,n.cpOrderNo=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=e.amount/100,n.subject=e.itemName,n.desc=e.desc,n.callbackUrl="",n.extrasParams=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.goodsId=e.yb.toString(),n.count=1,n.quantifier="个",QuickSDK.pay(JSON.stringify(n),function(){console.log("购买道具成功")})):window.platform.alert("错误的购买道具")),[2]}})})},t.prototype.logout=function(e){var t=this;QuickSDK.logout(function(e){t.reload()})},t}(PlatFormYXYMF);__reflect(PlatFormYXYMFQuickH5.prototype,"PlatFormYXYMFQuickH5");var LoginParamsYXYMFUCXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["code","openId"]},t}(PlatFormParam);__reflect(LoginParamsYXYMFUCXYX.prototype,"LoginParamsYXYMFUCXYX");var RechargeParamYXYMFUCXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["total_amount","title","platform","extra","openId"]},t}(PlatFormParam);__reflect(RechargeParamYXYMFUCXYX.prototype,"RechargeParamYXYMFUCXYX");var PlatFormYXYMFUCXYX=function(e){function t(t){var r=e.call(this)||this;return r.pay_biz_id="",r.pay_biz_id=t,r.pfParam=new LoginParamsYXYMFUCXYX,r}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;
return __generator(this,function(o){switch(o.label){case 0:return this.initWin(),this.openBgWin(),e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.ucLogin(),[2]}})})},t.prototype.ucLogin=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=this,window.uc.login({success:function(t){e.pfParam.code=t.code,e.onSuccess()},fail:function(t){window.uc.showModal({title:"登录失败",content:"是否重新登录？",cancelText:"退出游戏",success:function(t){t.confirm?e.ucLogin():t.cancel&&window.uc.exit()}})}}),[2]})})},t.prototype.isLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.isLogin({success:function(t){alert("isLogin success:"+t.isLogin),e(t.isLogin)},fail:function(t){alert("isLogin fail:"+t.isLogin),e(t.isLogin)}})})]})})},t.prototype.checkSession=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.checkSession({success:function(t){alert("checkSession success:"+t),e(!0)},fail:function(t){alert("checkSession fail:"+t),e(!1)}})})]})})},t.prototype.login1=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=this,[2,new Promise(function(t,r){window.uc.login({success:function(r){e.pfParam.code=r.code,e.onSuccess(),alert("login1"+r),alert("login1"+r.code),t(r.code)},fail:function(t){var r="";for(var n in t)r+=n+":"+t[n]+",";alert("login1 fail"+r),window.uc.showModal({title:"登录失败",content:"是否重新登录？3",cancelText:"退出游戏",success:function(t){t.confirm?e.ucLogin():t.cancel&&window.uc.exit()}})}})})]})})},t.prototype.getSetting=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.getSetting({success:function(t){return e(t)},fail:function(e){return t(e)}})})]})})},t.prototype.authorize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){window.uc.authorize({scope:"userInfo",success:function(t){return e(t)},fail:function(e){return t(e)}})})]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:if(r=l.sent(),!r)return[3,3];if(n=window.uc.getSystemInfoSync(),o=void 0,"string"==typeof n)try{o=JSON.parse(n)}catch(u){}else o=n;return this.compareVersion(o.SDKVersion,"1.0.1")<0?(window.platform.alert("当前版本不支持内购功能，请升级UC浏览器。"),[2]):(console.log("调用充值"),a=new RechargeParamYXYMFUCXYX,a.total_amount=e.amount.toString(),a.title=e.itemName,a.platform=o.platform,a.openId=EntranceParam.urlParam.openId,a.extra=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,i=""+this.domain+this.pfPHP+"/payment/createorder?"+a.toParamString()+"&sys_info="+encodeURIComponent(n),console.log(i),[4,this.getHttp(i)]);case 2:s=l.sent(),c=JSON.parse(s),200==c.code?window.uc.requestPayment({biz_id:this.pay_biz_id,token:c.data.token,order_id:c.data.order_id,success:function(e){console.log("充值成功:"+e)},fail:function(e){console.error("充值失败:"+e)}}):window.platform.alert("支付失败"),l.label=3;case 3:return[2]}})})},t.prototype.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;r>n;n++){var o=parseInt(e[n]),a=parseInt(t[n]);if(o>a)return 1;if(a>o)return-1}return 0},t.prototype.isLiuhai=function(){return this.isIphoneX()},t.prototype.isIphoneX=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&812===screen.height&&375===screen.width},t}(PlatFormYXYMF);__reflect(PlatFormYXYMFUCXYX.prototype,"PlatFormYXYMFUCXYX"),window.PlatFormYXYMFUCXYX=PlatFormYXYMFUCXYX;var LoginParamsYXYMFVIVOXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","openId"]},t}(PlatFormParam);__reflect(LoginParamsYXYMFVIVOXYX.prototype,"LoginParamsYXYMFVIVOXYX");var RechargeParamYXYMFVIVOXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["productName","productDesc","orderAmount","extInfo","openId"]},t}(PlatFormParam);__reflect(RechargeParamYXYMFVIVOXYX.prototype,"RechargeParamYXYMFVIVOXYX");var PlatFormYXYMFVIVOXYX=function(e){function t(t){var r=e.call(this)||this;return r.appId="",r.appId=t,r.pfParam=new LoginParamsYXYMFVIVOXYX,r}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n=this;return __generator(this,function(o){return this.initWin(),this.openBgWin(),e=parseInt(window.qg.getSystemInfoSync().platformVersionCode),console.log("version:"+e),t=1063,e>=t?(r=this,window.qg.login().then(function(e){e.data.token&&(console.log("token:"+e.data.token),r.pfParam.token=e.token,r.onSuccess())},function(e){n.openTipsWin("登录失败"+JSON.stringify(e),function(){window.qg.exitApplication()})})):this.openTipsWin("你的快游戏版本号低于"+t+",请升级快游戏引擎",function(){window.qg.exitApplication()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?(console.log("调用充值"),n=new RechargeParamYXYMFVIVOXYX,n.productName=e.itemName,n.productDesc=e.desc,n.orderAmount=e.amount,n.extInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),console.log(o),[4,this.getHttp(o)]):[3,3];case 2:a=l.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s=i.data,c={appId:this.appId,cpOrderNumber:s.cpOrderNumber,productName:e.itemName,productDesc:e.desc,orderAmount:e.amount.toString(),notifyUrl:s.notifyUrl,extInfo:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,vivoSignature:s.vivoSignature},console.log(c),window.qg.pay({orderInfo:JSON.stringify(c),success:function(e){console.log("code:"+e.code+",message:"+e.message+",result:"+e.result)},fail:function(e){console.log("data:"+e)},complete:function(){console.log("支付完成")}})):this.alert("充值失败"),l.label=3;case 3:return[2]}})})},t.prototype.isLiuhai=function(){return!0},t}(PlatFormYXYMF);__reflect(PlatFormYXYMFVIVOXYX.prototype,"PlatFormYXYMFVIVOXYX"),window.PlatFormYXYMFVIVOXYX=PlatFormYXYMFVIVOXYX;var LoginParamsXYTXXMXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["session","appAccountId","openId"]},t}(PlatFormParam);__reflect(LoginParamsXYTXXMXYX.prototype,"LoginParamsXYTXXMXYX");var RechargeParamXYTXXMXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["appAccountId","session","displayName","feeValue","cpUserInfo","openId"]},t}(PlatFormParam);__reflect(RechargeParamXYTXXMXYX.prototype,"RechargeParamXYTXXMXYX");var PlatFormXYTXXMKYX=function(e){function t(t){var r=e.call(this)||this;return r.APPID="",r.APPID=t,r.pfParam=new LoginParamsXYTXXMXYX,r}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(r){return this.initWin(),this.openBgWin(),e=this,window.xmqg=window.qg,window.xmqg.login({success:function(r,n){t.pfParam.session=r.data.session,t.pfParam.appAccountId=r.data.appAccountId,e.onSuccess()},fail:function(){t.alert("登录失败",1)},complete:function(){}}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0==window.v||window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c,l;return __generator(this,function(u){switch(u.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=u.sent())?(console.log("调用充值"),n=new RechargeParamXYTXXMXYX,n.appAccountId=this.pfParam.appAccountId,n.session=this.pfParam.session,n.displayName=e.itemName,n.feeValue=e.amount,o=n.cpUserInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,a=this.getCreatOrderUrl(n),console.log(a),[4,this.getHttp(a)]):[3,3];case 2:i=u.sent(),console.log(i),s=JSON.parse(i),200==s.code?(console.log("调用充值200"),c=s.data,l={appId:this.APPID,appAccountId:this.pfParam.appAccountId,session:this.pfParam.session,cpOrderId:c.cpOrderId,cpUserInfo:o,displayName:e.itemName,feeValue:e.amount,sign:c.sign},console.log(l),window.xmqg.pay({orderInfo:l,success:function(){console.log("支付成功")},fail:function(){console.log("支付失败")},complete:function(){console.log("支付完成")}})):this.alert(s.msg),u.label=3;case 3:return[2]}})})},t}(PlatFormYXYMF);__reflect(PlatFormXYTXXMKYX.prototype,"PlatFormXYTXXMKYX");var LoginParamsYXYMFXMKYXH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["appAccountId","session"]},t}(PlatFormParam);__reflect(LoginParamsYXYMFXMKYXH5.prototype,"LoginParamsYXYMFXMKYXH5");var RechargeParamYXYMFXMKYXH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["appAccountId","session","cpUserInfo","displayName","feeValue","openId"]},t}(PlatFormParam);__reflect(RechargeParamYXYMFXMKYXH5.prototype,"RechargeParamYXYMFXMKYXH5");var PlatFormYXYMFXMKYXH5=function(e){function t(){var t=e.call(this)||this;return t.appId="2882303761518466111",t.pfParam=new LoginParamsYXYMFXMKYXH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return this.initWin(),this.openBgWin(),e=this,window.loadSingleScript("https://static.g.mi.com/game/h5sdk/h5-wy-sdk-v.1.0.2.min.js",function(){window.hy_wy_sdk.ready({zIndex:9999,pin:0},function(){window.hy_wy_sdk.payResult(e.payResult.bind(e));var t=window.hy_wy_sdk.getBaseData();e.pfParam.appAccountId=t.appAccountId,e.pfParam.session=t.session,e.onSuccess()})}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?(console.log("调用充值"),n=new RechargeParamYXYMFXMKYXH5,n.appAccountId=this.pfParam.appAccountId,n.session=this.pfParam.session,n.cpUserInfo=EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.displayName=e.itemName,n.feeValue=e.amount,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),console.log(o),[4,this.getHttp(o)]):[3,3];case 2:a=l.sent(),console.log(a),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s={},c=i.data,s.appId=this.appId,s.session=this.pfParam.session,s.appAccountId=this.pfParam.appAccountId,s.cpOrderId=c.cpOrderId,s.cpUserInfo=EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,s.displayName=e.itemName,s.feeValue=e.amount,s.sign=c.sign,window.hy_wy_sdk.pay(s)):console.log("充值失败:"+i.msg),l.label=3;case 3:return[2]}})})},t.prototype.payResult=function(e){console.log(e)},t.prototype.relogin=function(){window.hy_wy_sdk.reload()},t.prototype.getISBN=function(){return"\n新广出审[2017]7818号 （ISBN）:978-7-498-00845-1\n著作权人：广州市勤众网络科技有限公司  出版单位：天津电子出版社有限公司\n文网游备字：[2016]M-RPG 366  适龄提示：18岁以上"},t}(PlatFormYXYMF);__reflect(PlatFormYXYMFXMKYXH5.prototype,"PlatFormYXYMFXMKYXH5"),window.PlatFormYXYMFXMKYXH5=PlatFormYXYMFXMKYXH5;var SuperSDKYYLoginParamData=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["user_id","token"]},t}(SuperSDKLoginParamData);__reflect(SuperSDKYYLoginParamData.prototype,"SuperSDKYYLoginParamData");var PlatFormSuperSDKYY=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new SuperSDKYYLoginParamData,t}return __extends(t,e),t.prototype.loadSDK=function(){var e=this;window.loadSingleScript("https://supersdk.7pa.com/js/libSuperSDKH5_To_Client.js",function(){SuperSDK.init(!0,function(){}),e.alert("login"),SuperSDK.login(function(t){e.alert("logincallback"),e.pfParam.user_id=t.super_user_id,e.pfParam.token=t.token,e.openSelectServer()})})},t}(PlatFormSuperSDK);__reflect(PlatFormSuperSDKYY.prototype,"PlatFormSuperSDKYY");var QuanMingLoginParamIos=function(e){function t(){var t=e.call(this)||this;return t.account="",t.token="",t.time="",t.keys=["account","token","time","openId"],t}return __extends(t,e),t}(PlatFormParam);__reflect(QuanMingLoginParamIos.prototype,"QuanMingLoginParamIos");var PlatFormQuanMingIos=function(e){function t(){var t=e.call(this)||this;return t.gameName="圣翼传说",t.pfParam=new QuanMingLoginParamIos,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qmsyIos},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.openBgWin(),t=this,egret.ExternalInterface.call("pushHomeLoginViewController",""),egret.ExternalInterface.addCallback("loginCallBack",function(e){var r=JSON.parse(e);t.pfParam.account=r.account,t.pfParam.token=r.token,t.pfParam.time=r.time,t.onSuccess()}),egret.ExternalInterface.addCallback("KCregchargCallBack",function(e){var t=JSON.parse(e);1==t.success}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n={gameName:t.actorName,money:e.amount/100,serverid:EntranceParam.urlParam.srvid,productname:e.itemName,describe:e.desc,information:e.shangpinId,attach:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb},egret.ExternalInterface.call("pushRechageViewController",JSON.stringify(n))),[2]}})})},t.prototype.createRole=function(e){this.reportParam(e)},t.prototype.roleUp=function(e){this.reportParam(e)},t.prototype.reportParam=function(e){var t={account:this.pfParam.account,service:EntranceParam.urlParam.srvid,type:1,rolename:e.actorName,rolelevel:e.actorLevel||1};egret.ExternalInterface.call("setDidClickgameID",JSON.stringify(t))},t}(PlatFormWW);__reflect(PlatFormQuanMingIos.prototype,"PlatFormQuanMingIos");var PlatFormTWF1=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.domain="https://gugz-login.freetop1.com/",t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.pfParam.openId=egret.getOption("user_id"),this.pfParam.appid="3",[2]})})},t.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,e.prototype.openBgWin.call(this)];case 1:return t.sent(),this.openSelectServer(),[2]}})})},t.prototype.firstEnterGame=function(t){e.prototype.firstEnterGame.call(this,t),window.gtag&&window.gtag("event","conversion",{send_to:"AW-758741146/VfAmCKKvl6cBEJrx5ekC"}),window.fbq&&window.fbq("track","CompleteRegistration")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=i.sent(),r&&(n=this.getSignAndTs("2c3PqEDFAxL2"),o=n[0],a=n[1],window.open("https://www.freetop1.com/pay.php?game_id="+egret.getOption("game_id")+("&server_id="+EntranceParam.urlParam.srvid)+("&user_id="+egret.getOption("user_id"))+("&role_id="+t.actorId)+("&item_id=A"+e.shangpinId)+("&pay_money="+e.amount)+("&ts="+a)+("&sign="+o))),[2]}})})},t.prototype.createRole=function(e){var t=e.actorId,r=e.actorName,n=this.getSignAndTs("aaZCIRWs6HEb"),o=n[0],a=n[1],i=new Date,s=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();Http.get("https://www.freetop1.com/api/gameRole.php?game_id="+egret.getOption("game_id")+("&server_id="+EntranceParam.urlParam.srvid)+("&user_id="+egret.getOption("user_id"))+("&role_id="+t)+("&role_name="+r)+("&create_date="+s)+("&ts="+a)+("&sign="+o))},t.prototype.getSignAndTs=function(e){var t=egret.getOption("user_id"),r=(new Date).getTime(),n=GameMd5.hex_md5(""+e+t+r);return[n,r]},t}(PlatFormTWBase);__reflect(PlatFormTWF1.prototype,"PlatFormTWF1");var PlatFormTWIOS=function(e){function t(){var t=e.call(this)||this;return t._isLiuhai=!1,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.appid="2",egret.ExternalInterface.addCallback("loginCallback",function(e){var r=JSON.parse(e);console.log("loginCallback----------------------------"+r),t.pfParam.openId=r.userid,t.openSelectServer()}),egret.ExternalInterface.addCallback("enterServerCallback",function(e){console.log("enterServerCallback----------------------------"+e)}),egret.ExternalInterface.addCallback("payCallback",function(e){"1"==e&&window.IGameMain.payCallback(!0,0),console.log("payCallback----------------------------"+e)}),egret.ExternalInterface.addCallback("logoutCallback",function(e){console.log("logoutCallback----------------------------"+e),window.IGameMain.logout()}),egret.ExternalInterface.addCallback("isLiuHaiCallback",function(e){console.log("isLiuHaiCallback----------------------------"+e),"true"==e&&(t._isLiuhai=!0)}),[2]})})},t.prototype.loginGame=function(){egret.ExternalInterface.call("isLiuHai",""),egret.ExternalInterface.call("enterServer",EntranceParam.urlParam.srvid),window.IGameMain.isLogoutCallback(!0),e.prototype.loginGame.call(this)},t.prototype.createRole=function(e){var t={};t.name=e.actorName,t.id=e.actorId.toString();var r=JSON.stringify(t);egret.ExternalInterface.call("createRole",r)},t.prototype.enterGame=function(e){var t={};t.name=e.actorName,t.id=e.actorId.toString(),t.lv=e.actorLevel.toString();var r=JSON.stringify(t);egret.ExternalInterface.call("enterRole",r),egret.ExternalInterface.call("startGame","")},t.prototype.logout=function(){egret.ExternalInterface.call("userCenter","")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return t=r.sent(),t&&egret.ExternalInterface.call("pay","A"+e.shangpinId),[2]}})})},t.prototype.sendService=function(e){},t.prototype.isLiuhai=function(){return this._isLiuhai},t}(PlatFormTWBase);__reflect(PlatFormTWIOS.prototype,"PlatFormTWIOS");var PlatFormTWWeb=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.appid="3",window.loadSingleScript("https://twapi.gamedreamer.com/js/Partner/common.js",function(){window.GDPartner.login(t.gamecode,function(e){"success"===e.code?(console.log("登入成功， 用戶ID "+e.data.id+", 用戶名 "+e.data.name),t.pfParam.openId=e.data.id,t.openSelectServer()):console.log("登入失敗, 失敗原因： "+e.message)})}),[2]})})},t.prototype.checkStartGame=function(){return""!==this.pfParam.openId?!0:(window.platform.alert("请先登入"),!1)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return t=r.sent(),t&&window.GDPartner.openTopupPage(this.gamecode),[2]}})})},t.prototype.sendService=function(e){window.GDPartner.showCS(this.gamecode,EntranceParam.urlParam.srvid,e.actorId,e.actorName)},t.prototype.logout=function(){window.GDPartner.logout(this.gamecode,function(){console.log("logout成功")})},t}(PlatFormTWBase);__reflect(PlatFormTWWeb.prototype,"PlatFormTWWeb");var XxYingwenLoginParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","token","openId"]},t}(PlatFormParam);__reflect(XxYingwenLoginParam.prototype,"XxYingwenLoginParam");var PlatFormXxYingwenAZ=function(e){function t(){var t=e.call(this)||this;return t.lastYb=0,t.adjustEventKey={second600:"whjfim",second1800:"rxohc5",second3600:"hir9x9",second10800:"a5olto",second21600:"mh0gcm",second43200:"u4lymb",second86400:"ct0j26",second172800:"gotv5b",second259200:"3qq7qb",guanQia10:"4elub3",guanQia20:"hu4lhs",guanQia30:"t6bbx2",guanQia40:"xlovdx",guanQia50:"6jhxdh",guanQia60:"mraln1",power10000:"4g2yyx",power30000:"qphp1r",power50000:"6n116m",power100000:"tgqlzc",power200000:"kmw4j2",power400000:"tau18c",power800000:"aosgta",power1200000:"704bex",power2000000:"qi6h31",power5000000:"id70a1",power10000000:"d6kkop",power30000000:"ic63qw",power50000000:"ufi7xl",power100000000:"dr2xrv",power150000000:"76du5c",power200000000:"jqk03n",power300000000:"w9drl2",power400000000:"n328lp",power500000000:"2qwca5",power700000000:"xvf9bo",power1000000000:"lgvbqz",power1500000000:"5rmsty",power2000000000:"h9ufqs",power3000000000:"obrh8m",power4000000000:"9q0x7x",power5000000000:"ogl5iq",pay1:"d1jfw9",pay3:"ck2ehx",pay5:"w5iepz",pay10:"vlfft3",pay20:"jhdjk5",pay30:"j39k4n",pay50:"70zrrw",pay100:"wu0xvs",pay200:"4732fb",pay500:"wmraso",pay1000:"jyvefw",pay2000:"3wj5wa",pay5000:"8zvlxg",buy1:"iibvjg",buy3:"6buu0z",buy6:"tnxqzw",buy8:"9pyhb1",shouchong:"bw442b",buyZlhf:"r2spzt",buyZcm:"g6jxz9",buyWxst:"m0s2ic",buyYk:"fvn2i5",buyZztq:"t7rtvv",chongzhiAll:"vkf52y",chongzhiNum:"p341bc",liucun2:"56xyn5",liucun3:"w4pkzm",liucun7:"t9hsnt",liucun15:"ewhz3q",liucun30:"k4ti6l",liucunPay2:"8csf4r",liucunPay3:"ffdyfj",liucunPay7:"drm8dn",liucunPay15:"er550n",liucunPay30:"dbtklr",dl:"7wm7wp",cj:"km9c7h"},t.pfParam=new XxYingwenLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zyen},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){return e.prototype.init.call(this),this.openBgWin(),egret.ExternalInterface.addCallback("WyGameInitIResultOnSuccess",function(e){console.log("WyGameInitIResultOnSuccess----------------------------"+e)}),egret.ExternalInterface.addCallback("WyGameInitIResultOnFail",function(e){console.log("WyGameInitIResultOnFail----------------------------"+e),t.alert("初始失败，请重新登录 "+e)}),egret.ExternalInterface.addCallback("WyGameLoginIResultOnSuccess",function(e){console.log("WyGameLoginIResultOnSuccess----------------------------"+e);var r=JSON.parse(e);t.pfParam.uid=r.uid,t.pfParam.token=r.token,t.onSuccess()}),egret.ExternalInterface.addCallback("WyGameLoginIResultOnFail",function(e){console.log("WyGameLoginIResultOnFail----------------------------"+e),t.alert("登录失败，请重新登录 "+e)}),egret.ExternalInterface.addCallback("WyGameLogoutOnLogout",function(e){console.log("WyGameLogoutOnLogout----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("WyGamePayIResultOnSuccess",function(e){console.log("WyGamePayIResultOnSuccess----------------------------"+e)}),egret.ExternalInterface.addCallback("WyGamePayIResultOnFail",function(e){console.log("WyGamePayIResultOnFail----------------------------"+e)}),egret.ExternalInterface.addCallback("WyGameExitOnExitListenerOnExit",function(e){console.log("WyGameExitOnExitListenerOnExit----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("WyGameH5GameLog",function(e){console.log("WyGameH5GameLog----------------------------"+e)}),egret.ExternalInterface.addCallback("WyGameOnBackPressed",function(e){console.log("WyGameOnBackPressed----------------------------"+e);var r=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(t.serverGgonggaoWin.close(),r=!0),!r&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),r=!0),r||(r=window.IGameMain&&window.IGameMain.backButton()),r||egret.ExternalInterface.call("exit","")}),egret.ExternalInterface.call("login",""),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=i.sent(),r&&(n=t.actorId+"_"+new Date(t.serverTime).valueOf(),o={serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,subject:e.itemName,subjectId:e.yb,roleId:t.actorId,roleName:t.actorName,roleLevel:t.actorLevel,cpBillNo:n,orderAmount:e.amount/100,uid:this.pfParam.uid,extraInfo:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb},this.lastYb=e.yb,a=JSON.stringify(o),egret.ExternalInterface.call("pay",a)),[2]}})})},t.prototype.updateCurServer=function(t){e.prototype.updateCurServer.call(this,t);var r={gameServerId:t.srvId,gameServerName:t.name,uid:this.pfParam.uid};egret.ExternalInterface.call("selectServer",JSON.stringify(r))},t.prototype.createRole=function(e){this.reportSDKData(e,"createRoleInfo")},t.prototype.enterGame=function(e){this.reportSDKData(e,"enterGame")},t.prototype.roleUp=function(e){this.reportSDKData(e,"commitRoleInfo")},t.prototype.guanQiaUp=function(e){},t.prototype.serverDaDain=function(e,t){var r={adjustEvent:e,facebookEvent:"",firebaseEvent:""};console.log("serverDaDain:"+e),egret.ExternalInterface.call("logEvent",JSON.stringify(r))},t.prototype.powerUp=function(e){},t.prototype.sVipExpChang=function(e){},t.prototype.reportSDKData=function(e,t){var r={gameServerId:EntranceParam.urlParam.srvid,gameServerName:EntranceParam.urlParam.serverName,uid:this.pfParam.uid,roleId:e.actorId,roleName:e.actorName,roleLev:e.actorLevel||1},n=JSON.stringify(r);egret.ExternalInterface.call(t,n)},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.reportAdjust=function(e,t){},t}(PlatFormWW);__reflect(PlatFormXxYingwenAZ.prototype,"PlatFormXxYingwenAZ");var LoginParamsXW360=function(e){function t(){var t=e.call(this)||this;return t.server_id="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["gkey","uid","server_id","is_adult","time","sign","client","expand","openId"]},t}(PlatFormParam);__reflect(LoginParamsXW360.prototype,"LoginParamsXW360");var RechargeParamXW360=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["gkey","uid","sid","money","product_id","product_name","game_role_id","role_name","exts"]},t}(PlatFormParam);__reflect(RechargeParamXW360.prototype,"RechargeParamXW360");var PlatFormXW360=function(e){function t(){var t=e.call(this)||this;return t.loginNum=0,t.pfParam=new LoginParamsXW360,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(n){return e.prototype.init.call(this),t=this,this.loginNum=0,this.pfParam.setValueByUrl(location.href),r=["https://zycdn.h5eco.com/waiwang2/entrance/js/jquery-3.6.0.min.js","https://zycdn.h5eco.com/waiwang2/entrance/js/layer.js"],window.loadScript(r,function(){window.layer&&window.layer.config({extend:"myskin.css"})}),this.onSuccess(),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.openServerWin=function(){if(this.loginNum++<3){var e=new ServerData;e.server_id=this.pfParam.server_id,this.callback(e)}else this.alert("loginError,server_id="+this.pfParam.server_id)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=c.sent())?(n=new RechargeParamXW360,n.gkey=this.pfParam.gkey,n.uid=this.pfParam.uid,n.sid=EntranceParam.urlParam.srvid,n.money=e.amount/100,n.product_id=e.yb,n.product_name=e.itemName,n.game_role_id=t.actorId,n.role_name=t.actorName,n.exts=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),[4,this.getHttp(o)]):[3,3];case 2:a=c.sent(),i=JSON.parse(a),200==i.code?(s="https://api.wan898.com/minipay/?"+n.toParamString(),window.layer?window.layer.open({title:"快捷支付",closeBtn:1,shade:.5,shadeClose:1,type:2,skin:"myskin-pay360",area:["660px","450px"],content:s}):window.open(s)):this.alert("pay code:"+i.code+" msg:"+i.msg),c.label=3;case 3:return[2]}})})},t.prototype.createRole=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.serverTime=(new Date).getTime(),this.getReport(e,XWH5ReportParam.create_role),[2]})})},t.prototype.enterGame=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.serverTime=(new Date).getTime(),this.getReport(e,XWH5ReportParam.login),[2]})})},t.prototype.roleUp=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.logout=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.getReport=function(e,t){},t}(PlatFormWW);__reflect(PlatFormXW360.prototype,"PlatFormXW360");var LoginParamsXWH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["qid","server_id","time","sign","isAdult"]},t}(PlatFormParam);__reflect(LoginParamsXWH5.prototype,"LoginParamsXWH5");var RechargeParamXWH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["qid","goods_name","amount","extInfo"]},t}(PlatFormParam);
__reflect(RechargeParamXWH5.prototype,"RechargeParamXWH5");var XWH5ReportParam=function(e){function t(){var r=e.call(this)||this;return r["interface"]=t.login,r.gid="0",r.sid="0",r.oldsid="0",r.user="0",r.roleid="0",r.dept="0",r.time="0",r.gname="0",r.rolename="0",r.level="0",r}return __extends(t,e),t.prototype.init=function(){this.keys=["interface","gid","sid","oldsid","user","roleid","dept","time","gname","rolename","level","ip"]},t.login="login",t.create_role="create_role",t.recharge="recharge",t.online="online",t.game_enter="game_enter",t.convert="convert",t.activate="activate",t}(PlatFormParam);__reflect(XWH5ReportParam.prototype,"XWH5ReportParam");var PlatFormXWH5=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsXWH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://h5.wan.360.cn/h5-cp-sdk-loader.js?time="+(new Date).getTime(),function(){t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?(n=new RechargeParamXWH5,n.qid=this.pfParam.qid,n.amount=e.amount/100,n.goods_name=e.itemName,n.extInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),console.log("showRecharge:"+o),[4,this.getHttp(o)]):[3,3];case 2:a=l.sent(),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s=i.params,c=H5_GAME_360.CONST,this.getH5gamecn().emit(c.EVENT.BUY.START,s)):this.alert("充值失败"),l.label=3;case 3:return[2]}})})},t.prototype.getH5gamecn=function(){return window.h5Game||(window.h5Game=new H5_GAME_360),window.h5Game},t.prototype.createRole=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e,XWH5ReportParam.create_role),[2]})})},t.prototype.enterGame=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e,XWH5ReportParam.login),[2]})})},t.prototype.roleUp=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.logout=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.getReport=function(e,t){var r=new XWH5ReportParam;r["interface"]=t,r.gid="623",r.sid=""+EntranceParam.urlParam.srvid,r.oldsid=""+EntranceParam.urlParam.srvid,r.user=""+this.pfParam.qid,r.roleid=""+e.actorId,r.dept="38",r.time=""+Math.floor(e.serverTime/1e3),r.gname="zydlh5",r.rolename=""+e.actorName,r.level=""+e.actorLevel;var n=""+this.domain+this.pfPHP+"/api?m=player&fn=report&"+r.toParamString();this.getHttp(n)},t}(PlatFormWW);__reflect(PlatFormXWH5.prototype,"PlatFormXWH5");var LoginParamsXYQQXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["userId","token","openId","clientInfo"]},t}(PlatFormParam);__reflect(LoginParamsXYQQXYX.prototype,"LoginParamsXYQQXYX");var CreateOrderParamsXYQQXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","productID","productName","productDesc","buyNum","money","roleID","roleName","roleLevel","serverID","serverName","extension","pid","cip","clientInfo"]},t}(PlatFormParam);__reflect(CreateOrderParamsXYQQXYX.prototype,"CreateOrderParamsXYQQXYX");var PlatFormXYQQXYX=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.scene=0,t.appId="102638266748",t.domain="https://sqxy-login.oclkj.com/",t.pfParam=new LoginParamsXYQQXYX,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.qqxyx},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return this.initWin(),this.initYszcData(),e=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return t=s.sent(),this._isIosShowRecharge="1"==t,[4,this.getHttp(this.getVerUrl())];case 2:return r=s.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=void 0==window.v||window.v>o,a=window.wx.getLaunchOptionsSync(),this.scene=a.scene,this.query=a.query,console.log("scene:"+this.scene),i=new SubPacketParam,i.name="js1",i.success=function(t){e.initLoginParam()},i.fail=function(t){var r="";for(var n in t)r+=n+"="+t[n]+"\n";e.openTipsWin("wx.loadSubpackage失败\n"+r)},window.wx.loadSubpackage(i),[2]}})})},t.prototype.initLoginParam=function(){var e=new window.XYConfig;e.debugState=!1,e.appId=this.appId,e.appKey="140ec4dd43df28c0348ce2518990d7a7",e.masterId="131",e.channelId="3910",e.packageId="70318",e.packageName="com.qldmini.zycssq",e.appVersion=window.v;var t=this;window.XYEvents.getInstance().on("onInitResult",function(e){console.log("initLoginParam onInitResult:",e),e.status==window.XYCommon.Status().Success?(t.iniSdkFun(),t.addTag(window.XYConfig.XYTag().MonitorTypeInitSuccess,"5","收到SDK初始化回调成功"),console.log("初始化成功"),t.addTag(window.XYConfig.XYTag().MonitorTypeLoginStart,"7"," 登录开始"),window.XYEvents.getInstance().on("onLoginResult",function(e){console.log("initLoginParam onLoginResult:",e),e.status==window.XYCommon.Status().Success?(t.addTag(window.XYConfig.XYTag().MonitorTypeLoginSuccess,"9","登录成功"),t.pfParam.userId=e.userId,t.pfParam.token=e.token,t.pfParam.clientInfo=window.XiYouGameSDK.getInstance().getClientInfo(),t.openGame(),t.addTag(window.XYConfig.XYTag().MonitorTypeLoginSuccess,"10","验证用户信息(token)成功")):(console.log("登录失败逻辑"),t.addTag(window.XYConfig.XYTag().MonitorTypeLoginStart,"8","登录失败"))}),window.XiYouGameSDK.getInstance().login()):(console.log("初始化失败"),this.addTag(window.XYConfig.XYTag().MonitorTypeInitSuccess,"6","收到SDK初始化回调失败"))}),window.XiYouGameSDK.getInstance().init(e,window.XYEvents.getInstance),this.addTag(window.XYConfig.XYTag().MonitorTypeInitSuccess,"4","调用SDK初始化接口")},t.prototype.callback=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return e.prototype.callback.call(this,t),[2]})})},t.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,n){window.wx.request({url:e,success:function(e){r(e.data)},fail:function(){r(null)},dataType:"text",responseType:t})})]})})},t.prototype.iniSdkFun=function(){window.XYEvents.getInstance().on("onPayResult",function(e){if(console.log("showRecharge onPayResult:",e),e.status==window.XYCommon.Status().Success);else if(e.status==window.XYCommon.Status().Pay_Qrcode){var t=e.qrcode;self.IGameMain.showImage(t)}else e.status==window.XYCommon.Status().Pay_Fail||e.status==window.XYCommon.Status().Pay_Wait||e.status==window.XYCommon.Status().Pay_Cancel})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return this.isIos()?(window.wx.setClipboardData({data:"800197000",success:function(){},fail:function(){},complete:function(){}}),window.IGameMain.alert("ios充值未开放，加客服可领超级礼包\n您的SDKid："+this.pfParam.userId+"\n客服qq号：800197000\n（已复制客服QQ)",4),[3,4]):[3,1];case 1:return[4,this.checkShowRecharge(e)];case 2:return(r=c.sent())?(console.log("调用充值"),n=new CreateOrderParamsXYQQXYX,n.uid=""+this.pfParam.userId,n.productID=""+e.yb,n.productName=""+e.itemName,n.productDesc=""+e.desc,n.buyNum="1",n.money=""+e.amount,n.roleID=""+t.actorId,n.roleName=t.actorName,n.roleLevel=""+t.actorLevel,n.serverID=""+EntranceParam.urlParam.serverid,n.serverName=""+EntranceParam.urlParam.serverName,n.extension=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.pid=window.XiYouGameSDK.getInstance().getCurrFlag(),n.cip=""+EntranceParam.urlParam.login_ip,n.clientInfo=window.XiYouGameSDK.getInstance().getClientInfo(),o=this.getCreatOrderUrl(n),console.log(o),[4,this.getHttp(o)]):[3,4];case 3:a=c.sent(),console.log(a),i=JSON.parse(a),200==i.code?(s={fixedPay:!0,productId:""+e.yb,productName:""+e.itemName,productDesc:""+e.desc,ration:"100",coinName:""+LangEntry.str25,price:""+e.amount,buyNum:"1",extension:i.data.extension,zoneid:EntranceParam.urlParam.srvid,orderId:i.data.orderNo,sandbox:!1},console.log("showRecharge pay param:",s),window.XiYouGameSDK.getInstance().pay(s)):this.alert("充值失败:"+i.msg),c.label=4;case 4:return[2]}})})},t.prototype.createRole=function(e){this.reportSDK("2",e),this.addTag(window.XYConfig.XYTag().MonitorTypeEnteredSuccess,"11","创角成功")},t.prototype.enterGame=function(e){var t=this;this.reportSDK("1",e),this.addTag(window.XYConfig.XYTag().MonitorTypeEnteredSuccess,"12","进入游戏"),window.wx.onShareAppMessage(function(){return console.log("onShareAppMessage"),{title:t.getTitle(),imageUrl:t.getImgUrl(),query:t.getQuery()}}),window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var r={qqgame:{power:Math.ceil(e.power/1e4),update_time:Math.ceil(e.serverTime/1e3)}},n={key:"power",value:JSON.stringify(r)};window.wx.setUserCloudStorage({KVDataList:[n],success:function(){console.log("setUserCloudStorage.success")},fail:function(){console.log("setUserCloudStorage.fail")},complete:function(){console.log("setUserCloudStorage.complete")}})},t.prototype.roleUp=function(e){this.reportSDK("3",e)},t.prototype.reportSDK=function(e,t){var r={dataType:e,serverId:""+EntranceParam.urlParam.srvid,serverName:""+t.serverName,roleId:""+t.actorId,roleName:""+t.actorName,roleLevel:""+t.actorLevel,roleCTime:""+t.createRoleTime,roleLevelIMTime:""+((13==t.serverTime.toString().length?Math.floor(t.serverTime/1e3):(new Date).getTime())/1e3).toFixed(0),moneyNum:""+t.yb,vip:""+(t.vipLevel+t.svipLevel),power:""+t.power};window.XiYouGameSDK.getInstance().submitExtraData(r)},t.prototype.addTag=function(e,t,r){window.XiYouGameSDK.getInstance().addTag(e,t,r)},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIos()?this.isShenhe?!1:this._isIosShowRecharge:!0},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.isIos=function(){var e=window.wx.getSystemInfoSync(),t=e.system.indexOf("iOS")>=0;return t},t.prototype.getSceneType=function(){return this.scene},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.getQuality=function(){return 0},t.prototype.getDestroyTime=function(){return 90},t.prototype.isShowShoucang=function(){return!0},t.prototype.showShare=function(){var e={title:this.getTitle(),imageUrl:this.getImgUrl(),query:this.getQuery()};window.XiYouGameSDK.getInstance().shareAppMessage(e),this.shareCallback(!0)},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getTitle=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.isOpenShare=function(e){e(2)},t.prototype.setShareCallback=function(e){this.shareCallback=e},t.prototype.copyResult=function(e,t,r,n){window.wx.setClipboardData({data:e,success:t?t:function(){},fail:r?r:function(){},complete:n?n:function(){}})},t.prototype.requestInviteInfo=function(){var e="";if("string"==typeof this.query)e=this.query;else for(var t in this.query)e+=t+"="+this.query[t]+"&";if(this.query.invite_account&&this.query.invite_server_id){var r=""+this.domain+this.pfPHP+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+e;this.getHttp(r)}},t.prototype.isShowZBJH=function(){return""+this.getSceneType()!=SceneType.qq_type_1011&&!this.isShenhe},t.prototype.isShowLCFL=function(){return!this.isShenhe},t.prototype.getISBN=function(){return window.ISBN||""},t.prototype.getLogoName=function(){return"logo_xiyou.png"},t.prototype.getBgName=function(){return"bg_xiyou.jpg"},t.prototype.reload=function(){console.log("reload"),window.wx.exitMiniProgram({success:function(){console.log("reload_success")},fail:function(){console.log("reload_fail")},complete:function(){}})},t.prototype.isActColorLabel=function(){return!1},t}(PlatFormWW);__reflect(PlatFormXYQQXYX.prototype,"PlatFormXYQQXYX"),window.PlatFormXYQQXYX=PlatFormXYQQXYX;var InterfaceName=function(){function e(){}return e.login="login",e.payInApp="payInApp",e.reportServerEnter="reportServerEnter",e.reportRoleCreate="reportRoleCreate",e.reportRoleEnter="reportRoleEnter",e.reportRoleLevelUp="reportRoleLevelUp",e.reportRoleJoinGameGuild="reportRoleJoinGameGuild",e.reportRoleQuit="reportRoleQuit",e}();__reflect(InterfaceName.prototype,"InterfaceName");var ReportDataYingwen=function(e){function t(){var t=e.call(this)||this;return t.keys=["gameName","serverId","serverName","roleId","roleName","roleLevel"],t}return __extends(t,e),t}(PlatFormParam);__reflect(ReportDataYingwen.prototype,"ReportDataYingwen");var PlatFormYingwenAZ=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zycsen-login.sufungame.com/",t.gameName="Immortal Legend",t.josnProduct={},t}return __extends(t,e),t.prototype.onBeginE11111=function(e){this.filterDisp=e.target,this.filterDisp&&(this.filterDisp.filters=[new egret.GlowFilter(12237472,1,18,18,3,1,!1)]),this.mc||(this.mc=new MCEntry),this.mc.playFile(ResEntrance.getResEff("djtx"),1),this.mc.x=e.stageX,this.mc.y=e.stageY,egret.MainContext.instance.stage.addChild(this.mc)},t.prototype.onEndE11111=function(e){this.filterDisp&&(this.filterDisp.filters=[])},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i;return __generator(this,function(s){switch(s.label){case 0:return e.prototype.init.call(this),this.pfParam.appid="1",this.openBgWin(),[4,this.getHttp("https://zycsen-login.sufungame.com/zyen/api/isFilters")];case 1:return t=s.sent(),r=JSON.parse(t),[4,this.getHttp(this.getVerUrl())];case 2:return n=s.sent(),o=JSON.parse(n),a=o.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>a,window.isFilters=(this.isShenhe?"1":"0")||r.isFilters,document.location.href="unlockgamesdk://recoveryWebViewAlpha",document.location.href="unlockgamesdk://login?interfaceName="+InterfaceName.login,"1"==window.isFilters&&(i=egret.MainContext.instance.stage,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginE11111,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndE11111,this),i.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndE11111,this)),[2]}})})},t.prototype.loginGame=function(){var t="unlockgamesdk://reportServerEnter?interfaceName="+InterfaceName.reportServerEnter+"&gameName="+this.gameName+"&serverId="+EntranceParam.urlParam.srvid+"&serverName="+EntranceParam.urlParam.serverName+"&serverTime=";document.location.href=t,e.prototype.loginGame.call(this)},t.prototype.enterGame=function(e){if("1"==window.isFilters){var t=egret.MainContext.instance.stage;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginE11111,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndE11111,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndE11111,this)}var r="unlockgamesdk://reportRoleEnter?"+this.getReportParam(InterfaceName.reportRoleEnter,e).toParamString();document.location.href=r},t.prototype.createRole=function(e){var t=this.getReportParam(InterfaceName.reportRoleCreate,e);t.roleLevel="1";var r="unlockgamesdk://reportRoleCreate?"+t.toParamString();document.location.href=r},t.prototype.roleUp=function(e){document.location.href="unlockgamesdk://reportRoleLevelUp?"+this.getReportParam(InterfaceName.reportRoleLevelUp,e).toParamString()},t.prototype.joinGuild=function(e){document.location.href="unlockgamesdk://reportRoleJoinGameGuild?"+this.getReportParam(InterfaceName.reportRoleJoinGameGuild,e).toParamString()},t.prototype.sendService=function(e){document.location.href="unlockgamesdk://openCustomerServicePage"},t.prototype.logout=function(e){document.location.href="unlockgamesdk://reportRoleQuit?"+ +this.getReportParam(InterfaceName.reportRoleQuit,e).toParamString()},t.prototype.setProducts=function(e){console.log("setProducts");for(var t=[],r=0,n=e;r<n.length;r++){var o=n[r];t.push(""+o.shangpinId)}var a=t.join("|");document.location.href="unlockgamesdk://getProducts?productIDs="+a+"&productType=inapp"},t.prototype.infoProducts=function(e){console.log("infoProducts");var t=JSON.stringify(e);t=t.replace(/"{/g,"{"),t=t.replace(/}"/g,"}"),t=t.replace(/}\\"/g,"}"),t=t.replace(/\\n/g,""),t=t.replace(/\\/g,"");var r=JSON.parse(t);for(var n in r)this.josnProduct[n]=r[n].price},t.prototype.getProduct=function(e){return console.log("getProducts"),this.josnProduct[e.shangpinId]||""},t.prototype.backPressed=function(){console.log("backPressed");var e=!1;this.serverGgonggaoWin&&this.serverGgonggaoWin.parent&&(this.serverGgonggaoWin.close(),e=!0),!e&&this.serverListWin&&this.serverListWin.parent&&(this.serverListWin.close(),e=!0),e||(e=window.IGameMain&&window.IGameMain.backButton()),e||(document.location.href="unlockgamesdk://exitGameDialogPopUp")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(n=new YingwenPayParam,n.interfaceName=InterfaceName.payInApp,n.amount=e.amount/100,n.currencyCode="USD",n.gameName=this.gameName,n.serverId=EntranceParam.urlParam.srvid,n.serverName=t.serverName,n.roleId=t.actorId,n.roleName=t.actorName,n.roleLevel=t.actorLevel,n.goodsId=e.yb,n.goodsName=e.itemName,n.goodsDesc=e.desc,n.productId=""+e.shangpinId,n.productName=e.itemName,n.cpTradeSn=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.extData=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+this.pfParam.appid,o="unlockgamesdk://payInApp?"+n.toParamString(),document.location.href=o),[2]}})})},t.prototype.getReportParam=function(e,t){var r=new ReportDataYingwen;return r.interfaceName=e,r.serverId=EntranceParam.urlParam.srvid,r.gameName=this.gameName,r.serverName=t.serverName,r.roleId=t.actorId.toString(),r.roleName=t.actorName,r.roleLevel=t.actorLevel.toString(),r},t.prototype.isCustomerBtn=function(e){e(1)},t.prototype.open5Star=function(){document.location.href="unlockgamesdk://openGooglePlayStore"},t.prototype.isShow5Star=function(){return!1},t.prototype.openLink=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return document.location.href="unlockgamesdk://openLinks?pageUrlBase="+window.btoa(e),[2]})})},t.prototype.isShowLogo=function(){return!1},t.prototype.getBgName=function(){return"bg_yingwen.jpg"},t.prototype.yingwenAdsInfo=function(e){e&&e(0)},t.prototype.yingwenAdsPlay=function(e){this.adsPlay=e,document.location.href="unlockgamesdk://advertShow"},t}(PlatFormYingwenBase);__reflect(PlatFormYingwenAZ.prototype,"PlatFormYingwenAZ"),window.PlatFormYingwenAZ=PlatFormYingwenAZ;var YingwenGHGLoginParam=function(e){function t(){var t=e.call(this)||this;return t.keys=["uid","server_id","ts","signature"],t}return __extends(t,e),t}(PlatFormParam);__reflect(YingwenGHGLoginParam.prototype,"YingwenGHGLoginParam");var PlatFormYingwenGHG=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new YingwenGHGLoginParam,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.openBgWin(),this.pfParam.setValueByUrl(location.href),this.openSelectServer(),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){return r=t.actorId+"_"+new Date(t.serverTime).valueOf(),n=e.yb+"|"+t.actorId+"|"+EntranceParam.urlParam.serverid,o={type:"pay",sid:n,orderId:r,goodsId:e.yb,goodsAmount:(e.amount/100).toFixed(2),goodsDesc:e.desc},parent.postMessage(o,"*"),[2]})})},t.prototype.getPfPay=function(){return PfPay.zy2saga},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.isShow5Star=function(){return!1},t.prototype.getLogoName=function(){return"logo_yingwen_saga.jpg"},t.prototype.openPassVIP=function(){console.log("openPassVIP");var e={type:"buyPass"};parent.postMessage(e,"*")},t.prototype.isPassVIP=function(){return 1==this.pfParam.mvip},t.prototype.isShowPass=function(){return!0},t.prototype.isShowPass2=function(){return!1},t.prototype.isPass2VIP=function(){return 1==this.pfParam.mvip},t}(PlatFormWW);__reflect(PlatFormYingwenGHG.prototype,"PlatFormYingwenGHG"),window.PlatFormYingwenGHG=PlatFormYingwenGHG;var PlatFormYingwenH5=function(e){function t(){var t=e.call(this)||this;return t.gameName="Immortal Legend",t.josnProduct={},t}return __extends(t,e),t.prototype.onBeginE11111=function(e){this.filterDisp=e.target,this.filterDisp&&(this.filterDisp.filters=[new egret.GlowFilter(12237472,1,18,18,3,1,!1)]),this.mc||(this.mc=new MCEntry),this.mc.playFile(ResEntrance.getResEff("djtx"),1),this.mc.x=e.stageX,this.mc.y=e.stageY,egret.MainContext.instance.stage.addChild(this.mc)},t.prototype.onEndE11111=function(e){this.filterDisp&&(this.filterDisp.filters=[])},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o;return __generator(this,function(a){switch(a.label){case 0:return e.prototype.init.call(this),this.pfParam.appid="2",this.openBgWin(),[4,this.getHttp("https://zycsen-login.sufungame.com/zyen/api/isFilters")];case 1:return t=a.sent(),r=JSON.parse(t),window.isFilters=r.isFilters,this.pfParam.setValueByUrl(location.href),n=this,window.loadSingleScript("https://cdn.unlock.game/js/unlockgamesdk-1.0.3.min.js",function(){UnlockGameSDK.getInstance().init({sdk_adjust_apptoken:"sprcin3t44cg",sdk_game_id:"30069",sdk_app_id:"18049",sdk_game_url:"https://zycsen-cdn.sufungame.com/yingwen/entrance/zycs_yingwen.html?pfId=zyenh5",sdk_game_client_secret:"d6b60db5573c5d085fed7529dc170171",sdk_facebook_app_id:"813755849196844",sdk_facebook_pixel:"952230065604245",sdk_google_client_id:"840836024897-eorp9divd04lmeavt2ud776tfb38cv1o.apps.googleusercontent.com",sdk_google_send_id:"AW-852978068/B69_CPz8rocCEJTT3ZYD",sdk_google_register_send_id:"AW-852978068/-YAgCMya3okCEJTT3ZYD"}),UnlockGameSDK.getInstance().login({onSuccess:function(e){console.log("登录成功"),n.pfParam.token=e,n.onSuccess()},onCanel:function(){console.log("登录取消")},onError:function(){console.log("登录错误")}})}),"1"==window.isFilters&&(o=egret.MainContext.instance.stage,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginE11111,this),o.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndE11111,this),o.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndE11111,this)),[2]}})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openSelectServer(),[2]}})})},t.prototype.loginGame=function(){UnlockGameSDK.getInstance().reportServerEnter(this.gameName,EntranceParam.urlParam.srvid,EntranceParam.urlParam.serverName,{onSuccess:function(){console.log("区服进入上报成功")},onCanel:function(){console.log("区服进入上报取消")},onError:function(){console.log("区服进入上报错误")}}),e.prototype.loginGame.call(this)},t.prototype.enterGame=function(e){if("1"==window.isFilters){var t=egret.MainContext.instance.stage;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginE11111,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndE11111,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndE11111,this)}var r=this.getReportParam(e);UnlockGameSDK.getInstance().reportRoleEnter(r.gameName,r.serverId,r.serverName,r.roleId,r.roleName,r.roleLevel,{onSuccess:function(){console.log("角色进入上报成功")},onCanel:function(){console.log("角色进入上报取消")},onError:function(){console.log("角色进入上报错误")}}),UnlockGameSDK.getInstance().FloatingBall(this.pfParam.openId,r.serverName,r.serverId,r.roleName,r.roleId)},t.prototype.createRole=function(e){var t=this.getReportParam(e);UnlockGameSDK.getInstance().reportRoleCreate(t.gameName,t.serverId,t.serverName,t.roleId,t.roleName,t.roleLevel,{onSuccess:function(){console.log("角色创建上报成功")},onCanel:function(){console.log("角色创建上报取消")},onError:function(){console.log("角色创建上报错误")}})},t.prototype.roleUp=function(e){var t=this.getReportParam(e);UnlockGameSDK.getInstance().reportRoleLevelUp(t.gameName,t.serverId,t.serverName,t.roleId,t.roleName,t.roleLevel,{onSuccess:function(){console.log("角色升级上报成功")},onCanel:function(){console.log("角色升级上报取消")},onError:function(){console.log("角色升级上报错误")}})},t.prototype.joinGuild=function(e){var t=this.getReportParam(e);UnlockGameSDK.getInstance().reportRoleJoinGameGuild(t.gameName,t.serverId,t.serverName,t.roleId,t.roleName,t.roleLevel,{onSuccess:function(){console.log("角色加入游戏公会上报成功")},onCanel:function(){console.log("角色加入游戏公会上报取消")},onError:function(){console.log("角色加入游戏公会上报错误")}})},t.prototype.sendService=function(e){},t.prototype.logout=function(e){var t=this.getReportParam(e);UnlockGameSDK.getInstance().reportRoleQuit(t.gameName,t.serverId,t.serverName,t.roleId,t.roleName,t.roleLevel,{onSuccess:function(){console.log("角色退出上报成功")},onCanel:function(){console.log("角色退出上报取消")},onError:function(){console.log("角色退出上报错误")}})},t.prototype.setProducts=function(e){console.log("setProducts");for(var t=[],r=0,n=e;r<n.length;r++){var o=n[r];t.push(""+o.shangpinId)}t.join("|")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){return r=new YingwenPayParam,r.amount=e.amount/100,r.currencyCode="USD",r.gameName=this.gameName,r.serverId=EntranceParam.urlParam.srvid,r.serverName=t.serverName,r.roleId=t.actorId,r.roleName=t.actorName,r.roleLevel=t.actorLevel,r.goodsId=e.yb,r.goodsName=e.itemName,r.goodsDesc=e.desc,r.productId=""+e.shangpinId,r.productName=e.itemName,r.cpTradeSn=t.actorId+"_"+new Date(t.serverTime).valueOf(),r.extData=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+this.pfParam.appid,UnlockGameSDK.getInstance().payInApp(r.amount,r.currencyCode,r.gameName,r.serverId,r.serverName,r.roleId,r.roleName,r.roleLevel,r.goodsId,r.goodsName,r.goodsDesc,r.productId,r.productName,r.cpTradeSn,r.extData,{onSuccess:function(){console.log("支付成功")},onCanel:function(){console.log("支付取消")},onError:function(){console.log("支付错误")}}),[2]})})},t.prototype.getReportParam=function(e){var t=new ReportDataYingwen;return t.serverId=EntranceParam.urlParam.srvid,t.gameName=this.gameName,t.serverName=e.serverName,t.roleId=e.actorId.toString(),t.roleName=e.actorName,t.roleLevel=e.actorLevel.toString(),t},t.prototype.isCustomerBtn=function(e){e(1)},t.prototype.open5Star=function(){UnlockGameSDK.getInstance().openLinks("https://play.google.com/store/apps/details?id=com.legend.vertical.rpg.global")},t.prototype.openLink=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return UnlockGameSDK.getInstance().openLinks(e),[2]})})},t.prototype.isShowLogo=function(){return!1},t.prototype.getBgName=function(){return"bg_yingwen.jpg"},t}(PlatFormYingwenBase);__reflect(PlatFormYingwenH5.prototype,"PlatFormYingwenH5"),window.PlatFormYingwenH5=PlatFormYingwenH5;var IGSDK_loginDataRet=function(){function e(){}return e}();__reflect(IGSDK_loginDataRet.prototype,"IGSDK_loginDataRet");var IGSDK_loginData=function(){function e(){}return e}();__reflect(IGSDK_loginData.prototype,"IGSDK_loginData");var IGSDK_PayData=function(){function e(){}return e}();__reflect(IGSDK_PayData.prototype,"IGSDK_PayData");var IGSDK_PayDataRet=function(){function e(){}return e}();__reflect(IGSDK_PayDataRet.prototype,"IGSDK_PayDataRet");var YingwenIGLoginParam=function(e){function t(){var t=e.call(this)||this;return t.keys=["uid","sign"],t}return __extends(t,e),t}(YingwenLoginParam);__reflect(YingwenIGLoginParam.prototype,"YingwenIGLoginParam");var PlatformYingwenIG=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zy2saga-login.gamehollywood.com/",t.gameKey="is",t._isIosShowRecharge=!1,t.platform="",t.pfParam=new YingwenIGLoginParam,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i=this;return __generator(this,function(s){switch(s.label){case 0:return e.prototype.init.call(this),this.openBgWin(),this.pfParam.setValueByUrl(location.href),[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return t=s.sent(),this._isIosShowRecharge="1"==t,r=this.getVerUrl(),console.log("url:"+r),[4,this.getHttp(r)];case 2:return n=s.sent(),o=JSON.parse(n),a=o.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>a,window.FBInstant.initializeAsync().then(function(){window.FBInstant.startGameAsync().then(function(){window.FBInstant.player.getName(),window.FBInstant.getEntryPointData();i.platform=window.FBInstant.getPlatform(),window.initPlatformUser(i.gameKey).then(function(e){console.log("sdk 登录数据===========",e),200==e.code?(i.pfParam.uid=""+e.data.uid,i.pfParam.sign=e.data.sign,i.openSelectServer()):console.log("sdk 获取平台用户 ID 失败:",e.code)})})}),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){return r=t.actorId+"_"+new Date(t.serverTime).valueOf(),n=e.yb+"|"+t.actorId+"|"+EntranceParam.urlParam.serverid,o=new IGSDK_PayData,o.uid=this.pfParam.uid,o.game=this.gameKey,o.goodsAmount=e.amount/100,o.goodsId=""+e.yb,o.goodsDesc=e.desc,o.cpOrderId=r,o.sid=n,o.roleId=""+t.actorId,window.callPay(o),console.log("拉起充值",o),[2]})})},t.prototype.canCreateShortcut=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,window.canCreateShortcutAsync()]})})},t.prototype.createShortcut=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,window.createShortcutAsync()]})})},t.prototype.getPfPay=function(){return PfPay.zy2saga},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIosOrAndroid()?!1:!0},t.prototype.isIosOrAndroid=function(){var e=navigator?navigator.userAgent:"";return e.match(/iPad/)||e.match(/iPhone/)||e.match(/iPod/)||e.match(/Android/)||this.platform.match(/IOS/)||this.platform.match(/ANDROID/)?!0:!1},t.prototype.isShow5Star=function(){return!1},t.prototype.getLogoName=function(){return"logo_yingwen_saga.jpg"},t}(PlatFormYingwenBase);__reflect(PlatformYingwenIG.prototype,"PlatformYingwenIG"),window.PlatformYingwenIG=PlatformYingwenIG;var ReportDataYingwenIOS=function(e){function t(){var t=e.call(this)||this;return t.keys=["urlType","serviceid","servername","roleid","roleName","rolelevel"],t}return __extends(t,e),t}(PlatFormParam);__reflect(ReportDataYingwenIOS.prototype,"ReportDataYingwenIOS");var YingwenIOSPayParam=function(e){function t(){var t=e.call(this)||this;return t.isUseEmptyValue=!0,t.keys=["money","moneytype","serverId","serverName","roleId","rolename","roleLevel","goodId","goodName","tradeSn","extData","productId","productName"],t
}return __extends(t,e),t}(PlatFormParam);__reflect(YingwenIOSPayParam.prototype,"YingwenIOSPayParam");var PlatFormYingwenIOS=function(e){function t(){var t=e.call(this)||this;return t.gameName="卓越传说",t.josnProduct={},t}return __extends(t,e),t.prototype.onBeginE11111=function(e){this.filterDisp=e.target,this.filterDisp&&(this.filterDisp.filters=[new egret.GlowFilter(12237472,1,18,18,3,1,!1)]),this.mc||(this.mc=new MCEntry),this.mc.playFile(ResEntrance.getResEff("djtx"),1),this.mc.x=e.stageX,this.mc.y=e.stageY,egret.MainContext.instance.stage.addChild(this.mc)},t.prototype.onEndE11111=function(e){this.filterDisp&&(this.filterDisp.filters=[])},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o;return __generator(this,function(a){switch(a.label){case 0:return e.prototype.init.call(this),this.pfParam.appid="3",this.openBgWin(),[4,this.getHttp("https://zycsen-login.sufungame.com/zyen/api/isFilters")];case 1:return t=a.sent(),r=JSON.parse(t),window.isFilters=r.isFilters,n=this,egret.ExternalInterface.addCallback("vsdkLoginSuccess",function(e){var t=JSON.parse(e);n.pfParam.token=t.token,n.onSuccess()}),"1"==window.isFilters&&(o=egret.MainContext.instance.stage,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginE11111,this),o.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndE11111,this),o.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndE11111,this)),[2]}})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openSelectServer(),[2]}})})},t.prototype.loginGame=function(){var t={gameName:this.gameName,serverId:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName};egret.ExternalInterface.call("reportSelectSeverBuriedPoint",JSON.stringify(t)),e.prototype.loginGame.call(this)},t.prototype.enterGame=function(e){if("1"==window.isFilters){var t=egret.MainContext.instance.stage;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginE11111,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndE11111,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndE11111,this)}this.reportParam(e,0)},t.prototype.createRole=function(e){this.reportParam(e,1)},t.prototype.roleUp=function(e){this.reportParam(e,2)},t.prototype.joinGuild=function(e){this.reportParam(e,6)},t.prototype.sendService=function(e){},t.prototype.logout=function(e){this.reportParam(e,3)},t.prototype.reportParam=function(e,t){var r=new ReportDataYingwenIOS;r.type=t,r.serviceid=EntranceParam.urlParam.srvid,r.servername=e.serverName,r.roleid=""+e.actorId,r.roleName=e.actorName,r.rolelevel=""+e.actorLevel,egret.ExternalInterface.call("reportBuriedPointWithType",JSON.stringify(r))},t.prototype.setProducts=function(e){console.log("setProducts");for(var t=[],r=0,n=e;r<n.length;r++){var o=n[r];t.push(""+o.shangpinId)}t.join("|")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){return r=new YingwenIOSPayParam,r.money=e.amount,r.moneytype="USD",r.serverId=EntranceParam.urlParam.srvid,r.serverName=t.serverName,r.roleId=t.actorId,r.rolename=t.actorName,r.roleLevel=t.actorLevel,r.goodId=e.yb,r.goodName=e.itemName,r.tradeSn=t.actorId+"_"+new Date(t.serverTime).valueOf(),r.extData=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+this.pfParam.appid,r.productId=""+e.shangpinId,r.productName=e.itemName,egret.ExternalInterface.call("inAppPurchase",JSON.stringify(r)),[2]})})},t.prototype.isCustomerBtn=function(e){e(0)},t.prototype.isShow5Star=function(){return!1},t.prototype.openLink=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.isShowLogo=function(){return!1},t.prototype.isShowFaceBook=function(){return!1},t.prototype.isShowCdkey=function(){return!1},t.prototype.isShowPayItem=function(e){return 100>e},t.prototype.getBgName=function(){return"bg_yingwen.jpg"},t.prototype.openTipsWin=function(t,r,n){return void 0===r&&(r=null),void 0===n&&(n=null),__awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return e.prototype.openTipsWin.call(this,t,r,n),this.debugLog(t),[2]})})},t.prototype.debugLog=function(e){egret.ExternalInterface.call("debugLog",e)},t}(PlatFormYingwenBase);__reflect(PlatFormYingwenIOS.prototype,"PlatFormYingwenIOS"),window.PlatFormYingwenIOS=PlatFormYingwenIOS;var WingPlusSDK_initData=function(){function e(){this.appId="6122369447f011efa28202c85f0429f5",this.appKey="1UaJHJMTtIDHwsAgTlC8uaoEoG2O8evj",this.sdkType="html5"}return e}();__reflect(WingPlusSDK_initData.prototype,"WingPlusSDK_initData");var WingPlusSDK_loginData=function(){function e(){}return e}();__reflect(WingPlusSDK_loginData.prototype,"WingPlusSDK_loginData");var WingPlusSDK_loginDataRet=function(){function e(){}return e}();__reflect(WingPlusSDK_loginDataRet.prototype,"WingPlusSDK_loginDataRet");var WingPlusSDK_payData=function(){function e(){}return e}();__reflect(WingPlusSDK_payData.prototype,"WingPlusSDK_payData");var WingPlusSDK_payDataRet=function(){function e(){}return e}();__reflect(WingPlusSDK_payDataRet.prototype,"WingPlusSDK_payDataRet");var YingwenWPLoginParam=function(e){function t(){var t=e.call(this)||this;return t.userId="",t.appid="6122369447f011efa28202c85f0429f5",t.keys=["token","appid","userId"],t}return __extends(t,e),t.prototype.init=function(){this.addMineKey("appid","appId")},t}(YingwenLoginParam);__reflect(YingwenWPLoginParam.prototype,"YingwenWPLoginParam");var PlatformYingwenWP=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zy2saga-login.gamehollywood.com/",t.gameKey="is",t.pfParam=new YingwenWPLoginParam,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a=this;return __generator(this,function(i){switch(i.label){case 0:return e.prototype.init.call(this),this.openBgWin(),this.pfParam.setValueByUrl(location.href),t=this.getVerUrl(),console.log("url:"+t),[4,this.getHttp(t)];case 1:return r=i.sent(),n=JSON.parse(r),o=n.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>o,console.log("PlatformYingwenWP init"),window.loadSingleScript("https://d1wh375sy22h3n.cloudfront.net/h5/v3.15.0/wingplus.min.js",function(){var e=new WingPlusSDK_initData;e.success=function(){console.log("PlatformYingwenWP init success");var e=new WingPlusSDK_loginData;e.success=function(e){console.log("登录成功",e),a.pfParam.userId=""+e.userId,a.pfParam.token=e.token,a.openSelectServer()},e.fail=function(e){console.log("登录失败")},e.cancel=function(e){console.log("登录取消")},window.wingplus.user.login(e)},window.wingplus.init(e)}),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(n){return window.wingplus.pay.isPayServiceAvailable(function(n){if(n){var o=new WingPlusSDK_payData;o.productId=""+e.yb;var a=r.pfParam.userId+"|"+EntranceParam.urlParam.serverid+"|"+t.actorId+"|"+e.yb;o.extInfo=a,o.success=function(e){console.log("支付成功",e)},window.wingplus.pay.pay(o),console.log("拉起支付",o)}else console.log("支付不可用")}),[2]})})},t.prototype.enterGame=function(e){EntranceParam.isNew||(window.wingplus.core.setServerId(EntranceParam.urlParam.serverid),window.wingplus.core.setGameUserId(e.actorId),window.wingplus.core.setNickname(e.actorName),window.wingplus.track.trackEvent(window.wingplus.track.WAEvent.builder().addDefaultEventValue("isFirstEnter","0").setDefaultEventName(window.wingplus.track.WAEvent.WA_EVENT_TYPE.GHW_USER_IMPORT)),window.wingplus.core.setLevel(e.actorLevel))},t.prototype.firstEnterGame=function(e){},t.prototype.createRole=function(e){window.wingplus.core.setServerId(EntranceParam.urlParam.serverid),window.wingplus.core.setGameUserId(e.actorId),window.wingplus.core.setNickname(e.actorName),window.wingplus.track.trackEvent(window.wingplus.track.WAEvent.builder().addDefaultEventValue("isFirstEnter","1").setDefaultEventName(window.wingplus.track.WAEvent.WA_EVENT_TYPE.GHW_USER_IMPORT)),window.wingplus.core.setLevel(e.actorLevel);var t={registerTime:1e3*e.createRoleTime,nickname:e.actorName,level:e.actorLevel};window.wingplus.track.trackEvent(window.wingplus.track.WAEvent.builder().addAllDefaultEventValue(t).setDefaultEventName(window.wingplus.track.WAEvent.WA_EVENT_TYPE.GHW_USER_CREATE))},t.prototype.roleUp=function(e){window.wingplus.core.setLevel(e.actorLevel),window.wingplus.track.trackEvent(window.wingplus.track.WAEvent.builder().addDefaultEventValue("fighting",""+e.power).setDefaultEventName(window.wingplus.track.WAEvent.WA_EVENT_TYPE.GHW_LEVEL_ACHIEVED))},t.prototype.roleReName=function(e){window.wingplus.core.setGameUserId(e.actorId),window.wingplus.core.setServerId(EntranceParam.urlParam.serverid),window.wingplus.core.setNickname(e.actorName),window.wingplus.track.trackEvent(window.wingplus.track.WAEvent.builder().addDefaultEventValue("nickname",e.actorName).setDefaultEventName(window.wingplus.track.WAEvent.WA_EVENT_TYPE.GHW_USER_INFO_UPDATE))},t.prototype.getPfPay=function(){return PfPay.zy2saga},t.prototype.isShow5Star=function(){return!1},t.prototype.getLogoName=function(){return"logo_yingwen_saga.jpg"},t}(PlatFormYingwenBase);__reflect(PlatformYingwenWP.prototype,"PlatformYingwenWP"),window.PlatformYingwenWP=PlatformYingwenWP;var PlatFormYingWenJunYaoZszzAZ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isShowFaceBook=function(){return!1},t.prototype.getPfPay=function(){return PfPay.zy2enjyzszz},t}(PlatFormYingWenJunYaoAZ);__reflect(PlatFormYingWenJunYaoZszzAZ.prototype,"PlatFormYingWenJunYaoZszzAZ");var LoginParamsYwAz=function(e){function t(){var t=e.call(this)||this;return t.oauth_token="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["oauth_token","openId"]},t}(PlatFormParam);__reflect(LoginParamsYwAz.prototype,"LoginParamsYwAz");var RechargeParamYwAz=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["serverId","serverName","roleId","roleName","level","goodsId","goodsName","amount","cpOrderId","extendParams"]},t}(PlatFormParam);__reflect(RechargeParamYwAz.prototype,"RechargeParamYwAz");var YwAzRoleParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["serverId","serverName","roleId","roleName","level","spare"]},t}(PlatFormParam);__reflect(YwAzRoleParam.prototype,"YwAzRoleParam");var PlatFormYwAz=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsYwAz,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.openBgWin(),document.location.href="YouYiSDK://recoveryWebViewAlpha",document.location.href="YouYiSDK://init",[2]})})},t.prototype.openGame=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.getHttp(this.getVerUrl())];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,e.prototype.openGame.call(this),[2]}})})},t.prototype.sdkLogin=function(){document.location.href="YouYiSDK://login"},t.prototype.sdkSwitchAccountLogin=function(){document.location.href="YouYiSDK://switchAccountLogin"},t.prototype.sdkExit=function(){document.location.href="YouYiSDK://exit"},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(n=new RechargeParamYwAz,n.serverId=EntranceParam.urlParam.srvid,n.serverName=t.serverName,n.roleId=t.actorId,n.roleName=t.actorName,n.level=t.actorLevel,n.goodsId=e.yb,n.goodsName=e.itemName,n.amount=e.amount/100,n.cpOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.extendParams=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o="YouYiSDK://pay?"+n.toParamString(),document.location.href=o),[2]}})})},t.prototype.createRole=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return t=this.getReportData(e),document.location.href="YouYiSDK://creatingRole?"+t.toParamString(),[2]})})},t.prototype.roleUp=function(e){var t=this.getReportData(e);document.location.href="YouYiSDK://levelLog?"+t.toParamString()},t.prototype.getReportData=function(e){var t=new YwAzRoleParam;return t.serverId=""+EntranceParam.urlParam.srvid,t.serverName=EntranceParam.urlParam.serverName,t.roleId=e.actorId,t.roleName=e.actorName,t.level=e.actorLevel||1,t},t}(PlatFormWW);__reflect(PlatFormYwAz.prototype,"PlatFormYwAz");var DebugYWSDK=function(){function e(){}return e.prototype.pay=function(e){},e.prototype.onShare=function(e,t){},e.prototype.onFollow=function(e){},e}();__reflect(DebugYWSDK.prototype,"DebugYWSDK",["YWSDK"]);var LoginParamsYWH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["user_id","channelExt","channel_server_id","game_id","sign","channel_id","time"]},t}(PlatFormParam);__reflect(LoginParamsYWH5.prototype,"LoginParamsYWH5");var RechargeParamYWH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["game_id","subject","server_name","role_name","role_id","server_id","money","user_id","buyAmount","channel_id","extInfo"]},t}(PlatFormParam);__reflect(RechargeParamYWH5.prototype,"RechargeParamYWH5");var YWRoleParam=function(e){function t(){var t=e.call(this)||this;return t.isUseEmptyValue=!0,t}return __extends(t,e),t.prototype.init=function(){this.keys=["user_id","game_id","server_id","server_name","role_id","role_name","level"]},t}(PlatFormParam);__reflect(YWRoleParam.prototype,"YWRoleParam");var PlatFormYWH5=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsYWH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),t=this,window.loadSingleScript("https://gpublish.andou.com/js/game/WTSdk.js?time="+(new Date).getTime(),function(){t.onSuccess()}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openSelectServer(),[2]}})})},t.prototype.createRole=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e),[2]})})},t.prototype.roleUp=function(e){this.getReport(e)},t.prototype.getReport=function(e){var t=new YWRoleParam;t.user_id=this.pfParam.user_id,t.game_id=this.pfParam.game_id,t.server_id=EntranceParam.urlParam.srvid,t.server_name=""+EntranceParam.urlParam.srvid,t.role_id=e.actorId,t.role_name=e.actorName,t.level=e.actorLevel||1;var r=""+this.domain+this.pfPHP+"/api?m=player&fn=pushRole&"+t.toParamString();this.getHttp(r)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=l.sent())?(n=new RechargeParamYWH5,n.game_id=this.pfParam.game_id,n.user_id=this.pfParam.user_id,n.money=e.amount/100,n.subject=e.itemName,n.server_name=t.serverName,n.server_id=EntranceParam.urlParam.srvid,n.role_id=t.actorId,n.role_name=t.actorName,n.channel_id=this.pfParam.channel_id,n.buyAmount=1,n.extInfo=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,o=this.getCreatOrderUrl(n),console.log("showRecharge:"+o),[4,this.getHttp(o)]):[3,3];case 2:a=l.sent(),i=JSON.parse(a),200==i.code?(console.log("调用充值200"),s=i.data,c={game_id:s.game_id,cpOrderId:s.cpOrderId,subject:e.itemName,server_name:t.serverName,role_name:t.actorName,role_id:t.actorId,server_id:EntranceParam.urlParam.srvid,money:e.amount/100,user_id:this.pfParam.user_id,buyAmount:1,extInfo:s.extInfo,sign:s.sign,channel_id:this.pfParam.channel_id},console.log(c),this.getH5gamecn().pay(c)):this.alert("充值失败"),l.label=3;case 3:return[2]}})})},t.prototype.isOpenShare=function(e){},t.prototype.setShareCallback=function(e){},t.prototype.showShare=function(){},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getTitle=function(){return"卓越传说"},t.prototype.getDesc=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.getH5gamecn=function(){return window.juziyun||(window.juziyun=new DebugYWSDK),window.juziyun},t}(PlatFormWW);__reflect(PlatFormYWH5.prototype,"PlatFormYWH5");var LoginParamsYWIOS=function(e){function t(){var t=e.call(this)||this;return t.account="",t.token="",t.userid="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["account","token","userid"],this.addMineKey("userid","uid"),this.addMineKey("token","access_token")},t}(PlatFormParam);__reflect(LoginParamsYWIOS.prototype,"LoginParamsYWIOS");var RechargeParamYWIOS=function(e){function t(){var t=e.call(this)||this;return t.money=0,t.pkgid="",t.sid="",t.roleid=0,t.rolename="",t.rolelevel=0,t.gameother="",t.isUseEmptyValue=!0,t.keys=["money","pkgid","sid","roleid","rolename","rolelevel","gameother"],t}return __extends(t,e),t}(PlatFormParam);__reflect(RechargeParamYWIOS.prototype,"RechargeParamYWIOS");var YWIOSRoleParam=function(e){function t(){var t=e.call(this)||this;return t.sid="",t.roleid=0,t.rolename="",t.rolelevel=0,t.isUseEmptyValue=!0,t}return __extends(t,e),t.prototype.init=function(){this.keys=["sid","roleid","rolename","rolelevel"]},t}(PlatFormParam);__reflect(YWIOSRoleParam.prototype,"YWIOSRoleParam");var PlatFormYWIOS=function(e){function t(){var t=e.call(this)||this;return t.domain="https://zycshy-login.gzxinghu.com/",t._isIosShowRecharge=!1,t.pfParam=new LoginParamsYWIOS,console.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(n){switch(n.label){case 0:return e.prototype.init.call(this),t=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return r=n.sent(),this._isIosShowRecharge="1"==r,egret.ExternalInterface.call("showLogin",""),egret.ExternalInterface.addCallback("loginCallBack",function(e){var r=JSON.parse(e);t.pfParam.account=r.account,t.pfParam.token=r.token,t.pfParam.userid=r.userid,t.onSuccess()}),egret.ExternalInterface.addCallback("KCregchargCallBack",function(e){var t=JSON.parse(e);"YES"==t.status?console.log("支付成功"):"NO"==t.status?console.log("支付失败"):console.log("支付回调:"+t.status)}),[2]}})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openSelectServer(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){return r=new RechargeParamYWIOS,r.money=e.amount/100,r.pkgid=e.shangpinId,r.sid=EntranceParam.urlParam.srvid,r.roleid=t.actorId,r.rolename=t.actorName,r.rolelevel=t.actorLevel,r.gameother=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,egret.ExternalInterface.call("pAction",JSON.stringify(r)),[2]})})},t.prototype.enterGame=function(e){this.getReport(e)},t.prototype.getReport=function(e){var t=new YWIOSRoleParam;t.sid=EntranceParam.urlParam.srvid,t.roleid=e.actorId,t.rolename=e.actorName,t.rolelevel=e.actorLevel,egret.ExternalInterface.call("selectArea",JSON.stringify(t))},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isShenhe?!1:this._isIosShowRecharge},t}(PlatFormWW);__reflect(PlatFormYWIOS.prototype,"PlatFormYWIOS");var LoginParamsYWIOSWeb=function(e){function t(){var t=e.call(this)||this;return t.uid="",t.gid="",t.os="",t.time="",t.sign="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["uid","gid","os","time","sign","openId"]},t}(PlatFormParam);__reflect(LoginParamsYWIOSWeb.prototype,"LoginParamsYWIOSWeb");var RechargeParamYWIOSWeb=function(e){function t(){var t=e.call(this)||this;return t.cp_role_id="",t.cp_role_level="",t.cp_service_id="",t.cp_role_name="",t.cp_product_name="",t.cp_order_money="",t.cp_other="",t.keys=["cp_role_id","cp_role_level","cp_service_id","cp_role_name","cp_product_name","cp_order_money","cp_other"],t}return __extends(t,e),t}(PlatFormParam);__reflect(RechargeParamYWIOSWeb.prototype,"RechargeParamYWIOSWeb");var ReportParamYWIOSWeb=function(e){function t(){var t=e.call(this)||this;return t.cp_role_id="",t.cp_role_level="",t.cp_service_id="",t.cp_role_name="",t.keys=["cp_role_id","cp_role_level","cp_service_id","cp_role_name"],t}return __extends(t,e),t}(PlatFormParam);__reflect(ReportParamYWIOSWeb.prototype,"ReportParamYWIOSWeb");var PlatFormYWIOSWeb=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.pfParam=new LoginParamsYWIOSWeb,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return e.prototype.init.call(this),[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return t=r.sent(),this._isIosShowRecharge="1"==t,this.pfParam.setValueByUrl(location.href),this.onSuccess(),[2]}})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(n=new RechargeParamYWIOSWeb,n.cp_role_id=""+t.actorId,n.cp_role_level=""+t.actorLevel,n.cp_service_id=""+EntranceParam.urlParam.srvid,n.cp_role_name=""+t.actorName,n.cp_product_name=""+e.itemName,n.cp_order_money=""+e.amount/100,n.cp_other=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,"object"==typeof AndroidCallBack?AndroidCallBack.callPayment(n.cp_role_id,n.cp_role_level,n.cp_service_id,n.cp_role_name,n.cp_product_name,n.cp_order_money,n.cp_other):(o={action:"apply_mind",data:JSON.stringify(n)},window.top.postMessage(o,"*"))),[2]}})})},t.prototype.createRole=function(e){this.reportSDK(e)},t.prototype.roleUp=function(e){this.reportSDK(e)},t.prototype.reportSDK=function(e){var t=new ReportParamYWIOSWeb;if(t.cp_role_id=""+e.actorId,t.cp_role_level=""+(e.actorLevel||1),t.cp_service_id=""+EntranceParam.urlParam.srvid,t.cp_role_name=""+e.actorName,"object"==typeof AndroidCallBack)AndroidCallBack.role(t.cp_role_id,t.cp_role_level,t.cp_service_id,t.cp_role_name);else{var r={action:"report_role",data:t};window.top.postMessage(r,"*")}},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isShenhe?!1:this._isIosShowRecharge},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.getQuality=function(){return 0},t}(PlatFormWW);__reflect(PlatFormYWIOSWeb.prototype,"PlatFormYWIOSWeb");var LoginParamsYwYingwenIos=function(e){function t(){var t=e.call(this)||this;return t.name="",t.oauth_token="",t.uid="",t.wskey="",t}return __extends(t,e),t.prototype.init=function(){this.keys=["name","oauth_token","uid","wskey"]},t}(PlatFormParam);__reflect(LoginParamsYwYingwenIos.prototype,"LoginParamsYwYingwenIos");var RechargeParamYwYingwenIos=function(e){function t(){var t=e.call(this)||this;return t.cpOrderId="",t.goodsId="",t.goodsName="",t.roleId=0,t.roleName="",t.level=0,t.serverId="",t.serverName="",t.amount=0,t.extend_params="",t.isUseEmptyValue=!0,t.keys=["cpOrderId","goodsId","goodsName","roleId","roleName","level","serverId","serverName","amount","extend_params"],t}return __extends(t,e),t}(PlatFormParam);__reflect(RechargeParamYwYingwenIos.prototype,"RechargeParamYwYingwenIos");var YwYingwenIosRoleParam=function(e){function t(){var t=e.call(this)||this;return t.roleId=0,t.roleName="",t.roleLevel=0,t.serverId="",t.serverName="",t.isUseEmptyValue=!0,t}return __extends(t,e),t.prototype.init=function(){this.keys=["roleId","roleName","roleLevel","serverId","serverName","serverName"]},t}(PlatFormParam);__reflect(YwYingwenIosRoleParam.prototype,"YwYingwenIosRoleParam");var PlatFormYwYingwenIos=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.pfParam=new LoginParamsYwYingwenIos,console.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(n){switch(n.label){case 0:return e.prototype.init.call(this),t=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return r=n.sent(),this._isIosShowRecharge="1"==r,egret.ExternalInterface.call("interfaceLogin",""),egret.ExternalInterface.addCallback("interfaceLoginCallback",function(e){var r=JSON.parse(e);t.pfParam.name=r.name,t.pfParam.oauth_token=r.oauth_token,t.pfParam.uid=r.uid,t.pfParam.wskey=r.wskey,t.onSuccess()}),egret.ExternalInterface.addCallback("interfaceLogoutCallback",function(e){t.reload()}),[2]}})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n=new RechargeParamYwYingwenIos,n.cpOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=e.amount/100,n.goodsId=""+e.yb,n.goodsName=e.itemName,n.serverId=EntranceParam.urlParam.srvid,n.serverName=EntranceParam.urlParam.serverName,n.roleId=t.actorId,n.roleName=t.actorName,n.level=t.actorLevel,n.extend_params=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,egret.ExternalInterface.call("interfaceCpOrderId",JSON.stringify(n))),[2]}})})},t.prototype.enterGame=function(e){this.getReport(e)},t.prototype.getReport=function(e){var t=new YwYingwenIosRoleParam;t.roleId=e.actorId,t.roleName=e.actorName,t.roleLevel=e.actorLevel,t.serverId=EntranceParam.urlParam.srvid,t.serverName=EntranceParam.urlParam.serverName,egret.ExternalInterface.call("interfaceUploadRoleId",JSON.stringify(t))},t.prototype.isShowRecharge=function(){return this._isIosShowRecharge},t}(PlatFormWW);__reflect(PlatFormYwYingwenIos.prototype,"PlatFormYwYingwenIos");var LoginParamsZGWXXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["token","uid","openId"]},t}(PlatFormParam);__reflect(LoginParamsZGWXXYX.prototype,"LoginParamsZGWXXYX");var PayParamsZGWXXYX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["orderId","amount","description","cp_info"]},t}(PlatFormParam);__reflect(PayParamsZGWXXYX.prototype,"PayParamsZGWXXYX");var PlatFormZGWXXYX=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t.scene=0,t.appId=2226,t.flag="WXX3_SYDLYLJX",t.domain="https://zy2zg-login.zhenplay.com/",t.pfParam=new LoginParamsZGWXXYX,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.wxxyx},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return e.prototype.init.call(this),t=this,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 1:return r=c.sent(),this._isIosShowRecharge="1"==r,[4,this.getHttp(this.getVerUrl())];case 2:return n=c.sent(),o=JSON.parse(n),a=o.client_version||0,this.isShenhe=void 0==window.v||window.v>a,i=window.wx.getLaunchOptionsSync(),this.scene=i.scene,this.query=i.query,console.log("scene:"+this.scene),s=new SubPacketParam,s.name="js1",s.success=function(e){t.initLoginParam()},s.fail=function(e){var r="";for(var n in e)r+=n+"="+e[n]+"\n";t.openTipsWin("wx.loadSubpackage失败\n"+r)},window.wx.loadSubpackage(s),[2]}})})},t.prototype.initLoginParam=function(){var e=this;this.sdk.init(this.appId,this.flag,function(){console.log("初始成功"),e.sdk.login(function(t,r){console.log("登录成功"),e.pfParam.token=t,e.pfParam.uid=r,e.openGame()})})},t.prototype.getHttp=function(e,t){return void 0===t&&(t=egret.HttpResponseType.TEXT),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,n){window.wx.request({url:e,success:function(e){r(e.data)},fail:function(){r(null)},dataType:"text",responseType:t})})]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(console.log("调用充值"),n=new PayParamsZGWXXYX,n.orderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=""+e.amount,n.description=""+e.itemName,n.cp_info=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,this.sdk.pay(n.orderId,n.amount,n.description,n.cp_info,function(){console.log("充值结束")})),[2]}})})},t.prototype.createRole=function(e){this.sdk.createRole(""+e.actorName,""+e.serverName)},t.prototype.enterGame=function(e){this.sdk.role(""+e.yb,""+e.actorLevel,""+(e.vipLevel+e.svipLevel),""+e.actorId,""+e.actorName,""+e.serverName,function(){console.log("set role over")})},t.prototype.roleUp=function(e){},t.prototype.powerUp=function(e){},Object.defineProperty(t.prototype,"sdk",{get:function(){return window.Zsdk},enumerable:!0,configurable:!0}),t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIos()?this.isShenhe?!1:this._isIosShowRecharge:!0},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t.prototype.isIos=function(){var e=window.wx.getSystemInfoSync(),t=e.system.indexOf("iOS")>=0;return t},t.prototype.getSceneType=function(){return this.scene},t.prototype.loadGroup=function(e){e.type==LoadGroupType.preloadAll&&(e.type=LoadGroupType.preloadAllXYX),ResUtil.ins().loadGroup(e.type,e.onSuccess,e.onProgress,this,e.retryCount)},t.prototype.getQuality=function(){return 0},t.prototype.getDestroyTime=function(){return 90},t.prototype.isShowShoucang=function(){return!0},t.prototype.showShare=function(){window.wx.shareAppMessage({title:this.getTitle(),imageUrl:this.getImgUrl(),query:this.getQuery()}),this.shareCallback(!0),console.log("主动拉起转发，进入选择通讯录界面1")
},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getTitle=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.isOpenShare=function(e){e(2)},t.prototype.setShareCallback=function(e){this.shareCallback=e},t.prototype.requestInviteInfo=function(){var e="";if("string"==typeof this.query)e=this.query;else for(var t in this.query)e+=t+"="+this.query[t]+"&";if(this.query.invite_account&&this.query.invite_server_id){var r=""+this.domain+this.pfPHP+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+e;this.getHttp(r)}},t.prototype.getISBN=function(){return window.ISBN||""},t.prototype.isShowYqhl=function(){return!0},t}(PlatFormWW);__reflect(PlatFormZGWXXYX.prototype,"PlatFormZGWXXYX"),window.PlatFormZGWXXYX=PlatFormZGWXXYX;var LoginParamsZhangyouAzDouyin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["openid","token","openId"]},t}(PlatFormParam);__reflect(LoginParamsZhangyouAzDouyin.prototype,"LoginParamsZhangyouAzDouyin");var PlatFormZhangyouAzDouyin=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsZhangyouAzDouyin,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){return e.prototype.init.call(this),this.openBgWin(),egret.ExternalInterface.addCallback("MzwsCgbZySDKInitOnResultSuccess",function(e){console.log("MzwsCgbZySDKInitOnResultSuccess----------------------------"+e),egret.ExternalInterface.call("login","")}),egret.ExternalInterface.addCallback("MzwsCgbZySDKInitOnResultError",function(e){console.log("MzwsCgbZySDKInitOnResultError----------------------------"+e),t.alert("初始失败，请重新登录 "+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKLoginOnResultSuccess",function(e){console.log("MzwsCgbZySDKLoginOnResultSuccess----------------------------"+e);var r=JSON.parse(e);t.pfParam.openid=r.openId,t.pfParam.token=r.token,t.onSuccess()}),egret.ExternalInterface.addCallback("MzwsCgbZySDKLoginOnResultError",function(e){console.log("MzwsCgbZySDKLoginOnResultError----------------------------"+e),t.alert("登录失败，请重新登录 "+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKChangeUserOnResultSuccess",function(e){console.log("MzwsCgbZySDKChangeUserOnResultSuccess----------------------------"+e),t.reload()}),egret.ExternalInterface.addCallback("MzwsCgbZySDKChangeUserOnResultError",function(e){console.log("MzwsCgbZySDKChangeUserOnResultError----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKExitOnResultSuccess",function(e){console.log("MzwsCgbZySDKExitOnResultSuccess----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKExitOnResultError",function(e){console.log("MzwsCgbZySDKExitOnResultError----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKReportRoleOnResultSuccess",function(e){console.log("MzwsCgbZySDKReportRoleOnResultSuccess----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKReportRoleOnResultError",function(e){console.log("MzwsCgbZySDKReportRoleOnResultError----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKPayOnResultSuccess",function(e){console.log("MzwsCgbZySDKPayOnResultSuccess----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKPayOnResultError",function(e){console.log("MzwsCgbZySDKPayOnResultError----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKH5GameLog",function(e){console.log("MzwsCgbZySDKH5GameLog----------------------------"+e)}),egret.ExternalInterface.addCallback("MzwsCgbZySDKOnBackPressed",function(e){console.log("MzwsCgbZySDKOnBackPressed----------------------------"+e);var r=!1;t.serverGgonggaoWin&&t.serverGgonggaoWin.parent&&(t.serverGgonggaoWin.close(),r=!0),!r&&t.serverListWin&&t.serverListWin.parent&&(t.serverListWin.close(),r=!0),r||(r=window.IGameMain&&window.IGameMain.backButton()),r||egret.ExternalInterface.call("exit","")}),egret.ExternalInterface.call("init",""),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=i.sent(),r&&(n=t.actorId+"_"+new Date(t.serverTime).valueOf(),o={fee:Math.floor(e.amount/100),subject:e.itemName,body:e.desc,orderId:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb+"|"+n,zoneId:EntranceParam.urlParam.srvid,zoneName:EntranceParam.urlParam.serverName,roleId:t.actorId,roleName:t.actorName,roleLevel:t.actorLevel,callbackUrl:""},a=JSON.stringify(o),egret.ExternalInterface.call("pay",a)),[2]}})})},t.prototype.createRole=function(e){this.reportSDKData(e,1)},t.prototype.enterGame=function(e){this.reportSDKData(e,0)},t.prototype.roleUp=function(e){this.reportSDKData(e,2)},t.prototype.reportSDKData=function(e,t){var r={roleType:t,roleId:e.actorId,roleName:e.actorName,roleLevel:e.actorLevel,zoneId:EntranceParam.urlParam.srvid,zoneName:EntranceParam.urlParam.serverName},n=JSON.stringify(r);egret.ExternalInterface.call("reportRole",n)},t.prototype.relogin=function(){EntranceParam.urlParam.isnew="0",EntranceParam.urlParam.roleCount="1",window.IGameMain.relogin()},t}(PlatFormWW);__reflect(PlatFormZhangyouAzDouyin.prototype,"PlatFormZhangyouAzDouyin");var DebugZSSDK=function(){function e(){}return e.prototype.init=function(e,t){},e.prototype.login=function(e,t){},e.prototype.logout=function(e){},e.prototype.switchAccount=function(e,t){},e.prototype.pay=function(e,t){},e.prototype.setExtData=function(e){},e}();__reflect(DebugZSSDK.prototype,"DebugZSSDK",["ZSSDK"]);var ZSRoleParam=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["roleName","roleLevel","roleId","serverId"]},t}(PlatFormParam);__reflect(ZSRoleParam.prototype,"ZSRoleParam");var LoginParamsZSH5=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.keys=["appId","channelId","adId","adFlag","uid","token"]},t}(PlatFormParam);__reflect(LoginParamsZSH5.prototype,"LoginParamsZSH5");var PlatFormZSH5=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new LoginParamsZSH5,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n=this;return __generator(this,function(o){return e.prototype.init.call(this),t=this,this.pfParam.setValueByUrl(location.href),r=["https://apps.bdimg.com/libs/jquery/1.11.1/jquery.js?v="+Math.random(),"https://files.yifu188.com/websdk/js/zshysdk.min.js?v="+Math.random()],window.loadScript(r,function(){n.getH5gamecn().init(t.pfParam.appId,function(){}),n.getH5gamecn().login(function(e,r){t.pfParam.uid=e,t.pfParam.token=r,t.onSuccess()},function(e){})}),[2]})})},t.prototype.onSuccess=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,n;return __generator(this,function(o){switch(o.label){case 0:return e=this.getVerUrl(),console.log("url:"+e),[4,this.getHttp(e)];case 1:return t=o.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=void 0!=window.v&&window.v>n,this.openGame(),[2]}})})},t.prototype.createRole=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e),[2]})})},t.prototype.enterGame=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e),[2]})})},t.prototype.roleUp=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e),[2]})})},t.prototype.logout=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.getReport(e),[2]})})},t.prototype.getReport=function(e){var t=new ZSRoleParam;t.serverId=EntranceParam.urlParam.srvid,t.roleId=""+e.actorId,t.roleName=""+e.actorId,t.roleLevel=""+(e.actorLevel||1),this.getH5gamecn().setExtData(t)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(console.log("调用充值"),n={billno:t.actorId+"_"+new Date(t.serverTime).valueOf(),amount:e.amount/100,extraInfo:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,uid:this.pfParam.uid,roleName:""+t.actorId,roleLevel:t.actorLevel,roleId:t.actorId,serverId:EntranceParam.urlParam.srvid,code:0,productName:e.itemName},this.getH5gamecn().pay(n,function(e){console.log("支付回调 code:"+e)})),[2]}})})},t.prototype.isOpenShare=function(e){},t.prototype.setShareCallback=function(e){},t.prototype.showShare=function(){},t.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},t.prototype.getTitle=function(){return"卓越传说"},t.prototype.getDesc=function(){return"勇者大陆，等你一起征战！"},t.prototype.getImgUrl=function(){var e=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+e+".jpg")},t.prototype.getH5gamecn=function(){return window.ZSHYSDK||(window.ZSHYSDK=new DebugZSSDK),window.ZSHYSDK},t}(PlatFormWW);__reflect(PlatFormZSH5.prototype,"PlatFormZSH5");var PlatFormZYYXAZMC=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.pfParam.appid=window.appid,[2]})})},t}(PlatFormZYYXAZ);__reflect(PlatFormZYYXAZMC.prototype,"PlatFormZYYXAZMC");var PlatFormZYYXIOS=function(e){function t(){var t=e.call(this)||this;return t._isLiuhai=!1,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.appid="2",egret.ExternalInterface.addCallback("loginCallback",function(e){var r=e.split("|"),n=r[0],o=r[1];console.log("loginCallback----------------------------"+e),t.pfParam.openId=n,t.pfParam.token=o,t.openSelectServer()}),egret.ExternalInterface.addCallback("enterServerCallback",function(e){console.log("enterServerCallback----------------------------"+e)}),egret.ExternalInterface.addCallback("payCallback",function(e){"1"==e&&window.IGameMain.payCallback(!0,0),console.log("payCallback----------------------------"+e)}),egret.ExternalInterface.addCallback("logoutCallback",function(e){console.log("logoutCallback----------------------------"+e),window.IGameMain.logout()}),egret.ExternalInterface.addCallback("isLiuHaiCallback",function(e){console.log("isLiuHaiCallback----------------------------"+e),"true"==e&&(t._isLiuhai=!0)}),this.openBgWin(),[2]})})},t.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.openSelectServer.call(this),egret.ExternalInterface.call("AppsFlyerTrack","af_login"),[2]})})},t.prototype.taskChange=function(e,t){3==t.taskId&&1==t.state&&(egret.ExternalInterface.call("AppsFlyerTrack","af_level_achieved"),egret.ExternalInterface.call("AppsFlyerTrack","af_tutorial_completion"))},t.prototype.loginGame=function(){window.IGameMain.isLogoutCallback(!1),e.prototype.loginGame.call(this)},t.prototype.createRole=function(t){e.prototype.createRole.call(this,t),this.report(2,t),egret.ExternalInterface.call("AppsFlyerTrack","af_complete_registration")},t.prototype.enterGame=function(t){e.prototype.enterGame.call(this,t),this.report(1,t)},t.prototype.roleUp=function(e){e.actorLevel%10==0&&this.report(3,e)},t.prototype.logout=function(e){this.report(4,e),egret.ExternalInterface.call("logout","")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n={},n.GoodsPrice=e.amount,n.productId=e.shangpinId,n.gameOrderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.gameZoneId=EntranceParam.urlParam.srvid,n.roleId=t.actorId,n.level=t.actorLevel,n.roleName=t.actorName,n.notifyUrl="",n.cpPrivateInfo=EntranceParam.urlParam.openId+"|"+e.yb,egret.ExternalInterface.call("pay",JSON.stringify(n))),[2]}})})},t.prototype.report=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(n){return r=this.getReportParam(e,t),egret.ExternalInterface.call("report",JSON.stringify(r)),[2]})})},t.prototype.getReportParam=function(e,t){var r=new TaiwanReportParamIOS;return r.gamezoneid=EntranceParam.urlParam.srvid.toString(),r.gameZoneName=EntranceParam.urlParam.serverName,r.guildName=t.guildName,r.roleBalance=t.yb.toString(),r.roleId=t.actorId.toString(),r.roleName=t.actorName,r.submitType=e.toString(),r},t.prototype.sendService=function(e){},t.prototype.isLiuhai=function(){return this._isLiuhai},t.prototype.relogin=function(){},t}(PlatFormZYYXBase);__reflect(PlatFormZYYXIOS.prototype,"PlatFormZYYXIOS");var TaiwanReportParamIOS=function(e){function t(){var t=e.call(this)||this;return t.keys=["gamezoneid","gameZoneName","guildName","roleBalance","roleId","roleName","submitType"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanReportParamIOS.prototype,"TaiwanReportParamIOS");var TWMFLoginParamAZ=function(e){function t(){var t=e.call(this)||this;return t.uid="",t.token="",t.keys=["uid","token","openId"],t}return __extends(t,e),t}(TaiwanLoginParam);__reflect(TWMFLoginParamAZ.prototype,"TWMFLoginParamAZ");var TWMFPayParamAZ=function(e){function t(){var t=e.call(this)||this;return t.server_id="",t.server_name="",t.role_id="",t.role_name="",t.role_level="0",t.role_balance="",t.party_name="",t.vip_level="0",t.amount="0",t.currency="USD",t.goods_id="",t.goods_name="",t.pay_type="",t.order_id="",t.sdk_order_id="",t.extras_params="",t.callback_url_base64="",t.isUseEmptyValue=!0,t.keys=["server_id","server_name","role_id","role_name","role_level","role_balance","party_name","vip_level","amount","currency","goods_id","goods_name","pay_type","order_id","sdk_order_id","extras_params","callback_url_base64"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TWMFPayParamAZ.prototype,"TWMFPayParamAZ");var TWMFReportParamAZ=function(e){function t(){var t=e.call(this)||this;return t.uid="",t.server_id="",t.server_name="",t.role_id="",t.role_name="",t.role_level="",t.role_balance="",t.party_name="",t.vip_level="",t.isUseEmptyValue=!0,t.keys=["uid","server_id","server_name","role_id","role_name","role_level","role_balance","party_name","vip_level"],t}return __extends(t,e),t}(PlatFormParam);__reflect(TWMFReportParamAZ.prototype,"TWMFReportParamAZ");var PlatFormZYYXMFAZ=function(e){function t(){var t=e.call(this)||this;return t.pfParam=new TWMFLoginParamAZ,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zyyxmf},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.init.call(this),this.openBgWin(),document.location.href="ManFangSDK://startInit",[2]})})},t.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.prototype.openSelectServer.call(this),[2]})})},t.prototype.loginGame=function(){e.prototype.loginGame.call(this)},t.prototype.enterGame=function(e){this.report(e)},t.prototype.createRole=function(e){},t.prototype.roleUp=function(e){this.report(e)},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n=new TWMFPayParamAZ,n.server_id=EntranceParam.urlParam.srvid,n.server_name=EntranceParam.urlParam.serverName,n.role_id=""+t.actorId,n.role_name=t.actorName,n.role_level=""+t.actorLevel,n.role_balance=""+t.yb,n.party_name=t.guildName,n.vip_level=""+(t.vipLevel+t.svipLevel),n.amount=""+e.amount/100,n.currency="USD",n.goods_id=""+e.shangpinId,n.goods_name=e.itemName,n.pay_type="",n.order_id=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.sdk_order_id="",n.extras_params=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.callback_url_base64="",document.location.href="ManFangSDK://pay?"+n.toParamString()),[2]}})})},t.prototype.report=function(e){var t=new TWMFReportParamAZ;t.uid=this.pfParam.uid,t.server_id=EntranceParam.urlParam.srvid,t.server_name=EntranceParam.urlParam.serverName,t.role_id=""+e.actorId,t.role_name=e.actorName,t.role_level=""+e.actorLevel,t.role_balance=""+e.yb,t.party_name=e.guildName,t.vip_level=""+(e.vipLevel+e.svipLevel),document.location.href="ManFangSDK://updateRoleInfo?"+t.toParamString()},t.prototype.taskChange=function(e,t){3==t.taskId&&1==t.state},t.prototype.sendService=function(e){},t.prototype.logout=function(e){document.location.href="ManFangSDK://logout"},t.prototype.openLink=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return document.location.href="ManFangSDK://openLinks?pageUrlBase64="+window.btoa(e),[2]})})},t.prototype.isShowFBCzfl=function(){return!0},t.prototype.isShowFBFsfl=function(){return!0},t}(PlatFormZYYXBase);__reflect(PlatFormZYYXMFAZ.prototype,"PlatFormZYYXMFAZ");var TWMFLoginParam=function(e){function t(){var t=e.call(this)||this;return t.uid="",t.username="",t.sign="",t.isLogin="",t.time="",t.marketTag="",t.keys=["uid","username","sign","isLogin","time","marketTag","openId"],t}return __extends(t,e),t}(TaiwanLoginParam);__reflect(TWMFLoginParam.prototype,"TWMFLoginParam");var TWMFPayParam=function(){function e(){this.productCode="",this.uid="",this.username="",this.userRoleId="",this.userRoleName="",this.userServer="",this.userLevel="",this.cpOrderNo="",this.amount="",this.count="",this.quantifier="",this.subject="",this.desc="",this.extrasParams="",this.goodsId=""}return e}();__reflect(TWMFPayParam.prototype,"TWMFPayParam");var TWMFReportParam=function(){function e(){this.uid="",this.userRoleName="",this.userRoleId="",this.userRoleLevel=""}return e}();__reflect(TWMFReportParam.prototype,"TWMFReportParam");var PlatFormZYYXMFH5=function(e){function t(){var t=e.call(this)||this;return t.productCode="47947998476984754856837837287591",t.pfParam=new TWMFLoginParam,t}return __extends(t,e),t.prototype.getPfPay=function(){return PfPay.zyyxmf},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(n){return e.prototype.init.call(this),t=this,this.pfParam.setValueByUrl(location.href),window.loadSingleScript("https://sdkapi.changshafire.com/static/lib/libSDK.js?v="+Math.random(),function(){H5SDK.init(r.productCode),t.openSelectServer()}),[2]})})},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(n=new TWMFPayParam,n.productCode=this.productCode,n.uid=this.pfParam.uid,n.username=this.pfParam.username,n.userRoleId=""+t.actorId,n.userRoleName=t.actorName,n.userServer=EntranceParam.urlParam.srvid,n.userLevel=""+t.actorLevel,n.cpOrderNo=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.amount=""+e.amount,n.count="1",n.quantifier="分",n.subject=e.itemName,n.desc=e.desc,n.extrasParams=EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,n.goodsId=""+e.shangpinId,this.fbq("InitiateCheckout"),this.ttq("Purchase"),o=JSON.stringify(n),H5SDK.pay(o,function(e){console.log("下单通知"+JSON.stringify(e))})),[2]}})})},t.prototype.createRole=function(e){this.fbq("CompleteRegistration"),this.ttq("Registration")},t.prototype.selectRole=function(e){this.fbq("ChooseCareer")},t.prototype.enterGame=function(e){this.report(e),this.fbq("Login")},t.prototype.roleUp=function(e){e.actorLevel%10==0&&this.fbq("LevelUp")},t.prototype.showGame=function(){e.prototype.showGame.call(this),this.fbq("CompleteLoading")},t.prototype.report=function(e){var t=new TWMFReportParam;t.uid=this.pfParam.uid,t.userRoleName=e.actorName,t.userRoleId=""+e.actorId,t.userRoleLevel=""+e.actorLevel;var r=JSON.stringify(t);H5SDK.uploadGameRoleInfo(r,function(e){e.status?console.log("上报成功"):console.log("上报失败")})},t.prototype.openLink=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return window.open(e),[2]})})},t.prototype.isShowFBCzfl=function(){return!0},t.prototype.isShowFBFsfl=function(){return!0},t}(PlatFormZYYXBase);__reflect(PlatFormZYYXMFH5.prototype,"PlatFormZYYXMFH5");var TWMJLoginParam=function(e){function t(){var t=e.call(this)||this;return t.Ugameid=0,t.Uid=0,t.Time="",t.Sign="",t.keys=["Ugameid","Uid","Time","Sign","openId"],t}return __extends(t,e),t}(TaiwanLoginParam);__reflect(TWMJLoginParam.prototype,"TWMJLoginParam");var PlatFormZYYXMJH5=function(e){function t(){var t=e.call(this)||this;return t._isIosShowRecharge=!1,t._cjhyKf="",t._cjhyDec="",t.pfParam=new TWMJLoginParam,t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a,i,s,c;return __generator(this,function(l){switch(l.label){case 0:return e.prototype.init.call(this),this.openBgWin(),this.isIos()&&(window.defSound=0,window.defIsShowTheReff=0,window.defIsShowHit=0,window.defIsShowOtherWing=0,window.defIsShowHuDun=0,window.cacheStartValue=3,window.cacheDefGear=0),[4,this.getHttp(this.getVerUrl())];case 1:return t=l.sent(),r=JSON.parse(t),n=r.client_version||0,this.isShenhe=!!window.isShenhe||void 0!=window.v&&window.v>n,[4,this.getHttp(""+this.domain+this.pfPHP+"/api/getConfig?key=show_cjhy_kf")];case 2:return o=l.sent(),a=JSON.parse(o),this._cjhyKf=a.show_cjhy_kf||"",[4,this.getHttp(""+this.domain+this.pfPHP+"/api/getConfig?key=show_cjhy")];case 3:return i=l.sent(),s=JSON.parse(i),this._cjhyDec=s.show_cjhy||"",[4,this.getHttp(""+this.domain+this.pfPHP+"/api/wxIosPayStatus")];case 4:return c=l.sent(),this._isIosShowRecharge="1"==c,this.pfParam.setValueByUrl(location.href),this.openSelectServer(),[2]}})})},t.prototype.setV=function(e){this.isShenhe?EntranceParam.setKeyValue("v",(+window.v||+e).toString()):EntranceParam.setKeyValue("v",e)},t.prototype.createRole=function(e){},t.prototype.selectRole=function(e){},t.prototype.enterGame=function(e){this.report("createRole",e)},t.prototype.roleUp=function(e){this.report("levelUp",e)},t.prototype.roleUpReportLevel=function(){return 1},t.prototype.showGame=function(){e.prototype.showGame.call(this)},t.prototype.report=function(e,t){var r={Ugameid:this.pfParam.Ugameid,Uid:this.pfParam.Uid,Serverid:""+EntranceParam.urlParam.srvid,level:""+t.actorLevel,Roleid:""+t.actorId,RoleName:""+t.actorName,Method:""+e,Time:t.serverTime};window.parent.postMessage(r,"*")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=o.sent(),r&&(n={Ugameid:this.pfParam.Ugameid,Uid:this.pfParam.Uid,Serverid:""+EntranceParam.urlParam.srvid,Roleid:""+t.actorId,Method:"createPay",Time:t.serverTime,Cp_orderid:t.actorId+"_"+new Date(t.serverTime).valueOf(),Ctext:EntranceParam.urlParam.openId+"|"+e.yb,Sku:""+e.shangpinId,UPrice:""+e.amount/100},window.parent.postMessage(n,"*")),[2]}})})},t.prototype.isShowRecharge=function(){var e=!1;return e=this.isIos()?this._isIosShowRecharge:!0},t.prototype.isIos=function(){var e=navigator?navigator.userAgent:"";return e.match(/iPad/)||e.match(/iPhone/)||e.match(/iPod/)?!0:!1},t.prototype.isShowGzh=function(){return this.isIos()?!1:!0},t.prototype.isShowCjhy=function(){return!0},t.prototype.getCjhyKfLine=function(){var e=this._cjhyKf.split("|");return e[0]||""},t.prototype.getCjhyKfWechat=function(){var e=this._cjhyKf.split("|");return e[1]||""},t.prototype.getCjhyDayNum=function(){var e=this._cjhyDec.split("|");return+e[0]||Number.MAX_VALUE},t.prototype.getCjhyAllNum=function(){var e=this._cjhyDec.split("|");return+e[1]||Number.MAX_VALUE},t.prototype.openTaiwanGzh=function(e){window.open("https://www.facebook.com/100087951835234")},t.prototype.isCustomerBtn=function(e){e(1)},t.prototype.sendService=function(e){var t=""+this.domain+this.pfPHP+"/api?m=player&fn=sendHttp&game="+EntranceParam.urlParam.srvid+"&userId="+e.actorId+"&userName="+EntranceParam.urlParam.openId+"&userNameCn="+e.actorName+"&userLevel="+e.actorLevel+"&vipLevel="+(e.vipLevel+e.svipLevel)+"&content="+e.content+"&appId="+this.pfPHP,r=new HttpRequester,n=function(t){var r=t.target.response;1===r||"1"===r?e.onSuccessCallback():e.onFailCallback()};r.open(t,egret.HttpMethod.GET,n,n),r.send()},t.prototype.logout=function(e){location.reload()},t}(PlatFormZYYXBase);__reflect(PlatFormZYYXMJH5.prototype,"PlatFormZYYXMJH5");var TaiwanPayParamWeb=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(PlatFormParam);__reflect(TaiwanPayParamWeb.prototype,"TaiwanPayParamWeb");var PlatFormZYYXWeb=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return e.prototype.init.call(this),this.pfParam.appid="0",this.openBgWin(),t=this,window.loadScript(["https://h5sdk.zsdkgame.com/static/js/chunk-vendors.js?v="+Math.random(),"https://h5sdk.zsdkgame.com/static/js/client.js?v="+Math.random()],function(){GameH5Sdk.login(function(e,r){0==e?(t.pfParam.token=r.token,t.openSelectServer()):alert("登录失败,请刷新")})}),[2]})})},t.prototype.createRole=function(e){GameH5Sdk.role.create(EntranceParam.urlParam.srvid,EntranceParam.urlParam.serverName,e.actorId,e.actorName,e.actorLevel,e.createRoleTime),this.fbq("CompleteRegistration")},t.prototype.selectRole=function(e){this.fbq("ChooseCareer")},t.prototype.enterGame=function(e){GameH5Sdk.role.enter(EntranceParam.urlParam.srvid,EntranceParam.urlParam.serverName,e.actorId,e.actorName,e.actorLevel,e.createRoleTime),this.fbq("Login")},t.prototype.roleUp=function(e){e.actorLevel%10==0&&(GameH5Sdk.role.upgrade(EntranceParam.urlParam.srvid,EntranceParam.urlParam.serverName,e.actorId,e.actorName,e.actorLevel,e.createRoleTime),this.fbq("LevelUp"))},t.prototype.showGame=function(){e.prototype.showGame.call(this),this.fbq("CompleteLoading")},t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o=this;return __generator(this,function(a){switch(a.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return r=a.sent(),r&&(n={},n.orderId=t.actorId+"_"+new Date(t.serverTime).valueOf(),n.waresId=parseInt(""+e.shangpinId),n.serverId=EntranceParam.urlParam.srvid,n.serverName=EntranceParam.urlParam.serverName,n.roleId=t.actorId,n.roleName=t.actorName,n.roleLevel=t.actorLevel,n.amount=e.amount/100,n.ext=EntranceParam.urlParam.openId+"|"+e.yb,this.fbq("InitiateCheckout"),GameH5Sdk.pay(n,function(e,t){0==e?(console.log("支付成功"),o.fbq("Purchase",{value:n.amount,currency:"USD"})):alert(t)})),[2]}})})},t.prototype.sendService=function(e){},t.prototype.logout=function(e){location.reload()},t}(PlatFormZYYXBase);__reflect(PlatFormZYYXWeb.prototype,"PlatFormZYYXWeb"),window.PlatFormZYYXWeb=PlatFormZYYXWeb;var PlatFormZYYXZJWebV2=function(e){function t(){var t=e.call(this)||this;return t.urlList=["https://sdk.zhijiangames.com/public/bower_components/jquery/dist/jquery.min.js?v="+Math.random(),"http://sdk.zhijiangames.com/channelsdk/sbpulsdk.js?v="+Math.random()],t}return __extends(t,e),t.prototype.showRecharge=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,n,o,a,i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.checkShowRecharge(e)];case 1:return(r=c.sent())?(n=new TaiwanPayParamZJWeb,n.cpgameid=this.pfParam.cpgameid,n.qqesuid=this.pfParam.qqesuid,n.channelid=this.pfParam.channelid,n.channeluid=this.pfParam.channeluid,n.goodsname=""+e.shangpinId,n.fee=e.amount,n.goodsid=e.yb,o=""+this.domain+this.pfPHP+"/payment/createorder?"+n.toParamString(),[4,this.getHttp(o)]):[3,3];case 2:a=c.sent(),console.log(a),i=JSON.parse(a),200==i.code?(s={order:i.data.order,cpgameid:this.pfParam.cpgameid,qqesuid:this.pfParam.qqesuid,channelid:this.pfParam.channelid,channeluid:this.pfParam.channeluid,goodsname:e.shangpinId,fee:e.amount/100,serverID:EntranceParam.urlParam.srvid,serverName:EntranceParam.urlParam.serverName,roleName:t.actorName,roleId:t.actorId,ext:EntranceParam.urlParam.openId+"|"+EntranceParam.urlParam.srvid+"|"+t.actorId+"|"+e.yb,timestamp:i.data.timestamp,sign:i.data.sign,goodsid:e.yb},SbPulSdk.pay(s)):console.log("充值失败:"+i.msg),c.label=3;case 3:return[2]}})})},t}(PlatFormZYYXZJWeb);__reflect(PlatFormZYYXZJWebV2.prototype,"PlatFormZYYXZJWebV2"),window.PlatFormZYYXZJWebV2=PlatFormZYYXZJWebV2;var ServerBgWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource(window.platform.getBgName()),this.addChild(this.imgBg)},t.prototype.open=function(){e.prototype.open.call(this),this.addBg(.8)},t.prototype.onStageResize=function(){e.prototype.onStageResize.call(this),egret.Capabilities.isMobile?this.imgBg.scaleX=this.imgBg.scaleY=egret.MainContext.instance.stage.stageWidth/900:this.imgBg.horizontalCenter=0},t}(BaseWinEntry);__reflect(ServerBgWin.prototype,"ServerBgWin"),window.ServerBgWin=ServerBgWin;var ServerComTipsWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.group.width=546,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.left=this.imgBg.right=this.imgBg.top=this.imgBg.bottom=0,this.imgBg.source=ResEntrance.getResSource("tipsbg2.jpg"),this.imgBg.scale9Grid=new egret.Rectangle(80,80,386,16),this.group.addChild(this.imgBg),this.imgTitle=new eui.Image,this.imgTitle.y=12,this.imgTitle.horizontalCenter=0,this.group.addChild(this.imgTitle),this.scroller=new eui.Scroller,this.scroller.x=30,this.scroller.width=486,this.scroller.top=60,this.scroller.bottom=146,this.scroller.scrollPolicyV="on",this.scroller.scrollPolicyH="off",this.group.addChild(this.scroller),this.lbList=new eui.List,this.scroller.addChild(this.lbList),this.scroller.viewport=this.lbList,this.lbList.useVirtualLayout=!0,this.lbList.itemRenderer=ServerComTipsWinItem,this.lbList.dataProvider=this.lbListData=new eui.ArrayCollection;var t=new eui.VerticalLayout;t.horizontalAlign="left",t.verticalAlign="middle",t.gap=15,this.lbList.layout=t,this.btnOk=new eui.Image,this.btnOk.source=ResEntrance.getResSource("tipsbtn.png"),this.btnOk.bottom=67,this.btnOk.horizontalCenter=0,this.group.addChild(this.btnOk)},t.prototype.open=function(e,t,r,n){void 0===n&&(n=488),this.addBg(),this.addClickE(this.btnOk,this.onClick),this.addClickE(this,this.onClick),this.setText(e),this.imgTitle.source=ResEntrance.getResSource(t),this.group.height=n,this.scroller.viewport.scrollV=r},t.prototype.setText=function(e){for(var t=800,r=Math.ceil(e.length/t),n=[],o=0;r>o;o++){var a=e.slice(o*t,o*t+t);n.push(a)}this.lbListData.source=n},t.prototype.close=function(){e.prototype.close.call(this)},t.prototype.onLink=function(e){window.platform.openLink(e.text)
},t.prototype.onClick=function(e){switch(e.target){case this.btnOk:this.close()}if(e.currentTarget==this){var t=this.globalToLocal(e.stageX,e.stageY);this.group.hitTestPoint(t.x,t.y)||this.close()}},t}(BaseWinEntry);__reflect(ServerComTipsWin.prototype,"ServerComTipsWin"),window.ServerComTipsWin=ServerComTipsWin;var ServerComTipsWinItem=function(e){function t(){var t=e.call(this)||this;return t.lbDec=new eui.Label,t.lbDec.size=20,t.lbDec.width=486,t.lbDec.text="",t.lbDec.fontFamily="黑体",t.lbDec.textColor=16777215,t.lbDec.lineSpacing=15,t.lbDec.wordWrap=!0,t.lbDec.multiline=!0,t.addChild(t.lbDec),t}return __extends(t,e),t.prototype.dataChanged=function(){"string"==typeof this.data&&(this.lbDec.textFlow=StringUtil.toTF(this.data),this.height=this.lbDec.height)},t}(BaseItemEntry);__reflect(ServerComTipsWinItem.prototype,"ServerComTipsWinItem");var ServerGonggaoWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.group.width=497,this.group.height=786,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.left=this.imgBg.right=this.imgBg.top=this.imgBg.bottom=0,this.imgBg.source=ResEntrance.getResSource("ntcbg.jpg"),this.group.addChild(this.imgBg),this.scroller=new eui.Scroller,this.scroller.x=30,this.scroller.y=68,this.scroller.width=434,this.scroller.height=700,this.scroller.scrollPolicyV="on";var t=new eui.Group;this.scroller.addChild(t),this.scroller.viewport=t,this.group.addChild(this.scroller),this.labelGG=new eui.Label,this.labelGG.size=22,this.labelGG.width=this.scroller.width,this.labelGG.text="",this.labelGG.fontFamily="Times",this.labelGG.textColor=16777215,this.labelGG.lineSpacing=5,this.labelGG.wordWrap=!0,this.labelGG.multiline=!0,t.addChild(this.labelGG),this.btnClose0=new eui.Image,this.btnClose0.y=815,this.btnClose0.horizontalCenter=0,this.btnClose0.source=ResEntrance.getResSource("close.png"),this.group.addChild(this.btnClose0)},t.prototype.open=function(e){this.addBg(),this.addClickE(this.btnClose0,this.onClick),this.addClickE(this,this.onClick),this.labelGG.addEventListener(egret.TextEvent.LINK,this.onLink,this),this.labelGG.textFlow=StringUtil.toTF(e)},t.prototype.close=function(){this.labelGG.removeEventListener(egret.TextEvent.LINK,this.onLink,this),e.prototype.close.call(this)},t.prototype.onLink=function(e){window.platform.openLink(e.text)},t.prototype.onClick=function(e){switch(e.target){case this.btnClose0:this.close()}if(e.currentTarget==this){var t=this.globalToLocal(e.stageX,e.stageY);this.group.hitTestPoint(t.x,t.y)||this.close()}},t}(BaseWinEntry);__reflect(ServerGonggaoWin.prototype,"ServerGonggaoWin"),window.ServerGonggaoWin=ServerGonggaoWin;var ServerListData=function(){function e(){this.defaultserver=new ServerData,this.serverTabList=[],this.isnew="0"}return e.prototype.setDataByObject=function(e){this.defaultserver.setDataByObject(e.lastserver.default_server);var t=[];for(var r in e.lastserver.last_server){var n=new ServerData;n.setDataByObject(e.lastserver.last_server[r]),t.push(n)}var o=new ServerPHPTabData;o.label_id=0,o.serverList=t,this.serverTabList.push(o);for(var r in e.label_list){var n=new ServerPHPTabData;n.setDataByObject(e.label_list[r]),this.serverTabList.push(n)}this.isnew=e.isnew.toString()},e.prototype.sortDesc=function(e,t){return e.label_id>t.label_id?-1:e.label_id<t.label_id?1:0},e.prototype.getMaxPage=function(){return this.serverTabList.length},e.prototype.getServerListByPage=function(e){return this.serverTabList[e].serverList},e.prototype.setServerListByPage=function(e,t){this.serverTabList[e].serverList=t},e.prototype.getServerTabData=function(e){return this.serverTabList[e]},e}();__reflect(ServerListData.prototype,"ServerListData"),window.ServerListData=ServerListData;var ServerPHPTabData=function(e){function t(){var t=e.call(this)||this;return t.label_id=1,t.name="",t.start=1,t.end=100,t.serverList=[],t}return __extends(t,e),t.prototype.init=function(){this.keys=["label_id","start","end"]},t.prototype.setDataByObject=function(e){this.label_id=e.label_id||1,this.start=e.start||1,this.end=e.end||100,this.name=e.name||"未知"},t.prototype.getTabName=function(){return 0==this.label_id?LangEntry.str8:""+this.name},t.prototype.hasServerList=function(e){return this.serverList.length>0},t}(PlatFormParam);__reflect(ServerPHPTabData.prototype,"ServerPHPTabData"),window.ServerPHPTabData=ServerPHPTabData;var ServerPHPData=function(){function e(){}return e}();__reflect(ServerPHPData.prototype,"ServerPHPData"),window.ServerPHPData=ServerPHPData;var ServerData=function(){function e(){this.server_id="-1",this.name="未知",this.server_status="3"}return e.prototype.setDataByObject=function(e){this.server_id=e.server_id||"-1",this.name=e.name||"未知",this.server_status=e.server_status||"3"},Object.defineProperty(e.prototype,"isWeihu",{get:function(){return 3==parseInt(this.server_status)||0==parseInt(this.server_status)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srvId",{get:function(){return parseInt(this.server_id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canEnter",{get:function(){return"-1"!=this.server_id&&!this.isWeihu},enumerable:!0,configurable:!0}),e}();__reflect(ServerData.prototype,"ServerData"),window.ServerData=ServerData;var ServerTabReturnData=function(){function e(){}return e.prototype.copy=function(e){this.serverlist=[];for(var t=0;t<e.serverlist.length;t++)this.serverlist[t]=new ServerData,this.serverlist[t].setDataByObject(e.serverlist[t])},e}();__reflect(ServerTabReturnData.prototype,"ServerTabReturnData"),window.ServerTabReturnData=ServerTabReturnData;var ServerListWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.group.width=497,this.group.height=786,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.left=this.imgBg.right=this.imgBg.top=this.imgBg.bottom=0,this.imgBg.source=ResEntrance.getResSource("selserbg.jpg"),this.group.addChild(this.imgBg),this.tab=new eui.TabBar,this.tab.x=0,this.tab.y=0;var t=this.tab.layout=new eui.VerticalLayout;t.gap=6,this.tab.itemRenderer=ServerListWinTabItem,this.scrollerTab=new eui.Scroller,this.scrollerTab.x=18,this.scrollerTab.y=66,this.scrollerTab.width=180,this.scrollerTab.height=700,this.scrollerTab.scrollPolicyV="on",this.scrollerTab.viewport=this.tab,this.group.addChild(this.scrollerTab),this.scrollerTab.addChild(this.tab),this.list=new eui.List,this.scroller=new eui.Scroller,this.scroller.x=198,this.scroller.y=66,this.scroller.width=282,this.scroller.height=700,this.scroller.scrollPolicyV="on",this.scroller.viewport=this.list,this.group.addChild(this.scroller);var r=this.list.layout=new eui.VerticalLayout;r.gap=6,this.list.itemRenderer=ServerListWinItem,this.list.dataProvider=this.listCollection=new eui.ArrayCollection,this.scroller.addChild(this.list),this.btnClose0=new eui.Image,this.btnClose0.y=815,this.btnClose0.horizontalCenter=0,this.btnClose0.source=ResEntrance.getResSource("close.png"),this.group.addChild(this.btnClose0)},t.prototype.open=function(t){void 0===t&&(t=new ServerListData),this.serverListData=t,this.tab.selectedIndex=0,e.prototype.open.call(this),this.addBg(),this.addItemTapE(this.list,this.onItemClick),this.addItemTapE(this.tab,this.onTabClickChange),this.addClickE(this.btnClose0,this.onClick),this.updateTabList()},t.prototype.onItemClick=function(e){var t=e.item;this.close(),window.platform.updateCurServer(t)},t.prototype.onClick=function(e){switch(e.target){case this.btnClose0:this.close()}},t.prototype.updateTabList=function(){this.tab.dataProvider=new eui.ArrayCollection(this.serverListData.serverTabList),this.updateCurServerList()},t.prototype.updateCurServerList=function(){var e=this.tab.selectedIndex,t=this.serverListData.getServerListByPage(e);this.listCollection.source=t},t.prototype.onTabClickChange=function(e){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a;return __generator(this,function(i){switch(i.label){case 0:return e=this.tab.selectedIndex,t=this.serverListData.getServerTabData(e),t.hasServerList(e)?[3,2]:(r=window.platform.getServerListUrl(t),[4,window.platform.getHttp(r)]);case 1:n=i.sent(),o=JSON.parse(n),a=new ServerTabReturnData,a.copy(o),this.serverListData.setServerListByPage(e,a.serverlist),i.label=2;case 2:return this.updateCurServerList(),[2]}})})},t}(BaseWinEntry);__reflect(ServerListWin.prototype,"ServerListWin"),window.ServerListWin=ServerListWin;var ServerListWinItem=function(e){function t(){var t=e.call(this)||this;return t.width=282,t.height=60,t.imgBg=new eui.Image,t.imgBg.left=t.imgBg.right=t.imgBg.top=t.imgBg.bottom=0,t.imgBg.source=ResEntrance.getResSource("serbg.png"),t.addChild(t.imgBg),t.imgState=new eui.Image,t.imgState.x=19,t.imgState.y=9,t.addChild(t.imgState),t.labelServerName=new eui.Label,t.labelServerName.size=20,t.labelServerName.textColor=16772040,t.labelServerName.horizontalCenter=0,t.labelServerName.fontFamily="Times",t.labelServerName.x=81,t.labelServerName.verticalCenter=0,t.addChild(t.labelServerName),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.imgState.source=ResEntrance.getResSource(["check_small.png","new_small.png","hot_small.png","check_small.png"][e.server_status]),this.labelServerName.text=e.name},t}(eui.ItemRenderer);__reflect(ServerListWinItem.prototype,"ServerListWinItem"),window.ServerListWinItem=ServerListWinItem;var ServerListWinTabItem=function(e){function t(){var t=e.call(this)||this;t.width=180,t.height=52,t.imgBg=new eui.Image,t.imgBg.source=ResEntrance.getResSource("catebg.png"),t.addChild(t.imgBg),t.imgSelect=new eui.Image,t.imgSelect.source=ResEntrance.getResSource("serbg1.png"),t.imgSelect.visible=!1,t.addChild(t.imgSelect);var r=t.labelDisplay=new eui.Label;return r.size=20,r.textColor=16772040,r.horizontalCenter=-4,r.fontFamily="Times",r.x=81,r.verticalCenter=0,t.addChild(r),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.labelDisplay.text=e.getTabName()},t.prototype.invalidateState=function(){e.prototype.invalidateState.call(this),this.invalidateProperties()},t.prototype.invalidateProperties=function(){e.prototype.invalidateProperties.call(this),this.selected?this.imgSelect&&(this.imgSelect.visible=!0):this.imgSelect&&(this.imgSelect.visible=!1)},t}(eui.ItemRenderer);__reflect(ServerListWinTabItem.prototype,"ServerListWinTabItem"),window.ServerListWinTabItem=ServerListWinTabItem;var ServerLoadingWin=function(e){function t(){var t=e.call(this)||this;return t.oldIndexDesc=0,t.descs=LangEntry.str7,t.intervalId=0,t.intervalId1=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.imgGongGao=new eui.Image,this.imgGongGao.x=610,this.imgGongGao.top=30,this.imgGongGao.source=ResEntrance.getResSource("notice.png"),this.labelDesc=new eui.Label,this.labelDesc.size=22,this.labelDesc.text="描述",this.labelDesc.fontFamily="Times",this.labelDesc.horizontalCenter=0,this.labelDesc.top=957,this.labelDesc.textColor=13486270,this.group.addChild(this.labelDesc),this.labelGG1=new eui.Label,this.labelGG1.width=720,this.labelGG1.size=20,this.labelGG1.fontFamily="Times",this.labelGG1.wordWrap=!0,this.labelGG1.textAlign="center",this.labelGG1.text=LangEntry.str3,this.labelGG1.horizontalCenter=0,this.labelGG1.bottom=15,this.labelGG1.lineSpacing=5,this.group.addChild(this.labelGG1),this.imgDescBg=new eui.Image,this.imgDescBg.source=ResEntrance.getResSource("login_zycs_d.png"),this.imgDescBg.top=757,this.group.addChild(this.imgDescBg),this.labelLoad=new eui.Label,this.labelLoad.size=20,this.labelLoad.fontFamily="Times",this.labelLoad.text=LangEntry.str21,this.labelLoad.horizontalCenter=0,this.labelLoad.top=778,this.labelLoad.lineSpacing=5,this.labelLoad.textColor=13486270,this.group.addChild(this.labelLoad),this.labelLoad1=new eui.Label,this.labelLoad1.size=20,this.labelLoad1.fontFamily="Times",this.labelLoad1.text=LangEntry.str22,this.labelLoad1.horizontalCenter=0,this.labelLoad1.top=869,this.labelLoad1.lineSpacing=5,this.labelLoad1.textColor=13486270,this.group.addChild(this.labelLoad1),this.labelLoad2=new eui.Label,this.labelLoad2.size=20,this.labelLoad2.fontFamily="Times",this.labelLoad2.text=LangEntry.str23,this.labelLoad2.horizontalCenter=0,this.labelLoad2.top=894,this.labelLoad2.lineSpacing=5,this.labelLoad2.textColor=13486270,this.group.addChild(this.labelLoad2),this.progressBar1=new eui.ProgressBar;var t=new eui.Image;t.source=ResEntrance.getResSource("login_zycs_y.png"),this.progressBar1.slideDuration=1,this.progressBar1.thumb=t,this.progressBar1.maximum=100,this.progressBar1.value=0,this.progressBar1.top=826,this.progressBar1.addChild(t),this.group.addChild(this.progressBar1),this.progressBar2=new eui.ProgressBar,t=new eui.Image,t.source=ResEntrance.getResSource("login_zycs_g.png"),this.progressBar2.thumb=t,this.progressBar2.maximum=100,this.progressBar2.value=0,this.progressBar2.top=848,this.progressBar2.slideDuration=1,this.progressBar2.addChild(t),this.group.addChild(this.progressBar2)},t.prototype.open=function(){e.prototype.open.call(this),0==this.intervalId&&(this.intervalId=setInterval(this.onInterval.bind(this),2e3),this.onInterval()),this.intervalId1=setInterval(this.onIntervalPro.bind(this),20),this.onIntervalPro()},t.prototype.onInterval=function(){var e=Math.floor(Math.random()*this.descs.length);this.oldIndexDesc!=e?(this.oldIndexDesc=e,this.labelDesc.text=this.descs[e],this.labelDesc.textColor=6==e?16751375:13486270):this.onInterval()},t.prototype.onIntervalPro=function(){this.progressBar2.value>=100&&(this.progressBar2.value=0,this.onIntervalPro()),this.progressBar2.value=this.progressBar2.value+1},t.prototype.close=function(){e.prototype.close.call(this),clearInterval(this.intervalId),clearInterval(this.intervalId1)},t.prototype.showLoadProgress=function(e,t){this.progressBar1.value=e,this.labelLoad2.text=LangEntry.str24.replace("$value$",""+e)},t.prototype.setClickEnable=function(e){this.touchEnabled=this.touchEnabled=!1},t}(BaseWinEntry);__reflect(ServerLoadingWin.prototype,"ServerLoadingWin"),window.ServerLoadingWin=ServerLoadingWin;var ServerTipsWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.group.width=552,this.group.height=488,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource("tipsbg.jpg"),this.group.addChild(this.imgBg),this.imgTitle=new eui.Image,this.imgTitle.source=ResEntrance.getResSource("tipstitle.png"),this.imgTitle.y=12,this.imgTitle.horizontalCenter=0,this.group.addChild(this.imgTitle),this.labelContent=new eui.Label,this.labelContent.width=456,this.labelContent.height=215,this.labelContent.fontFamily="Times",this.labelContent.textAlign="center",this.labelContent.lineSpacing=15,this.labelContent.size=20,this.labelContent.y=98,this.labelContent.verticalAlign=egret.VerticalAlign.MIDDLE,this.labelContent.horizontalCenter=0,this.group.addChild(this.labelContent),this.btnOk=new eui.Image,this.btnOk.source=ResEntrance.getResSource("tipsbtn.png"),this.btnOk.y=362,this.btnOk.horizontalCenter=0,this.group.addChild(this.btnOk)},t.prototype.open=function(t,r,n){void 0===t&&(t=""),void 0===r&&(r=null),void 0===n&&(n=null),e.prototype.open.call(this),console.log("openServerTipsWin:"+t),this.labelContent.text=t,this.callback=r,this.obj=n,this.addClickE(this.btnOk,this.onClick),this.addBg(.8)},t.prototype.onClick=function(e){switch(e.target){case this.btnOk:this.close(),this.callback&&(this.obj?this.callback.call(this.obj):this.callback())}},t}(BaseWinEntry);__reflect(ServerTipsWin.prototype,"ServerTipsWin"),window.ServerTipsWin=ServerTipsWin;var ServerVerifyWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.group.width=553,this.group.height=394,this.group.verticalCenter=-40,this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource("smrzbg.jpg"),this.group.addChild(this.imgBg),this.labelDesc=new eui.Label,this.labelDesc.fontFamily="Times",this.labelDesc.textAlign="center",this.labelDesc.lineSpacing=12,this.labelDesc.size=20,this.labelDesc.y=62,this.labelDesc.text=LangEntry.str15,this.labelDesc.verticalAlign=egret.VerticalAlign.MIDDLE,this.labelDesc.horizontalCenter=0,this.group.addChild(this.labelDesc),this.labelName=new eui.Label,this.labelName.fontFamily="Times",this.labelName.textAlign="center",this.labelName.size=20,this.labelName.x=65,this.labelName.y=140,this.labelName.text=LangEntry.str16,this.labelName.verticalAlign=egret.VerticalAlign.MIDDLE,this.group.addChild(this.labelName),this.textInputName=new eui.EditableText,this.textInputName.width=346,this.textInputName.height=36,this.textInputName.x=154,this.textInputName.y=140,this.textInputName.size=20,this.textInputName.touchEnabled=!0,this.textInputName.fontFamily="Times",this.textInputName.textAlign="center",this.group.addChild(this.textInputName),this.labelCode=new eui.Label,this.labelCode.fontFamily="Times",this.labelCode.textAlign="center",this.labelCode.size=20,this.labelCode.x=45,this.labelCode.y=202,this.labelCode.text=LangEntry.str17,this.labelCode.verticalAlign=egret.VerticalAlign.MIDDLE,this.group.addChild(this.labelCode),this.textInputCode=new eui.EditableText,this.textInputCode.width=346,this.textInputCode.height=36,this.textInputCode.x=154,this.textInputCode.y=201,this.textInputCode.size=20,this.textInputCode.fontFamily="Times",this.textInputCode.touchEnabled=!0,this.textInputCode.textAlign="center",this.group.addChild(this.textInputCode),this.btnOk=new eui.Image,this.btnOk.source=ResEntrance.getResSource("tipsbtn.png"),this.btnOk.y=270,this.btnOk.horizontalCenter=0,this.group.addChild(this.btnOk)},t.prototype.open=function(t,r){e.prototype.open.call(this),this.callback=t,this.obj=r,this.addClickE(this.btnOk,this.onClick),this.addBg(.8)},t.prototype.getAndCheck=function(e,t){return __awaiter(this,void 0,void 0,function(){var e,t,r,n,o,a,i,s,c,l,u,p,h,d,m,g,f;return __generator(this,function(y){switch(y.label){case 0:return e=this.textInputName.text,t=this.textInputCode.text,r=/^[\u4E00-\u9FA5]{2,4}$/,r.test(e)?(n=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,o=/^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}$/,n.test(t)||o.test(t)?(a=window.platform.getIdCardVerifyUrl(e,t),c=(s=JSON).parse,[4,window.platform.getHttp(a)]):[3,2]):(this.showTips(LangEntry.str18),[2]);case 1:return i=c.apply(s,[y.sent()]),l=i.msg,window.platform.isOpenIndulge=i.isTourists?2:0,"0"==i.status?(u=18==t.length,p=15==t.length,h=!1,d="",u?d=t.substr(6,4)+"/"+t.substr(10,2)+"/"+t.substr(12,2):p&&(d="19"+t.substr(6,2)+"/"+t.substr(8,2)+"/"+t.substr(10,2)),m=new Date(d),g=new Date,f=g.getFullYear()-m.getFullYear(),(g.getMonth()<m.getMonth()||g.getMonth()==m.getMonth()&&g.getDate()<m.getDate())&&f--,f>=18?(this.close(),this.obj?this.callback.call(this.obj):this.callback()):this.showTips(LangEntry.str19)):this.showTips(l),[3,3];case 2:this.showTips(LangEntry.str20),y.label=3;case 3:return[2]}})})},t.prototype.onClick=function(e){switch(e.target){case this.btnOk:this.getAndCheck(this.labelName.text,this.labelCode.text)}},t.prototype.showTips=function(e){var t=new ServerTipsWin;Main.self.addChild(t),t.open(e)},t}(BaseWinEntry);__reflect(ServerVerifyWin.prototype,"ServerVerifyWin"),window.ServerVerifyWin=ServerVerifyWin;var ServerWin=function(e){function t(){var t=e.call(this)||this;return t.clickCount=0,t.clickMaxCount=4,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.imgLogo=new eui.Image,this.imgLogo.left=this.imgLogo.top=10,this.imgLogo.source=ResEntrance.getResSource(window.platform.getLogoName()),this.imgLogo.visible=!1,this.group.addChild(this.imgLogo),this.btnGonggao=new eui.Image,this.btnGonggao.right=40,this.btnGonggao.top=120,this.btnGonggao.source=ResEntrance.getResSource("notice.png"),this.group.addChild(this.btnGonggao),this.imgAge=new eui.Image,this.imgAge.right=40,this.imgAge.top=240,this.imgAge.source=ResEntrance.getResSource(window.platform.getAgeName()),this.imgAge.visible=!1,this.group.addChild(this.imgAge),this.btnLogout=new eui.Image,this.btnLogout.right=40,this.btnLogout.top=360,this.btnLogout.source=ResEntrance.getResSource("qhzh.png"),this.btnLogout.visible=!!window.isShowLogout,this.group.addChild(this.btnLogout),this.groupServer=new eui.Group,this.groupServer.horizontalCenter=0,this.groupServer.bottom=360,this.group.addChild(this.groupServer),this.imgServerDi=new eui.Image,this.imgServerDi.source=ResEntrance.getResSource("curbg.png"),this.groupServer.addChild(this.imgServerDi),this.imgState=new eui.Image,this.imgState.x=49,this.imgState.verticalCenter=0,this.imgState.source=ResEntrance.getResSource("check_small.png"),this.groupServer.addChild(this.imgState),this.labelServerName=new eui.Label,this.labelServerName.size=24,this.labelServerName.fontFamily="Times",this.labelServerName.horizontalCenter=-18,this.labelServerName.verticalCenter=0,this.labelServerName.text=LangEntry.str1,this.groupServer.addChild(this.labelServerName),this.labelVersion=new eui.Label,this.labelVersion.size=24,this.labelVersion.x=20,this.labelVersion.fontFamily="Times",this.labelVersion.y=950,this.labelVersion.visible=!1,this.labelVersion.textColor=1306146,this.group.addChild(this.labelVersion),this.btnSelectServer=new eui.Image,this.btnSelectServer.x=327,this.btnSelectServer.verticalCenter=0,this.btnSelectServer.source=ResEntrance.getResSource("djxf.png"),this.groupServer.addChild(this.btnSelectServer),this.labelWeihu=new eui.Label,this.labelWeihu.size=30,this.labelWeihu.textColor=16751375,this.labelWeihu.text=LangEntry.str2,this.labelWeihu.horizontalCenter=0,this.labelWeihu.fontFamily="Times",this.labelWeihu.bottom=275,this.group.addChild(this.labelWeihu),this.labelGG1=new eui.Label,this.labelGG1.width=720,this.labelGG1.size=20,this.labelGG1.fontFamily="Times",this.labelGG1.textAlign="center",this.labelGG1.horizontalCenter=0,this.labelGG1.lineSpacing=5,this.labelGG1.validateNow(),this.group.addChild(this.labelGG1),this.btnStartGame=new eui.Image,this.btnStartGame.horizontalCenter=0,this.btnStartGame.bottom=180,this.btnStartGame.source=ResEntrance.getResSource("start.png"),this.group.addChild(this.btnStartGame),this.groupYszc=new eui.Group,this.groupYszc.horizontalCenter=0,this.groupYszc.bottom=300;var t=new eui.HorizontalLayout;this.groupYszc.layout=t,this.cb=new eui.Image,this.groupYszc.addChild(this.cb),this.lbYszc1=new eui.Label,this.lbYszc1.size=22,this.groupYszc.addChild(this.lbYszc1),this.group.addChild(this.groupYszc)},t.prototype.open=function(t,r,n){return void 0===r&&(r=null),void 0===n&&(n=null),__awaiter(this,void 0,void 0,function(){var o,a;return __generator(this,function(i){return e.prototype.open.call(this),o="",o=window.platform.isShowISBN()?LangEntry.str3+window.platform.getISBN():LangEntry.str3,this.labelGG1.text=o,this.updateGGXY(),this.groupYszc.visible=window.platform.isShowYszcCheck(),this.lbYszc1.textFlow=StringUtil.toTF(window.platform.getYszcCheckDec()),a=egret.localStorage.getItem("yinsi2_"+EntranceParam.urlParam.openId),this.cb.source="1"==a?ResEntrance.getResSource("gouxuan1.png"):ResEntrance.getResSource("gouxuan0.png"),this.imgLogo.visible=window.platform.isShowLogo(),this.imgAge.visible=window.platform.isShowAge(),this.groupServer.visible=window.platform.isShowServerList(),this.serverListData=t,this.callback=r,this.callbackObj=n,this.addClickE(this,this.onClick),this.updateCurServer(this.serverListData.defaultserver),this.lbYszc1.addEventListener(egret.TextEvent.LINK,this.onLink,this),[2]})})},t.prototype.close=function(){this.lbYszc1.removeEventListener(egret.TextEvent.LINK,this.onLink,this),e.prototype.close.call(this)},t.prototype.onLink=function(e){window.platform.openLink(e.text)},t.prototype.updateServerList=function(e){this.serverListData=e,this.updateCurServer(this.serverListData.defaultserver)},t.prototype.updateGGXY=function(){this.labelGG1.validateNow(),this.labelGG1.bottom=15+(this.stage.stageHeight>this.group.height?Math.max(this.group.height-this.stage.stageHeight,-this.labelGG1.height):0)},t.prototype.updateCurServer=function(e){e&&(this.selectData=e,this.labelServerName.text=this.selectData.name,this.imgState.source=ResEntrance.getResSource(["check.png","new.png","hot.png","check.png"][this.selectData.server_status])),this.selectData.isWeihu?(this.btnStartGame.visible=!1,this.labelWeihu.visible=!0):(this.btnStartGame.visible=!0,this.labelWeihu.visible=!1)},t.prototype.setClickEnable=function(e){this.touchEnabled=this.touchChildren=e},t.prototype.onClick=function(e){return __awaiter(this,void 0,void 0,function(){var t,r,n,o,a;return __generator(this,function(i){switch(e.target){case this.btnStartGame:if(window.platform.isShowYszcCheck()&&"1"!=egret.localStorage.getItem("yinsi2_"+EntranceParam.urlParam.openId))return window.platform.alert(LangEntry.str28),[2];if("1"==EntranceParam.urlParam.isBan)return window.platform.alert(LangEntry.str5),[2];if(this.selectData.isWeihu)return window.platform.alert(LangEntry.str6),[2];window.platform.checkStartGame()&&(this.callback&&this.callbackObj&&this.callback.call(this.callbackObj,this.selectData),this.setClickEnable(!1));break;case this.btnGonggao:window.platform.openGonggaoWin();break;case this.btnLogout:window.platform.logout(null);break;case this.imgAge:window.platform.openSltsWin();break;case this.btnSelectServer:window.platform.openServerListWin(this.serverListData);break;case this.cb:t=egret.localStorage.getItem("yinsi2_"+EntranceParam.urlParam.openId),egret.localStorage.setItem("yinsi2_"+EntranceParam.urlParam.openId,"1"==t?"0":"1"),this.cb.source="1"==egret.localStorage.getItem("yinsi2_"+EntranceParam.urlParam.openId)?ResEntrance.getResSource("gouxuan1.png"):ResEntrance.getResSource("gouxuan0.png")}return r=100,n=100,o=new egret.Rectangle(0,this.height-r,n,r),a=new egret.Rectangle(this.width-n,this.height-r,n,r),o.contains(e.stageX,e.stageY)&&this.clickCount<2?(this.clickCount++,this.showVersion(),[2]):a.contains(e.stageX,e.stageY)&&this.clickCount>=2?(this.clickCount++,this.showVersion(),[2]):(this.clickCount=0,[2])})})},t.prototype.showVersion=function(){this.clickCount>=this.clickMaxCount&&(this.labelVersion.text="v:"+window.v,this.labelVersion.visible=!this.labelVersion.visible)},t}(BaseWinEntry);__reflect(ServerWin.prototype,"ServerWin"),window.ServerWin=ServerWin;var ServerYinsiWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.group.width=552,this.group.height=488,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource("tipsbg.jpg"),this.group.addChild(this.imgBg),this.imgTitle=new eui.Image,this.imgTitle.source=ResEntrance.getResSource("yszc.png"),this.imgTitle.y=12,this.imgTitle.horizontalCenter=0,this.group.addChild(this.imgTitle),this.scroller=new eui.Scroller,this.scroller.horizontalCenter=0,this.scroller.y=98,this.scroller.width=456,this.scroller.height=215,this.scroller.scrollPolicyV="on";var t=new eui.Group;this.scroller.addChild(t),this.scroller.viewport=t,this.group.addChild(this.scroller),this.labelContent=new eui.Label,this.labelContent.width=this.scroller.width,this.labelContent.fontFamily="SimHei",this.labelContent.textAlign="center",this.labelContent.lineSpacing=15,this.labelContent.size=20,this.labelContent.verticalAlign=egret.VerticalAlign.MIDDLE,this.labelContent.wordWrap=!0,this.labelContent.multiline=!0,t.addChild(this.labelContent),this.btnOk=new eui.Image,this.btnOk.source=ResEntrance.getResSource("tipsbtn_tongyi.png"),this.btnOk.y=362,this.btnOk.horizontalCenter=-100,this.group.addChild(this.btnOk),this.btnCancel=new eui.Image,this.btnCancel.source=ResEntrance.getResSource("tipsbtn_jujue.png"),this.btnCancel.y=362,this.btnCancel.horizontalCenter=100,this.group.addChild(this.btnCancel)},t.prototype.open=function(t,r,n){void 0===t&&(t=""),void 0===r&&(r=null),void 0===n&&(n=null),e.prototype.open.call(this),this.callbackSuccsss=r,this.callbackFail=n,this.addClickE(this.btnOk,this.onClick),this.addClickE(this.btnCancel,this.onClick),this.labelContent.addEventListener(egret.TextEvent.LINK,this.onLink,this),this.labelContent.textFlow=StringUtil.toTF(t),this.addBg(.8)},t.prototype.close=function(){this.labelContent.removeEventListener(egret.TextEvent.LINK,this.onLink,this),e.prototype.close.call(this)},t.prototype.onLink=function(e){window.platform.openLink(e.text)},t.prototype.onClick=function(e){switch(e.target){case this.btnOk:this.close(),this.callbackSuccsss&&this.callbackSuccsss();break;case this.btnCancel:this.callbackFail&&this.callbackFail()}},t}(BaseWinEntry);__reflect(ServerYinsiWin.prototype,"ServerYinsiWin"),window.ServerYinsiWin=ServerYinsiWin;var GameMd5=function(){function e(){}return e.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_md5=function(e,t,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},e.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.rstr_hmac_md5=function(e,t){var r=this.rstr2binl(e);r.length>16&&(r=this.binl_md5(r,8*e.length));for(var n=Array(16),o=Array(16),a=0;16>a;a++)n[a]=909522486^r[a],o[a]=1549556828^r[a];var i=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(o.concat(i),640))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var r,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",a=0;a<e.length;a++)r=e.charCodeAt(a),o+=n.charAt(r>>>4&15)+n.charAt(15&r);return o},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=e.length,a=0;o>a;a+=3)for(var i=e.charCodeAt(a)<<16|(o>a+1?e.charCodeAt(a+1)<<8:0)|(o>a+2?e.charCodeAt(a+2):0),s=0;4>s;s++)n+=8*a+6*s>8*e.length?this.b64pad:r.charAt(i>>>6*(3-s)&63);return n},e.rstr2any=function(e,t){var r,n,o,a,i,s=t.length,c=Array(Math.ceil(e.length/2));for(r=0;r<c.length;r++)c[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);var l=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),u=Array(l);for(n=0;l>n;n++){for(i=Array(),a=0,r=0;r<c.length;r++)a=(a<<16)+c[r],o=Math.floor(a/s),a-=o*s,(i.length>0||o>0)&&(i[i.length]=o);u[n]=a,c=i}var p="";for(r=u.length-1;r>=0;r--)p+=t.charAt(u[r]);return p},e.str2rstr_utf8=function(e){for(var t,r,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&r>=56320&&57343>=r&&(t=65536+((1023&t)<<10)+(1023&r),o++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.str2rstr_utf16le=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r),e.charCodeAt(r)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)>>>8&255,255&e.charCodeAt(r));return t},e.rstr2binl=function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t},e.binl2rstr=function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);
return t},e.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var s=r,c=n,l=o,u=a;r=this.md5_ff(r,n,o,a,e[i+0],7,-680876936),a=this.md5_ff(a,r,n,o,e[i+1],12,-389564586),o=this.md5_ff(o,a,r,n,e[i+2],17,606105819),n=this.md5_ff(n,o,a,r,e[i+3],22,-1044525330),r=this.md5_ff(r,n,o,a,e[i+4],7,-176418897),a=this.md5_ff(a,r,n,o,e[i+5],12,1200080426),o=this.md5_ff(o,a,r,n,e[i+6],17,-1473231341),n=this.md5_ff(n,o,a,r,e[i+7],22,-45705983),r=this.md5_ff(r,n,o,a,e[i+8],7,1770035416),a=this.md5_ff(a,r,n,o,e[i+9],12,-1958414417),o=this.md5_ff(o,a,r,n,e[i+10],17,-42063),n=this.md5_ff(n,o,a,r,e[i+11],22,-1990404162),r=this.md5_ff(r,n,o,a,e[i+12],7,1804603682),a=this.md5_ff(a,r,n,o,e[i+13],12,-40341101),o=this.md5_ff(o,a,r,n,e[i+14],17,-1502002290),n=this.md5_ff(n,o,a,r,e[i+15],22,1236535329),r=this.md5_gg(r,n,o,a,e[i+1],5,-165796510),a=this.md5_gg(a,r,n,o,e[i+6],9,-1069501632),o=this.md5_gg(o,a,r,n,e[i+11],14,643717713),n=this.md5_gg(n,o,a,r,e[i+0],20,-373897302),r=this.md5_gg(r,n,o,a,e[i+5],5,-701558691),a=this.md5_gg(a,r,n,o,e[i+10],9,38016083),o=this.md5_gg(o,a,r,n,e[i+15],14,-660478335),n=this.md5_gg(n,o,a,r,e[i+4],20,-405537848),r=this.md5_gg(r,n,o,a,e[i+9],5,568446438),a=this.md5_gg(a,r,n,o,e[i+14],9,-1019803690),o=this.md5_gg(o,a,r,n,e[i+3],14,-187363961),n=this.md5_gg(n,o,a,r,e[i+8],20,1163531501),r=this.md5_gg(r,n,o,a,e[i+13],5,-1444681467),a=this.md5_gg(a,r,n,o,e[i+2],9,-51403784),o=this.md5_gg(o,a,r,n,e[i+7],14,1735328473),n=this.md5_gg(n,o,a,r,e[i+12],20,-1926607734),r=this.md5_hh(r,n,o,a,e[i+5],4,-378558),a=this.md5_hh(a,r,n,o,e[i+8],11,-2022574463),o=this.md5_hh(o,a,r,n,e[i+11],16,1839030562),n=this.md5_hh(n,o,a,r,e[i+14],23,-35309556),r=this.md5_hh(r,n,o,a,e[i+1],4,-1530992060),a=this.md5_hh(a,r,n,o,e[i+4],11,1272893353),o=this.md5_hh(o,a,r,n,e[i+7],16,-155497632),n=this.md5_hh(n,o,a,r,e[i+10],23,-1094730640),r=this.md5_hh(r,n,o,a,e[i+13],4,681279174),a=this.md5_hh(a,r,n,o,e[i+0],11,-358537222),o=this.md5_hh(o,a,r,n,e[i+3],16,-722521979),n=this.md5_hh(n,o,a,r,e[i+6],23,76029189),r=this.md5_hh(r,n,o,a,e[i+9],4,-640364487),a=this.md5_hh(a,r,n,o,e[i+12],11,-421815835),o=this.md5_hh(o,a,r,n,e[i+15],16,530742520),n=this.md5_hh(n,o,a,r,e[i+2],23,-995338651),r=this.md5_ii(r,n,o,a,e[i+0],6,-198630844),a=this.md5_ii(a,r,n,o,e[i+7],10,1126891415),o=this.md5_ii(o,a,r,n,e[i+14],15,-1416354905),n=this.md5_ii(n,o,a,r,e[i+5],21,-57434055),r=this.md5_ii(r,n,o,a,e[i+12],6,1700485571),a=this.md5_ii(a,r,n,o,e[i+3],10,-1894986606),o=this.md5_ii(o,a,r,n,e[i+10],15,-1051523),n=this.md5_ii(n,o,a,r,e[i+1],21,-2054922799),r=this.md5_ii(r,n,o,a,e[i+8],6,1873313359),a=this.md5_ii(a,r,n,o,e[i+15],10,-30611744),o=this.md5_ii(o,a,r,n,e[i+6],15,-1560198380),n=this.md5_ii(n,o,a,r,e[i+13],21,1309151649),r=this.md5_ii(r,n,o,a,e[i+4],6,-145523070),a=this.md5_ii(a,r,n,o,e[i+11],10,-1120210379),o=this.md5_ii(o,a,r,n,e[i+2],15,718787259),n=this.md5_ii(n,o,a,r,e[i+9],21,-343485551),r=this.safe_add(r,s),n=this.safe_add(n,c),o=this.safe_add(o,l),a=this.safe_add(a,u)}return[r,n,o,a]},e.md5_cmn=function(e,t,r,n,o,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,a)),o),r)},e.md5_ff=function(e,t,r,n,o,a,i){return this.md5_cmn(t&r|~t&n,e,t,o,a,i)},e.md5_gg=function(e,t,r,n,o,a,i){return this.md5_cmn(t&n|r&~n,e,t,o,a,i)},e.md5_hh=function(e,t,r,n,o,a,i){return this.md5_cmn(t^r^n,e,t,o,a,i)},e.md5_ii=function(e,t,r,n,o,a,i){return this.md5_cmn(r^(t|~n),e,t,o,a,i)},e.safe_add=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(GameMd5.prototype,"GameMd5"),window.GameMd5=GameMd5;var StringUtil=function(){function e(){}return e.getSingleTextFlow1=function(e){var t=!!e.match(/C\:(.+?)\&T/),r="";if(t){for(var n="<font",o=e.split("&"),a=void 0,i=0,s=o.length;s>i;i++){var c=o[i][0],l=o[i].slice(2,o[i].length);c==this.PROP_TEXT?a=l:c==this.STYLE_SIZE?n+=' size="'+parseInt(l)+'"':c==this.STYLE_COLOR?n+=' color="'+parseInt(l)+'"':a=l}n+=">"+a+"</font>",r=n}else r=e;return r},e.toTF=function(t){t||(t="");var r="",n=this.getLinkStr(t);n.hasLink&&(t=n.resultReplaceSign);for(var o=t.split("|"),a=0,i=o.length;i>a;a++)r+=e.getSingleTextFlow1(o[a]);for(var a=0;a<n.links.length;a++)r=r.replace(n.replaceSign,n.links[a].linkHtmlText);return(new egret.HtmlTextParser).parser(r)},e.getLinkStr=function(e,t){void 0===t&&(t="丶");var r="",n="",o=[],a=new LinkData,i=/\#(.+?)\$/g,s=e.match(i),c=!(!s||!s.length);if(c)for(var l=0,u=s;l<u.length;l++){var p=u[l],h="",d="",m="",g=p.slice(1,p.length-1),f=g.split(";");if(f[0]&&f[1]){d=f[1],m=f[0],h='<a href="event:'+d+'"><u>'+m+"</u></a>",n=e=e.replace(i,t),r=n.replace(t,h);var y=new LinkContent;y.linkHtmlText=h,y.linkUrl=d,y.linkText=m,o.push(y)}}return a.hasLink=c,a.result=r,a.replaceSign=t,a.resultReplaceSign=n,a.links=o,a},e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e}();__reflect(StringUtil.prototype,"StringUtil");var LinkData=function(){function e(){}return e}();__reflect(LinkData.prototype,"LinkData");var LinkContent=function(){function e(){}return e}();__reflect(LinkContent.prototype,"LinkContent"),window.StringUtil=StringUtil;